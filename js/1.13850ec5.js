(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"049c":function(t,e,i){"use strict";var s=i("b930"),a=i.n(s);a.a},"06b1":function(t,e,i){},"0ab2":function(t,e,i){},"0fe8":function(t,e,i){},"0fef":function(t,e,i){"use strict";var s=i("c70a"),a=i.n(s);a.a},1:function(t,e){},"156f":function(t,e,i){"use strict";var s=i("a9a2"),a=i.n(s);a.a},"169a":function(t,e,i){"use strict";var s=i("747f"),a=i.n(s);a.a},"180f":function(t,e,i){},2:function(t,e){},"229f":function(t,e,i){"use strict";var s=i("180f"),a=i.n(s);a.a},"22db":function(t,e,i){},"234b":function(t,e,i){},"25d7":function(t,e,i){},"2b41":function(t,e,i){},"2dde":function(t,e,i){"use strict";var s=i("a22d"),a=i.n(s);a.a},3:function(t,e){},"355b":function(t,e,i){"use strict";var s=i("c34b"),a=i.n(s);a.a},"35c4":function(t,e,i){},"3d97":function(t,e,i){},4:function(t,e){},"40b8":function(t,e,i){"use strict";var s=i("35c4"),a=i.n(s);a.a},4796:function(t,e,i){},"49cb":function(t,e,i){"use strict";var s=i("e45f"),a=i.n(s);a.a},"4b0c":function(t,e,i){},"4d85":function(t,e,i){"use strict";var s=i("8101"),a=i.n(s);a.a},"4df4":function(t,e,i){"use strict";var s=i("2b41"),a=i.n(s);a.a},"4fb8":function(t,e,i){"use strict";var s=i("e8f0"),a=i.n(s);a.a},5:function(t,e){},"50f8":function(t,e,i){},"520d":function(t,e,i){"use strict";var s=i("c831"),a=i.n(s);a.a},"53e2d":function(t,e,i){"use strict";var s=i("69d5a"),a=i.n(s);a.a},5616:function(t,e,i){},"590d":function(t,e,i){"use strict";var s=i("4b0c"),a=i.n(s);a.a},"5a50":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"k",(function(){return o})),i.d(e,"l",(function(){return r})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"h",(function(){return l})),i.d(e,"g",(function(){return c})),i.d(e,"i",(function(){return d})),i.d(e,"j",(function(){return u})),i.d(e,"d",(function(){return m})),i.d(e,"f",(function(){return p})),i.d(e,"e",(function(){return h})),i.d(e,"s",(function(){return g})),i.d(e,"o",(function(){return f})),i.d(e,"m",(function(){return v})),i.d(e,"r",(function(){return b})),i.d(e,"q",(function(){return y})),i.d(e,"p",(function(){return x})),i.d(e,"n",(function(){return S}));var s="mqtt-tiles-boards",a="mqtt-tiles-clients",n="mqtt-tiles-active-client",o=0,r=1,l=0,c=1,d=0,u=1,m=0,p=1,h=2,g=0,f=1,v=2,b=3,y=4,x=5,S=6},6:function(t,e){},6231:function(t,e,i){"use strict";var s=i("65ba"),a=i.n(s);a.a},"65ba":function(t,e,i){},"69d5a":function(t,e,i){},"747f":function(t,e,i){},"798c":function(t,e,i){"use strict";var s=i("e00b"),a=i.n(s);a.a},8101:function(t,e,i){},8306:function(t,e,i){"use strict";var s=i("9e66"),a=i.n(s);a.a},"834d":function(t,e,i){"use strict";var s=i("3d97"),a=i.n(s);a.a},"88fb":function(t,e,i){"use strict";var s=i("22db"),a=i.n(s);a.a},"8b24":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex flex-center"},[i("dash",{ref:"dash",attrs:{"client-settings":t.client,"init-boards":t.initBoards},on:{"change-status":function(e){t.$emit("change-status",e)},share:function(e){return t.$emit("share",e)},"share:prepare":t.sharePrepareHandler,"change:title":function(e){return t.title=e},"update:boards":t.updateBoards,"change:attach":t.changeAttachedBoards,"update-client-settings":function(e){return t.$emit("update-client-settings")}}}),t.shareWizardConfig?i("share-wizard",{attrs:{config:t.shareWizardConfig},on:{hide:function(e){t.shareWizardConfig=void 0,t.shareWizardOpened=!1},share:t.shareBoard},model:{value:t.shareWizardOpened,callback:function(e){t.shareWizardOpened=e},expression:"shareWizardOpened"}}):t._e()],1)},a=[],n=(i("ac6a"),i("cadf"),i("06db"),i("456d"),i("ceac")),o=i.n(n),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dash__wrapper",class:{"dash__wrapper--full":!t.fullView}},[t.activeBoardId?i("board",{style:{height:t.clientSettings?t.fullView?"calc(100vh - 50px)":"100vh":"calc(100vh - 110px)"},attrs:{board:t.boards[t.activeBoardId],boards:t.boards,widgets:t.widgets,values:t.values,"variables-values":t.boardsVariablesValues[t.activeBoardId],canShare:t.canShare,isFrized:!t.fullView,hasConnection:!!t.clientSettings},on:{close:t.clearActiveBoard,"add:widget":t.addWidget,"edit:widget":t.editWidget,"edit:board":t.editBoardHandler,"delete:widget":t.deleteWidget,action:t.actionHandler,"fast-bind":t.fastBindWidgetHandler,resized:t.resizeHandler,block:t.blockBoardHandler,prevent:t.preventBoardHandler,"update:layout":t.layoutUpdateHandler,share:function(e){return t.shareHandler(t.activeBoardId)},"share-error":t.shareErrorHandler,upload:function(e){return t.exportPrepareBoardHandler(t.activeBoardId)},modify:function(e){return t.setModifyTimeBoardHandler(t.activeBoardId)},"export-widgets":t.exportWidgetsFromBoard,"import-widgets":function(e){return t.importClickHandler("widgets")}}}):i("boards",{style:{height:t.clientSettings?"calc(100vh - 50px)":"calc(100vh - 110px)"},attrs:{boards:t.boards,"boards-configs":t.boardsConfigs,widgets:t.widgets,values:t.values,"variables-values":t.boardsVariablesValues,remoteBoards:t.boardsFromConnection,canShare:t.canShare,isFrized:!t.fullView,"connection-settings":t.clientSettings},on:{add:t.addBoard,edit:t.editBoardHandler,"edit:widget":t.editWidget,delete:t.deleteBoardDialogHandler,select:t.setActiveBoard,action:t.actionHandler,share:t.shareHandler,"share-uploaded":t.shareUploadedHandler,"share-error":t.shareErrorHandler,"delete-uploaded":t.deleteUploadedBoard,export:t.exportPrepareBoardHandler,"export-as":t.exportBoardAsHandler,import:t.importBoardFromConnectionHandler,"change:attach":t.changeAttachedBoards}},[i("div",{attrs:{slot:"actions"},slot:"actions"},[i("q-btn",{attrs:{label:"import",flat:"",color:"grey-9"},on:{click:function(e){return t.importClickHandler("board")}}})],1)]),t.clientSettings?t._e():i("div",{staticClass:"bg-red-2 text-red-8 text-center absolute connections--empty"},[i("div",{staticClass:"text-bold q-mt-md"},[t._v("No active connections")])]),i("copy-replace-dialog",{ref:"copyReplaceDialog",attrs:{initName:t.exportBoardId},on:{"change:name":function(e){return t.exportBoardId=e}}}),i("import-export-modal",{ref:"importExportModal",attrs:{mode:t.importExportMode,data:t.importExportData},on:{close:t.importExportClose,import:t.importFromUserHandler}})],1)},l=[],c=(i("8e6e"),i("8a81"),i("0d6d"),i("097d"),i("4db1")),d=i.n(c),u=i("8993"),m=i.n(u),p=(i("551c"),i("5df3"),i("6762"),i("2fdb"),i("967e")),h=i.n(p),g=(i("7514"),i("c5f6"),i("96cf"),i("c47a")),f=i.n(g),v=(i("a481"),i("28a5"),i("f751"),i("7f7f"),i("63ea")),b=i.n(v),y=i("fc74"),x=i.n(y),S=i("59a1"),q=i.n(S),_=i("e7fc"),w=i.n(_),C=function(){function t(e){x()(this,t),this._client=e}return q()(t,[{key:"publish",value:function(){for(var t=this,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return new Promise((function(e,s){var a;(a=t._client).publish.apply(a,i.concat([function(t,i){t?s(t):e(i)}]))}))}},{key:"subscribe",value:function(){for(var t=this,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return new Promise((function(e,s){var a;(a=t._client).subscribe.apply(a,i.concat([function(t,i){t?s(t):e(i)}]))}))}},{key:"unsubscribe",value:function(){for(var t=this,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return new Promise((function(e,s){var a;(a=t._client).unsubscribe.apply(a,i.concat([function(t,i){t?s(t):e(i)}]))}))}},{key:"end",value:function(){for(var t=this,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return new Promise((function(e,s){var a;(a=t._client).end.apply(a,i.concat([function(t,i){t?s(t):e(i)}]))}))}},{key:"reconnect",value:function(){var t;return(t=this._client).reconnect.apply(t,arguments)}},{key:"addListener",value:function(){var t;return(t=this._client).addListener.apply(t,arguments)}},{key:"emit",value:function(){var t;return(t=this._client).emit.apply(t,arguments)}},{key:"eventNames",value:function(){var t;return(t=this._client).eventNames.apply(t,arguments)}},{key:"getLastMessageId",value:function(){var t;return(t=this._client).getLastMessageId.apply(t,arguments)}},{key:"getMaxListeners",value:function(){var t;return(t=this._client).getMaxListeners.apply(t,arguments)}},{key:"listenerCount",value:function(){var t;return(t=this._client).listenerCount.apply(t,arguments)}},{key:"listeners",value:function(){var t;return(t=this._client).listeners.apply(t,arguments)}},{key:"off",value:function(){var t;return(t=this._client).off.apply(t,arguments)}},{key:"on",value:function(){var t;return(t=this._client).on.apply(t,arguments)}},{key:"once",value:function(){var t;return(t=this._client).once.apply(t,arguments)}},{key:"prependListener",value:function(){var t;return(t=this._client).prependListener.apply(t,arguments)}},{key:"prependOnceListener",value:function(){var t;return(t=this._client).prependOnceListener.apply(t,arguments)}},{key:"rawListeners",value:function(){var t;return(t=this._client).rawListeners.apply(t,arguments)}},{key:"removeAllListeners",value:function(){var t;return(t=this._client).removeAllListeners.apply(t,arguments)}},{key:"removeListener",value:function(){var t;return(t=this._client).removeListener.apply(t,arguments)}},{key:"removeOutgoingMessage",value:function(){var t;return(t=this._client).removeOutgoingMessage.apply(t,arguments)}},{key:"setMaxListeners",value:function(){var t;return(t=this._client).setMaxListeners.apply(t,arguments)}},{key:"handleMessage",set:function(t){this._client.handleMessage=t},get:function(){return this._client.handleMessage}},{key:"connected",get:function(){return this._client.connected}},{key:"reconnecting",get:function(){return this._client.reconnecting}}]),t}(),k={connect:function(t,e){var i=w.a.connect(t,e),s=new C(i);return s},connectAsync:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=w.a.connect(t,e),a=new C(s);return new Promise((function(t,e){var n={connect:function(e){o(),t(a)},end:function(){o(),t(a)},error:function(t){o(),s.end(),e(t)}};!1===i&&(n.close=function(){n.error("Couldn't connect to server")});var o=function(){Object.keys(n).forEach((function(t){s.removeListener(t,n[t])}))};Object.keys(n).forEach((function(t){s.on(t,n[t])}))}))},AsyncClient:C},T=i("1732"),V=i("51e9"),$=i.n(V),I=i("b047c"),M=i.n(I),O=i("0f32"),E=i.n(O),B=i("0644"),F=i.n(B),N=i("c04c"),A=i.n(N),L=i("42454"),z=i.n(L),H=i("eed6"),D=i.n(H),P=i("9b02"),j=i.n(P),R=i("27ae"),W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dash__board"},[t.settingsModel?i("settings",{attrs:{settings:t.currentSettings,board:t.board,mode:t.operationMode},on:{save:t.saveSettingsHandler,hide:t.hideSettingsHandler},model:{value:t.settingsModel,callback:function(e){t.settingsModel=e},expression:"settingsModel"}}):t._e(),t.board.settings.blocked||t.isFrized?t._e():i("q-btn",{staticClass:"absolute button--add",attrs:{fab:"",color:"grey-9",icon:"mdi-plus"},on:{click:t.addWidgetHandler}},[i("q-tooltip",[t._v("Add new widget")])],1),t.isFrized&&t.board.name||!t.isFrized?i("q-toolbar",{staticClass:"bg-white"},[t.isFrized?t._e():i("q-btn",{attrs:{round:"",flat:"",color:"grey-9",icon:"mdi-arrow-left"},on:{click:function(e){return t.$emit("close")}}},[i("q-tooltip",[t._v("Back to boards list")])],1),i("q-toolbar-title",{staticClass:"text-grey-9"},[t._v(t._s(t.board.name||"*No name*"))]),t.isFrized?t._e():i("q-btn",{attrs:{icon:"mdi-link",flat:"",round:"",color:"grey-"+(t.canShare?9:7),ripple:t.canShare},on:{click:function(e){return t.share(t.shareHandler)}}},[i("q-tooltip",[t._v("Get link")])],1),t.isFrized?t._e():i("q-btn",{attrs:{icon:"mdi-cloud-upload-outline",flat:"",round:"",color:"grey-"+(t.canShare?9:7),ripple:t.canShare},on:{click:function(e){return t.share(t.uploadHandler)}}},[i("q-tooltip",[t._v("Upload board")])],1),t.isFrized?t._e():[t.exportEnabled?i("q-btn",{attrs:{label:"export",color:"green-9",flat:""},on:{click:t.doneExport}},[i("q-tooltip",[t._v("Export widgets")])],1):i("q-btn",{attrs:{icon:"mdi-application-export",color:"grey-9",flat:"",round:""},on:{click:t.prepareExport}},[i("q-tooltip",[t._v("Export widgets")])],1)],t.$q.platform.is.desktop?[t.isFrized?t._e():i("q-btn",{attrs:{icon:"mdi-application-import",color:"grey-9",flat:"",round:""},on:{click:t.importWidgets}},[i("q-tooltip",[t._v("Import widgets")])],1),t.isFrized||t.board.settings.blocked?t._e():i("q-btn",{attrs:{icon:t.board.settings.preventCollision?"mdi-pin":"mdi-pin-outline",color:"grey-9",flat:"",round:""},on:{click:t.preventCollisionBoardHandler}},[i("q-tooltip",[t._v(t._s(t.board.settings.preventCollision?"Unlock widgets positions":"Lock widgets positions"))])],1),t.isFrized?t._e():i("q-btn",{attrs:{icon:t.board.settings.blocked?"mdi-lock":"mdi-lock-open",color:"grey-9",flat:"",round:""},on:{click:t.blockBoardHandler}},[i("q-tooltip",[t._v(t._s(t.board.settings.blocked?"Unlock your board":"Lock your board"))])],1),t.isFrized?t._e():i("q-btn",{attrs:{icon:"mdi-settings",color:"grey-9",flat:"",round:""},on:{click:t.modifyBoardSettings}},[i("q-tooltip",[t._v("Board settings")])],1)]:t.isFrized?t._e():i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-dots-vertical",color:"grey-9"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[i("q-list",{attrs:{dense:""}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.importWidgets(e)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-application-import"}})],1),i("q-item-section",[t._v("Import widgets")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.modifyBoardSettings(e)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-settings"}})],1),i("q-item-section",[t._v("Board settings")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.blockBoardHandler(e)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:t.board.settings.blocked?"mdi-lock":"mdi-lock-open"}})],1),i("q-item-section",[t._v(t._s(t.board.settings.preventCollision?"Unlock your board":"Lock your board"))])],1),t.board.settings.blocked?t._e():i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.preventCollisionBoardHandler(e)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:t.board.settings.preventCollision?"mdi-pin":"mdi-pin-outline"}})],1),i("q-item-section",[t._v(t._s(t.board.settings.preventCollision?"Unlock widgets positions":"Lock widgets positions"))])],1)],1)],1)],1)],2):t._e(),t.board.settings.variables&&t.board.settings.variables.length?i("q-toolbar",{staticClass:"q-py-none bg-white",staticStyle:{"flex-wrap":"wrap"}},[i("q-resize-observer",{on:{resize:t.onVariablesWrapperResize}}),t._l(t.board.settings.variables,(function(e,s){return[i("q-select",{key:e.name,staticClass:"q-mr-sm",staticStyle:{"min-width":"120px"},attrs:{outlined:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",dense:"",options:t.getVariableValues(s),value:t.variablesListValues[s][t.board.activeVariables[e.name]]&&t.variablesListValues[s][t.board.activeVariables[e.name]].value||"",label:e.name},on:{input:function(i){t.changeVaribleHandler(e.name,i)}},scopedSlots:t._u([{key:"option",fn:function(e){return[i("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[i("q-item-section",[i("q-item-label",{class:{"text-grey-7":!e.opt.label}},[t._v(t._s(e.opt.label||"*Empty*"))])],1),e.opt.label!=e.opt.value?i("q-item-section",{attrs:{side:""}},[i("q-item-label",[t._v(t._s(e.opt.value))])],1):t._e()],1)]}},{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",[i("div",{staticClass:"text-italic text-grey-9 text-h6 text-center text-bold"},[t._v(t._s("No "+e.name))])])],1)]},proxy:!0},{key:"selected-item",fn:function(e){return[i("q-item",t._g(t._b({staticClass:"q-pa-none",staticStyle:{"min-height":"14px"}},"q-item",e.itemProps,!1),e.itemEvents),[i("q-item-section",[i("q-item-label",[t._v(t._s(e.opt.label&&e.opt.value?e.opt.label:e.opt.value?e.opt.label||"*Empty*":""))])],1),e.opt.label!=e.opt.value?i("q-item-section",{attrs:{side:""}},[i("q-item-label",[t._v(t._s(e.opt.value))])],1):t._e()],1)]}}],null,!0)})]}))],2):t._e(),i("div",{staticClass:"widgets__wrapper scroll",class:{"q-px-sm":t.$q.platform.is.mobile},style:{height:t.wrapperHeight}},[t.board.widgetsIndexes.length?i("div",{staticStyle:{width:"100%",position:"relative"}},[i("q-resize-observer",{on:{resize:t.onResize}}),i("grid-layout",{ref:"grid",attrs:{layout:t.currentLayout,"col-num":t.colNum,"row-height":t.rowHeight,"is-draggable":!t.board.settings.blocked&&!t.isFrized&&!t.exportEnabled,"is-resizable":!t.board.settings.blocked&&!t.isFrized,"is-mirrored":!1,"vertical-compact":!1,margin:[10,10],"use-css-transforms":!0,responsive:!0,"prevent-collision":t.board.settings.preventCollision},on:{"update:layout":function(e){t.currentLayout=e},"layout-ready":function(e){return t.$refs.grid.onWindowResize()}}},t._l(t.board.widgetsIndexes,(function(e,s){return i("grid-item",{key:e,attrs:{x:t.currentLayout[s].x,y:t.currentLayout[s].y,w:t.currentLayout[s].w,h:t.currentLayout[s].h,i:t.currentLayout[s].i,minW:t.widgets[e].settings.minWidth||1,minH:t.widgets[e].settings.minHeight||1,dragIgnoreFrom:".widget__content"},on:{resized:t.resizeHandler}},[t.exportEnabled?i("div",{staticClass:"wrapper__item--export absolute-top-left absolute-bottom-right cursor-pointer"},[i("q-btn",{staticClass:"absolute-top-left absolute-bottom-right full-width",attrs:{icon:"mdi-check",color:t.exportedWidgetsIndexes[e]?"green":"grey",size:(t.currentLayout[s].h>t.currentLayout[s].w?t.currentLayout[s].w:t.currentLayout[s].h)+"rem",flat:""},on:{click:function(i){return t.exportWidgets(e)}}})],1):t._e(),i(t.widgets[e].type,{tag:"component",staticClass:"wrapper__items",class:{"wrapper__items--edited":!t.board.settings.blocked&&!t.isFrized},attrs:{item:t.widgets[e],value:t.values[e],index:e,"in-shortcuts":Boolean(t.board.shortcutsIndexes.includes(e)),blocked:t.board.settings.blocked||t.isFrized},on:{action:t.actionHandler,update:function(i){return t.editWidgetSettings(e)},duplicate:function(i){return t.duplicateWidgetHandler(e)},delete:function(i){return t.deleteWidgetHandler(e)},"fast-bind":function(i){return t.fastBindHandler(e)}}})],1)})),1)],1):i("div",{staticClass:"text-center text-grey-8 q-mt-md",staticStyle:{"font-size":"2rem"}},[i("div",{staticClass:"text-bold"},[t._v("The board is empty")]),i("div",[i("q-btn",{attrs:{color:"grey-9",icon:"mdi-plus-circle-outline",label:"Add widget"},on:{click:t.addWidgetHandler}})],1)])]),t.boardSettingsModalModel?i("board-settings",{attrs:{settings:t.board,boards:t.boards},on:{edit:t.editBoardHandler},model:{value:t.boardSettingsModalModel,callback:function(e){t.boardSettingsModalModel=e},expression:"boardSettingsModalModel"}}):t._e()],1)},U=[],G=i("f3e3"),Y=i.n(G),J=(i("55dd"),i("8615"),i("2b0e")),K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{value:t.value,maximized:t.$q.platform.is.mobile,"no-backdrop-dismiss":""},on:{hide:t.closeHandler,"escape-key":t.closeHandler}},[i("div",{style:{width:t.$q.platform.is.mobile?"100%":"50vw"}},[i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title",[t._v("\n        Board settings\n      ")])],1),i("div",{staticClass:"q-pa-md scroll bg-white",style:{height:t.$q.platform.is.mobile?"calc(100% - 100px)":"50vh"}},[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"","hide-bottom-space":"",dense:"",autofocus:"",color:"grey-9",label:"Name"},model:{value:t.currentSettings.name,callback:function(e){t.$set(t.currentSettings,"name",e)},expression:"currentSettings.name"}}),i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"","hide-bottom-space":"",dense:"",color:"grey-9",error:!t.currentSettings.id||!!t.currentSettings.id.match(/[/+#\s]/g)||t.boards[t.currentSettings.id]&&t.settings&&t.settings.id!==t.currentSettings.id,label:"Sync alias"},model:{value:t.currentSettings.id,callback:function(e){t.$set(t.currentSettings,"id",e)},expression:"currentSettings.id"}}),i("div",{staticClass:"board-settings__variables col-12 q-mt-lg relative-position"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header"},[i("div",[t._v("Variables"+t._s(t.currentSettings.settings.variables.length?"":" are empty"))]),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addVar}})],1),t._l(t.currentSettings.settings.variables,(function(e,s){return i("q-expansion-item",{key:""+s,attrs:{group:"variables","header-class":["bg-"+(t.checkUniqueVariables(s)?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.settings.variables.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{avatar:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.settings.variables.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[t._v(t._s(e.name))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeVar(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"col-12 q-my-sm",attrs:{outlined:"","hide-bottom-space":"",dense:"",color:"grey-9",label:"Name",error:!e.name},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"variable.name"}}),t.$flespiMode?i("q-select",{staticClass:"col-12 q-my-sm",attrs:{"emit-value":"","map-options":"",outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.variablesPresets,label:"Presets"},on:{input:function(e){t.setPresetByIndex(s,e)}},model:{value:e.preset,callback:function(i){t.$set(e,"preset",i)},expression:"variable.preset"}}):t._e(),"custom"!==e.preset&&void 0!==e.preset&&t.$flespiMode?t._e():[i("q-select",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",value:e.type,"emit-value":"","map-options":"",options:t.variableTypeOptions,color:"grey-9",label:"Type"},on:{input:function(e){return t.changeTypeVariableHandler(s,e)}}}),e.type===t.VARIABLE_TYPE_SOURCE?i("topic",{staticClass:"col-12 q-mb-sm",attrs:{config:{needLabel:!0}},model:{value:e.topic,callback:function(i){t.$set(e,"topic",i)},expression:"variable.topic"}}):t._e(),e.type===t.VARIABLE_TYPE_SOURCE?i("div",[t._v("\n                    Sort variables by:\n                    "),i("q-btn-toggle",{attrs:{options:[{label:"value",value:t.SORT_VARS_BY_VALUE},{label:"label",value:t.SORT_VARS_BY_LABEL}],rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",color:"grey-9"},model:{value:e.sortVarsBy,callback:function(i){t.$set(e,"sortVarsBy",i)},expression:"variable.sortVarsBy"}})],1):t._e(),e.type===t.VARIABLE_TYPE_CUSTOM?[i("div",{staticClass:"variable__items-wrapper col-12 relative-position q-mt-md"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!e.values.length}},[t._v("\n                          Items"+t._s(e.values.length?"":" are empty")+"\n                          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:function(i){return t.addVarItem(e)}}})],1),t._l(e.values,(function(s,a){return i("q-expansion-item",{key:""+a,attrs:{group:"singleselect-items","header-class":["bg-"+(-1===s[1].indexOf("#")?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:a===e.values.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{avatar:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===a,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(i){return i.stopPropagation(),t.upVarItem(e,a)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:a===e.values.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(i){return i.stopPropagation(),t.downVarItem(e,a)}}})],1)]),i("q-item-section",[t._v(t._s(s[0]?s[0]+" ["+s[1]+"]":s[1]||"new item"))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(i){return t.removeVarItem(e,a)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-mr-xs",attrs:{autofocus:"",dense:"",outlined:"","hide-bottom-space":"",color:"grey-9",label:"Label"},model:{value:s[0],callback:function(e){t.$set(s,0,e)},expression:"item[0]"}})],1),i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Value",error:-1!==s[1].indexOf("#")},model:{value:s[1],callback:function(e){t.$set(s,1,e)},expression:"item[1]"}})],1)])],2)}))],2)],1)]:t._e()]],2)],2)}))],2)],1)],1)]),i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title"),i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:t.closeHandler}},[t._v("Close")]),i("q-btn",{attrs:{flat:"",dense:"",disable:!t.validateCurrentSettings},on:{click:t.saveBoardSettingsHandler}},[t._v(t._s(t.settings?"Update":"Save"))])],1)],1)])},Z=[],Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[t.config&&t.config.needSelectors&&t.$flespiMode?[i("div",{staticClass:"col-12  q-mb-sm text-grey-8 text-subtitle2"},[t._v("Select source by flespi entities:")]),i("flespi-selector",{staticClass:"col-12",attrs:{value:this.currentValue.topicTemplate,connector:t.$flespiRestBus,variables:t.selectorsVariables},on:{input:t.selectorTopicUpdate}}),t._m(0),i("div",{staticClass:"col-12 text-grey-8 q-mb-sm text-subtitle2"},[t._v(" Enter manually:")])]:t._e(),i("q-input",{staticClass:"col-8 q-pr-sm",attrs:{dense:"",autofocus:t.config&&t.config.needAutofocus,outlined:"","hide-bottom-space":"",color:"grey-9",label:"Topic",error:!t.validateTopic(t.currentValue.topicFilter)},on:{input:function(e){t.currentValue.topicFilter=t.currentValue.topicTemplate}},model:{value:t.currentValue.topicTemplate,callback:function(e){t.$set(t.currentValue,"topicTemplate",e)},expression:"currentValue.topicTemplate"}}),i("q-select",{staticClass:"col-4",attrs:{dense:"",outlined:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Payload type",options:t.payloadTypeOptions},model:{value:t.currentValue.payloadType,callback:function(e){t.$set(t.currentValue,"payloadType",e)},expression:"currentValue.payloadType"}}),t.board&&t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{staticClass:"col-12",attrs:{variables:t.board.settings.variables},on:{add:function(e){return t.currentValue.topicTemplate+=e}}}):t._e(),t.currentValue.payloadType===t.WIDGET_PAYLOAD_TYPE_JSON?i("q-input",{staticClass:"col-12 q-mt-sm",attrs:{dense:"",outlined:"","hide-bottom-space":"",color:"grey-9",label:"Payload path",hint:"You can set path in result JSON. Path started from root of object. Example: names[0].value"},model:{value:t.currentValue.payloadField,callback:function(e){t.$set(t.currentValue,"payloadField",e)},expression:"currentValue.payloadField"}}):t._e(),t.config&&t.config.needLabel&&t.currentValue.payloadType===t.WIDGET_PAYLOAD_TYPE_JSON?i("q-input",{staticClass:"col-12 q-mt-sm",attrs:{dense:"",outlined:"","hide-bottom-space":"",color:"grey-9",label:"Value`s label",hint:"Value`s label gets from resilt JSON by path. Example: names[0].label"},model:{value:t.currentValue.payloadNameField,callback:function(e){t.$set(t.currentValue,"payloadNameField",e)},expression:"currentValue.payloadNameField"}}):t._e()],2)},X=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 q-mb-md row"},[i("hr",{staticClass:"q-separator q-separator--horizontal col-5",staticStyle:{height:"1px","margin-top":"10px"}}),i("div",{staticClass:"col-2 text-grey-8 text-center text-uppercase"},[t._v("or")]),i("hr",{staticClass:"q-separator q-separator--horizontal col-5",staticStyle:{height:"1px","margin-top":"10px"}})])}],tt={methods:{validateTopic:function(t){if(!t.length)return!1;for(var e=t.split("/"),i=0;i<e.length;i++)if("+"!==e[i]){if("#"===e[i])return!1;if(-1!==e[i].indexOf("+")||-1!==e[i].indexOf("#"))return!1}return!0},validateFiniteTopic:function(t){if(!t.length)return!1;for(var e=t.split("/"),i=0;i<e.length;i++){if("+"===e[i])return!1;if("#"===e[i])return!1;if(-1!==e[i].indexOf("+")||-1!==e[i].indexOf("#"))return!1}return!0}}},et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-mt-xs",staticStyle:{"font-size":".8rem","line-height":"1"}},[t._v("\n  You can use variables:\n  "),t._l(t.variables,(function(e){return i("span",{key:e.name,staticClass:"cursor-pointer q-mr-xs text-grey-9",domProps:{innerHTML:t._s("<%"+e.name+"%>")},on:{click:function(i){return t.$emit("add","<%"+e.name+"%>")}}})}))],2)},it=[],st={name:"VariablesHelper",props:["variables"]},at=st,nt=i("2877"),ot=Object(nt["a"])(at,et,it,!1,null,null,null),rt=ot.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.$q.platform.is.desktop?i("q-btn-toggle",{staticClass:"q-mb-md",attrs:{options:t.options,spread:"",unelevated:"","toggle-color":"grey-9"},model:{value:t.entity,callback:function(e){t.entity=e},expression:"entity"}}):i("q-select",{staticClass:"q-mb-md",attrs:{options:t.options,"emit-value":"","map-options":"",outlined:"",dense:"",color:"grey-9"},model:{value:t.entity,callback:function(e){t.entity=e},expression:"entity"}}),i("div",{staticClass:"relative-position"},[t.entity?t._e():i("div",{staticClass:"selectors__settings-splash"}),t.renderConfig.selectors?t._l(t.renderConfig.selectors,(function(e){return i("div",{key:t.entity+"-"+e.name},[t.useVars[e.name]?i("q-select",{staticClass:"q-mb-md",attrs:{options:t.variables,"emit-value":"","map-options":"",outlined:"",dense:"",color:"grey-9",label:"Variables"},on:{input:function(){return t.update(e.name,null)}},scopedSlots:t._u([{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",[i("div",{staticClass:"text-italic text-grey-9 text-h6 text-center text-bold"},[t._v(t._s("No "+e.name))]),i("div",{staticClass:"text-grey text-center"},[t._v("Maybe you need to clean another related selectors")])])],1)]},proxy:!0},{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-format-list-bulleted-square"},on:{click:function(i){return t.toggleVariableView(e.name)}}},[i("q-tooltip",[t._v(t._s("Select "+e.name))])],1)]},proxy:!0}],null,!0),model:{value:t.vars[e.name],callback:function(i){t.$set(t.vars,e.name,i)},expression:"vars[selector.name]"}}):i("q-select",{staticClass:"q-mb-md",attrs:{value:t.model[e.name],options:t.renderLists[e.name],"emit-value":"","map-options":"",multiple:"",clearable:"","use-input":"","use-chips":"",outlined:"",dense:"",color:"grey-9",label:t.model[e.name]?e.name:"All "+e.name},on:{input:function(i){return t.update(e.name,i)},filter:function(i,s){return t.filterItems(e,i,s)}},scopedSlots:t._u([{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",[i("div",{staticClass:"text-italic text-grey-9 text-h6 text-center text-bold"},[t._v(t._s("No "+e.name))]),i("div",{staticClass:"text-grey text-center"},[t._v("Maybe you need to clean another related selectors")])])],1)]},proxy:!0},t.variables.length?{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-variable"},on:{click:function(i){return t.toggleVariableView(e.name)}}},[i("q-tooltip",[t._v("Select variables")])],1)]},proxy:!0}:null,{key:"option",fn:function(e){return[i("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[i("q-item-section",[i("q-item-label",{domProps:{innerHTML:t._s(e.opt.label||"*Empty*")}}),i("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.value))])],1)],1)]}}],null,!0)})],1)})):t._e(),t.renderConfig.children?[i("flespi-selectors",{key:t.entity,attrs:{value:t.value,config:t.renderConfig.children,variables:t.variables,connector:t.connector,entities:t.model},on:{input:t.updateModel}})]:t._e()],2)],1)},ct=[],dt=(i("4917"),i("3b2b"),i("ac4d"),i("db97"));function ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function mt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(i),!0).forEach((function(e){f()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ut(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var pt={name:"FlespiSelectors",props:{config:{type:Object,default:function(){return dt}},connector:Object,entities:{type:Object,default:function(){return{}}},variables:{type:Array,default:function(){return[]}},value:String},data:function(){var t=void 0,e={},i={},s={},a={},n="";return{entity:t,lists:i,renderLists:mt({},i),model:e,topic:n,vars:s,useVars:a}},computed:{options:function(){return Object.keys(this.config).map((function(t){return{label:t,value:t}}))},entitiesNames:function(){return Object.keys(this.config)},renderConfig:function(){return this.entity?this.config[this.entity]:this.config[this.entitiesNames[0]]}},methods:{initByEntity:function(t){var e=this.config[t].selectors,i={},s={},a={},n={};return e&&e.forEach((function(t){t.value&&(s[t.name]=null),t.list?(i[t.name]=t.list,i[t.name].inited=!0):(i[t.name]=[],i[t.name].inited=!1),a[t.name]=null,n[t.name]=!1})),{lists:i,model:s,vars:a,useVars:n}},filterItems:function(t,e,i){var s,a=this;if(this.lists[t.name].inited)return this.$set(this.renderLists,t.name,e?this.lists[t.name].filter((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})):this.lists[t.name]),void i();(s=this.connector)[t.getter.name].apply(s,d()(t.getter.params.map((function(t){return a.model[t]||"all"})))).then((function(s){a.$set(a.lists,t.name,s),a.$set(a.renderLists,t.name,e?a.lists[t.name].filter((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})):a.lists[t.name]),a.lists[t.name].inited=!0,i()}))},update:function(t,e){var i=this;this.$set(this.model,t,e&&e.length?e:null),this.entity&&this.config[this.entity].selectors&&this.config[this.entity].selectors.forEach((function(e){e.getter&&e.getter.params&&e.getter.params.includes(t)&&(i.$set(i.lists,e.name,[]),i.$set(i.renderLists,e.name,[]))})),this.$emit("input",{topic:this.getCurrentTopic(this.topic,this.model)})},updateModel:function(t){var e=t.topic;this.topic=e,this.$emit("input",{topic:this.getCurrentTopic(this.topic,this.model)})},getCurrentTopic:function(t,e){var i=this,s=t&&t.topicPattern;if(t&&this.entity&&this.config[this.entity].selectors){var a=this.config[this.entity].selectors.map((function(t){return t.name}));s=a.reduce((function(t,s){var a=s,n=e[a],o=i.useVars[a]&&i.vars[a];return o?t=t.replace("${".concat(a,"}"),"<%".concat(o,"%>")):void 0!==n&&(t=n&&n.length?t.replace("${".concat(a,"}"),n):t.replace("${".concat(a,"}"),"+")),t}),s)}return mt({},t,{topicPattern:s})},topicToModelHandler:function(t){function e(t){var i=[];for(var s in t){var a=t[s],n=[s],o=a.topic&&a.topic.topicPattern;if(a.children){var r=e(a.children),l=!0,c=!1,u=void 0;try{for(var m,p=r[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var h=m.value;i.push({path:[].concat(n,d()(h.path)),topic:h.topic})}}catch(g){c=!0,u=g}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}else i.push({path:n,topic:o})}return i}var i,s=e(this.config),a=s.filter((function(e){e.path;var i=e.topic;return i=new RegExp(i.replace(/\$\{\w+\}/g,".*")),i.test(t)})),n=a.pop();if(n){i={path:n.path,values:{},vars:{}};var o=n.topic.split("/"),r=t.split("/");o.forEach((function(t,e){t.replace(/\$\{(\w+)\}/,(function(t,s){var a=r[e];a.match(/<%.*%>/)?i.vars[s]=a.slice(2,-2):i.values[s]="+"===a?null:a.split(",")}))}))}return i},setModel:function(t){if(!t)return!1;var e=this.initByEntity(t.path[0]),i=e.lists,s=e.model,a=e.vars,n=e.useVars;for(var o in this.entity=t.path[0],this.lists=i,t.vars)n[o]=!0,a[o]=t.vars[o];this.vars=a,this.useVars=n,this.model=Object.assign(s,t.values),this.topic=this.config[t.path[0]].topic,this.topic&&this.$emit("input",{topic:this.getCurrentTopic(this.topic,this.model)})},changeEntity:function(t){var e=this.initByEntity(t),i=e.lists,s=e.model,a=e.vars,n=e.useVars;this.lists=i,this.vars=a,this.useVars=n,this.model=mt({},s,{},this.entities),this.topic=this.config[t].topic,this.topic&&this.$emit("input",{topic:this.getCurrentTopic(this.topic,this.model)})},toggleVariableView:function(t){this.$set(this.useVars,t,!this.useVars[t]),this.topic&&this.$emit("input",{topic:this.getCurrentTopic(this.topic,this.model)})}},created:function(){this.setModel(this.topicToModelHandler(this.value));var t=this.getCurrentTopic(this.topic,this.model);this.$watch("entity",this.changeEntity),t&&this.$emit("input",{topic:t})},watch:{entities:{deep:!0,handler:function(t){if(this.model=mt({},this.model,{},t),this.entity){var e=this.initByEntity(this.entity),i=e.lists;this.lists=i}}}}},ht=pt,gt=(i("049c"),Object(nt["a"])(ht,lt,ct,!1,null,null,null)),ft=gt.exports,vt=i("5a50"),bt={name:"Topic",props:["value","board","config"],data:function(){var t={topicTemplate:"",topicFilter:"",payloadType:0,payloadField:"",payloadNameField:""},e=Object.assign({},this.defaultTopic,this.value);return e.topicTemplate||(e.topicTemplate=e.topicFilter),{defaultTopic:t,currentValue:e,WIDGET_PAYLOAD_TYPE_STRING:vt["h"],WIDGET_PAYLOAD_TYPE_JSON:vt["g"],payloadTypeOptions:[{label:"String",value:vt["h"]},{label:"JSON",value:vt["g"]}]}},computed:{selectorsVariables:function(){var t=[];return this.board&&this.board.settings.variables&&this.board.settings.variables.length&&(t=this.board.settings.variables.map((function(t){return{label:t.name,value:t.name}}))),t}},watch:{currentValue:{deep:!0,handler:function(t){this.$emit("input",t)}},value:function(t){this.currentValue=t}},methods:{selectorTopicUpdate:function(t){var e=t.topic,i=e.topicPattern,s=e.payloadType;if(!i)return!1;this.$set(this.currentValue,"topicTemplate",i),this.$set(this.currentValue,"topicFilter",i),s="JSON"===s?vt["g"]:vt["h"],this.$set(this.currentValue,"payloadType",s)}},mixins:[tt],components:{VariablesHelper:rt,FlespiSelector:ft}},yt=bt,xt=Object(nt["a"])(yt,Q,X,!1,null,null,null),St=xt.exports,qt=0,_t=1,wt=0,Ct=1,kt={devices:{name:"devices",preset:"devices",type:_t,topic:{topicTemplate:"flespi/state/gw/devices/+",topicFilter:"flespi/state/gw/devices/+",payloadType:1,payloadField:"id",payloadNameField:"name"},sortVarsBy:Ct,values:[]},calcs:{name:"calcs",preset:"calcs",type:_t,topic:{topicTemplate:"flespi/state/gw/calcs/+",topicFilter:"flespi/state/gw/calcs/+",payloadType:1,payloadField:"id",payloadNameField:"name"},sortVarsBy:Ct,values:[]},channels:{name:"channels",preset:"channels",type:_t,topic:{topicTemplate:"flespi/state/gw/channels/+",topicFilter:"flespi/state/gw/channels/+",payloadType:1,payloadField:"id",payloadNameField:"name"},sortVarsBy:Ct,values:[]},custom:{name:"name",preset:"custom",type:qt,topic:{topicTemplate:"",topicFilter:"",payloadType:0,payloadField:""},sortVarsBy:wt,values:[]}},Tt=0,Vt=1,$t=0,It=1,Mt={props:["settings","value","boards"],data:function(){var t=Object.freeze({name:"New board",id:"",settings:{blocked:!1,variables:[]},activeVariables:{},shortcutsIndexes:[],widgetsIndexes:[],layouts:{lg:[],md:[],sm:[],xs:[],xxs:[]}}),e={topicTemplate:"",topicFilter:"",payloadType:0,payloadField:""},i={};return this.settings?(i=F()(z()({},t,this.settings)),i.settings.variables&&i.settings.variables.forEach((function(t){void 0===t.type&&(t.type=0,t.topic=F()(e)),void 0===t.sortVarsBy&&(t.sortVarsBy=0),t.preset||(t.preset="custom")}))):(i=F()(t),i.id=Object(T["a"])()),{currentSettings:i,defaultTopic:e,defaultVariable:{name:"name",preset:"custom",type:Tt,topic:e,sortVarsBy:$t,values:[]},VARIABLE_TYPE_CUSTOM:Tt,VARIABLE_TYPE_SOURCE:Vt,SORT_VARS_BY_VALUE:$t,SORT_VARS_BY_LABEL:It,variableTypeOptions:[{label:"Custom",value:Tt},{label:"Source",value:Vt}],variablesPresets:[{label:"Devices",value:"devices"},{label:"Channels",value:"channels"},{label:"Calcs",value:"calcs"},{label:"Custom",value:"custom"}]}},computed:{validateCurrentSettings:function(){var t=this,e=this.currentSettings.settings.variables;return this.currentSettings.id&&(!e.length||e.length&&e.reduce((function(e,i,s){return e&&(!i.type&&t.checkUniqueVariables(s)&&i.values.length||i.type&&i.topic.topicFilter)}),!0))}},methods:{saveBoardSettingsHandler:function(){var t=this.settings?"edit":"add";"add"===t&&this.$set(this.currentSettings,"activeVariables",this.currentSettings.settings.variables.reduce((function(t,e){return t[e.name]=void 0,t}),{})),this.$emit(t,this.currentSettings),this.closeHandler()},closeHandler:function(){this.$emit("input",!1),this.$emit("hide")},addVar:function(){this.currentSettings.settings.variables.push(F()(this.$flespiMode?kt.devices:this.defaultVariable))},removeVar:function(t){this.$delete(this.currentSettings.settings.variables,t)},changeTypeVariableHandler:function(t,e){var i=this.currentSettings.settings.variables[t];e===Tt?i.topic=F()(this.defaultTopic):i.values=[],this.$set(i,"type",e)},setPresetByIndex:function(t,e){var i=kt[e];this.$set(this.currentSettings.settings.variables,t,i)},checkUniqueVariables:function(t){var e=this.currentSettings.settings.variables[t],i=this.currentSettings.settings.variables.reduce((function(t,i,s){return i.name===e.name&&t.push(s),t}),[]);return e.name&&0===i.indexOf(t)},upItem:function(t){var e=this.currentSettings.settings.variables.splice(t,1)[0];this.currentSettings.settings.variables.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.settings.variables.splice(t,1)[0];this.currentSettings.settings.variables.splice(t+1,0,e)},addVarItem:function(t){t.values.push(["",""])},removeVarItem:function(t,e){this.$delete(t.values,e)},upVarItem:function(t,e){var i=t.values.splice(e,1)[0];t.values.splice(e-1,0,i)},downVarItem:function(t,e){var i=t.values.splice(e,1)[0];t.values.splice(e+1,0,i)}},components:{Topic:St}},Ot=Mt,Et=(i("d87c"),Object(nt["a"])(Ot,K,Z,!1,null,null,null)),Bt=Et.exports,Ft=i("89c1"),Nt=i.n(Ft),At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":"",maximized:t.$q.platform.is.mobile},on:{hide:t.closeHandler},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("div",{staticClass:"bg-white",style:{width:t.$q.platform.is.mobile?"100%":"80vw"}},[i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title",[t._v("\n        Widget\n      ")])],1),i("div",{staticClass:"scroll q-pa-md",style:{maxHeight:t.$q.platform.is.mobile?"":"calc(100vh - 148px)",height:t.$q.platform.is.mobile?"calc(100% - 100px)":""}},[i("q-input",{attrs:{outlined:"","hide-bottom-space":"",dense:"",color:"grey-9 q-mb-sm",label:"Name"},model:{value:t.currentSettings.name,callback:function(e){t.$set(t.currentSettings,"name","string"===typeof e?e.trim():e)},expression:"currentSettings.name"}}),i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",value:t.currentSettings.type,options:t.typeOptions,"emit-value":"","map-options":"",label:"Type","popup-content-class":"type__content","popup-content-style":{width:t.typeElementWidth+"px"}},on:{input:t.typeChangeHandler},scopedSlots:t._u([{key:"option",fn:function(e){return[i("q-item",t._g(t._b({style:{width:t.$q.platform.is.desktop?"16.6666667%":"25%",minHeight:"70px"}},"q-item",e.itemProps,!1),e.itemEvents),[i("q-item-section",{staticClass:"text-center"},[i("q-icon",{staticStyle:{width:"auto"},attrs:{size:t.$q.platform.is.desktop?"2rem":"1.5rem",name:e.opt.rightIcon}}),i("q-item-label",{staticClass:"q-mt-xs ellipsis",style:{fontSize:".7rem"},domProps:{innerHTML:t._s(e.opt.label)}}),i("q-tooltip",[t._v(t._s(e.opt.label))])],1)],1)]}}])},[i("q-resize-observer",{on:{resize:t.onResize}})],1),i("div",{staticClass:"color-palette q-px-sm q-py-xs rounded-borders q-mb-lg q-mt-sm"},[i("div",{staticClass:"text-grey-9 q-pb-xs q-ml-xs color-palette__label"},[t._v("Color")]),i("div",{staticClass:"row color-palette__wrapper"},t._l(t.colors,(function(e){return i("span",{key:e,staticClass:"q-mr-sm cursor-pointer color-palette__item",class:["bg-"+e],on:{click:function(i){return t.setColor(e)}}},[e===t.currentSettings.color?i("q-icon",{staticClass:"item__icon",attrs:{size:"1.4rem",name:"mdi-check",color:"white"}}):t._e()],1)})),0)]),0!==t.currentSettings.settings.maxTopicsLength?i("q-list",{staticClass:"relative-position q-mb-sm",attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.dataTopics.length}},[t._v("\n          Topics"+t._s(t.currentSettings.dataTopics.length?"":" are empty")+"\n          "),this.currentSettings.settings.maxTopicsLength&&this.currentSettings.dataTopics.length>=this.currentSettings.settings.maxTopicsLength&&void 0!==this.currentSettings.settings.maxTopicsLength?t._e():i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addTopicHandler}})],1),t._l(t.currentSettings.dataTopics,(function(e,s){return i("q-expansion-item",{key:s,attrs:{"header-class":["bg-"+t.topicsHighlight[s]],group:"topics","expand-icon":"mdi-settings",value:s===t.currentSettings.dataTopics.length-1}},[i("template",{slot:"header"},[i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.topicTemplate||"Empty"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeTopicHandler(s)}}})],1)],1),i("topic",{staticClass:"q-pa-sm",attrs:{board:t.board,config:{needSelectors:!0}},model:{value:t.currentSettings.dataTopics[s],callback:function(e){t.$set(t.currentSettings.dataTopics,s,e)},expression:"currentSettings.dataTopics[index]"}})],2)}))],2):t._e(),i(t.currentSettings.type,{tag:"component",attrs:{widget:t.currentSettings,board:t.board},on:{update:t.updateSettingsHandler,validate:t.validateSchemas}})],1),i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title"),i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:t.closeHandler}},[t._v("Close")]),i("q-btn",{attrs:{flat:"",dense:"",disable:!t.validateCurrentSettings||!t.isValideSchema},on:{click:t.saveSettingsHandler}},[t._v(t._s(t.saveButtonLabels[t.mode]))])],1)],1)])},Lt=[],zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}})],1),i("q-btn-toggle",{staticClass:"q-my-sm col-12",attrs:{rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",options:t.modeOptions},model:{value:t.currentSettings.mode,callback:function(e){t.$set(t.currentSettings,"mode",e)},expression:"currentSettings.mode"}}),0===t.currentSettings.mode&&t.widget.topics.length>1?i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Action topic"},model:{value:t.currentSettings.actionTopic,callback:function(e){t.$set(t.currentSettings,"actionTopic",e)},expression:"currentSettings.actionTopic"}}):t._e(),i("div",{staticClass:"col-6 q-pr-sm"},[i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"True value"},model:{value:t.currentSettings.trueValue,callback:function(e){t.$set(t.currentSettings,"trueValue",e)},expression:"currentSettings.trueValue"}}),i("q-input",{staticClass:"q-mb-sm icon-input",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"True value icon"},model:{value:t.currentSettings.trueIcon,callback:function(e){t.$set(t.currentSettings,"trueIcon",e)},expression:"currentSettings.trueIcon"}},[i("q-icon",{attrs:{slot:"append",name:"mdi-"+(t.currentSettings.trueIcon||"toggle-switch-outline"),size:"1.5rem"},slot:"append"})],1),1===t.currentSettings.mode?i("div",{staticClass:"q-mb-sm"},[i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"True action topic"},model:{value:t.currentSettings.trueActionTopic,callback:function(e){t.$set(t.currentSettings,"trueActionTopic",e)},expression:"currentSettings.trueActionTopic"}},[t.currentSettings.trueActionTopic?i("q-btn",{attrs:{slot:"after",icon:"mdi-arrow-right",dense:"",flat:""},on:{click:function(e){t.currentSettings.falseActionTopic=t.currentSettings.trueActionTopic}},slot:"after"}):t._e()],1),t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{attrs:{variables:t.board.settings.variables},on:{add:function(e){return t.currentSettings.trueActionTopic+=e}}}):t._e()],1):t._e(),1===t.currentSettings.mode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"True action payload"},model:{value:t.currentSettings.truePayload,callback:function(e){t.$set(t.currentSettings,"truePayload",e)},expression:"currentSettings.truePayload"}},[t.currentSettings.truePayload?i("q-btn",{attrs:{slot:"after",icon:"mdi-arrow-right",dense:"",flat:""},on:{click:function(e){t.currentSettings.falsePayload=t.currentSettings.truePayload}},slot:"after"}):t._e()],1):t._e()],1),i("div",{staticClass:"col-6 q-pl-sm"},[i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"False value"},model:{value:t.currentSettings.falseValue,callback:function(e){t.$set(t.currentSettings,"falseValue",e)},expression:"currentSettings.falseValue"}}),i("q-input",{staticClass:"q-mb-sm icon-input",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"False value icon"},model:{value:t.currentSettings.falseIcon,callback:function(e){t.$set(t.currentSettings,"falseIcon",e)},expression:"currentSettings.falseIcon"}},[i("q-icon",{attrs:{slot:"append",name:"mdi-"+(t.currentSettings.falseIcon||"toggle-switch-off-outline"),size:"1.5rem"},slot:"append"})],1),1===t.currentSettings.mode?i("div",{staticClass:"q-mb-sm"},[i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"False action topic"},model:{value:t.currentSettings.falseActionTopic,callback:function(e){t.$set(t.currentSettings,"falseActionTopic",e)},expression:"currentSettings.falseActionTopic"}}),t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{attrs:{variables:t.board.settings.variables},on:{add:function(e){return t.currentSettings.falseActionTopic+=e}}}):t._e()],1):t._e(),1===t.currentSettings.mode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"False action payload"},model:{value:t.currentSettings.falsePayload,callback:function(e){t.$set(t.currentSettings,"falsePayload",e)},expression:"currentSettings.falsePayload"}}):t._e()],1),i("q-input",{staticClass:"col-12 q-mt-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("div",{staticClass:"text-grey-9",staticStyle:{"font-size":".8rem"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),t.widget.topics.length>1?i("div",{staticClass:"q-my-md col-12"},[i("div",{staticClass:"text-grey-6",staticStyle:{"font-size":"0.75rem"}},[t._v("Accumulate logic")]),i("q-btn-toggle",{attrs:{rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",options:t.accumulateLogicOptions},model:{value:t.currentSettings.accumulateLogic,callback:function(e){t.$set(t.currentSettings,"accumulateLogic",e)},expression:"currentSettings.accumulateLogic"}}),i("div",{staticClass:"text-grey-6",staticStyle:{"font-size":"0.75rem"}},[t._v("How value will be accumulating*")])],1):t._e(),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Ht=[],Dt=0,Pt=1,jt=0,Rt=1,Wt={name:"SwitcherSchema",props:["widget","board"],data:function(){var t={math:"",actionTopic:"",trueValue:"1",trueIcon:"",trueActionTopic:"",truePayload:"",falseValue:"0",falseIcon:"",falseActionTopic:"",falsePayload:"",accumulateLogic:jt,save:!0,mode:Dt,height:2,width:2,minWidth:1,minHeight:2,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),modeOptions:[{label:"Default mode",value:Dt},{label:"Command mode",value:Pt}],accumulateLogicOptions:[{label:"AND",value:jt},{label:"OR",value:Rt}]}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("update",t)}}},components:{VariablesHelper:rt}},Ut=Wt,Gt=Object(nt["a"])(Ut,zt,Ht,!1,null,null,null),Yt=Gt.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Prefix"},model:{value:t.currentSettings.prefix,callback:function(e){t.$set(t.currentSettings,"prefix",e)},expression:"currentSettings.prefix"}})],1),i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-ml-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Postfix"},model:{value:t.currentSettings.postfix,callback:function(e){t.$set(t.currentSettings,"postfix",e)},expression:"currentSettings.postfix"}})],1),i("q-input",{staticClass:"col-8 q-mb-sm q-pr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("q-select",{staticClass:"col-4 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.formatOptions,"emit-value":"","map-options":"",label:"Format value as"},model:{value:t.currentSettings.valueFormat,callback:function(e){t.$set(t.currentSettings,"valueFormat",e)},expression:"currentSettings.valueFormat"}}),t.currentSettings.valueFormat===t.constants.WIDGET_VALUE_FORMAT_DATE?i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Datetime format",placeholder:"DD/MM/YYYY HH:mm:ss.SSS"},model:{value:t.currentSettings.dateFormat,callback:function(e){t.$set(t.currentSettings,"dateFormat",e)},expression:"currentSettings.dateFormat"}}):t._e(),i("div",{staticClass:"col-12 text-grey-7",staticStyle:{"font-size":"12px","line-height":"1"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Kt=[],Zt={name:"InformerSchema",props:["widget","board"],data:function(){var t={math:"",valueFormat:0,prefix:"",postfix:"",height:2,width:2,minWidth:1,minHeight:2,maxTopicsLength:1,isNeedTime:!0};return{defaultSettings:t,constants:{WIDGET_VALUE_FORMAT_STRING:vt["s"],WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE:vt["o"],WIDGET_VALUE_FORMAT_DATE:vt["m"],WIDGET_VALUE_FORMAT_PRE:vt["r"],WIDGET_VALUE_FORMAT_MARKDOWN:vt["q"],WIDGET_VALUE_FORMAT_JSON:vt["p"],WIDGET_VALUE_FORMAT_DURATION:vt["n"]},currentSettings:Object.assign({},t,this.widget.settings),formatOptions:[{label:"String",value:vt["s"]},{label:"Human readable size, B",value:vt["o"]},{label:"Datetime, s",value:vt["m"]},{label:"Duration, s",value:vt["n"]},{label:"Preformated",value:vt["r"]},{label:"Markdown",value:vt["q"]},{label:"JSON",value:vt["p"]}]}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("update",t)}}}},Qt=Zt,Xt=Object(nt["a"])(Qt,Jt,Kt,!1,null,null,null),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.formatOptions,"emit-value":"","map-options":"",label:"Format value as"},model:{value:t.currentSettings.valueFormat,callback:function(e){t.$set(t.currentSettings,"valueFormat",e)},expression:"currentSettings.valueFormat"}})],1),i("div",{staticClass:"col-xs-12"},[i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","max-height":300,type:"textarea",label:"Text","input-style":"resize: none;"},model:{value:t.currentSettings.text,callback:function(e){t.$set(t.currentSettings,"text",e)},expression:"currentSettings.text"}})],1)])])},ie=[],se={name:"StaticInformerSchema",props:["widget","board"],data:function(){var t={valueFormat:0,text:"",height:2,width:2,minWidth:1,minHeight:2,maxTopicsLength:0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),formatOptions:[{label:"String",value:vt["s"]},{label:"Preformated",value:vt["r"]},{label:"Markdown",value:vt["q"]},{label:"JSON",value:vt["p"]}]}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("update",t)}}}},ae=se,ne=Object(nt["a"])(ae,ee,ie,!1,null,null,null),oe=ne.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"multi-informer__items-wrapper col-12 relative-position q-mb-sm"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Items"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.topic,attrs:{group:"singleselect-items","header-class":["bg-"+(e.topic.topicFilter?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.items.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.topic.topicFilter||"New item"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("topic",{staticClass:"col-12 q-mb-sm",attrs:{board:t.board},on:{input:t.updateTopics},model:{value:e.topic,callback:function(i){t.$set(e,"topic",i)},expression:"item.topic"}}),i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Prefix"},model:{value:e.prefix,callback:function(i){t.$set(e,"prefix",i)},expression:"item.prefix"}})],1),i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-ml-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Postfix"},model:{value:e.postfix,callback:function(i){t.$set(e,"postfix",i)},expression:"item.postfix"}})],1),i("q-input",{staticClass:"col-8 q-pr-xs q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:e.math,callback:function(i){t.$set(e,"math",i)},expression:"item.math"}}),i("q-select",{staticClass:"col-4 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.formatOptions,"emit-value":"","map-options":"",label:"Format value as"},model:{value:e.valueFormat,callback:function(i){t.$set(e,"valueFormat",i)},expression:"item.valueFormat"}}),e.valueFormat===t.constants.WIDGET_VALUE_FORMAT_DATE?i("q-input",{staticClass:"col-12 q-mb-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Datetime format",placeholder:"DD/MM/YYYY HH:mm:ss.SSS"},model:{value:e.dateFormat,callback:function(i){t.$set(e,"dateFormat",i)},expression:"item.dateFormat"}}):t._e(),i("div",{staticClass:"col-12 text-grey-7 q-px-sm q-mb-sm",staticStyle:{"font-size":"12px","line-height":"1"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")])],1)],2)}))],2)],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)])])},le=[],ce={name:"MultiInformerSchema",props:["widget","board"],data:function(){var t={items:[],topics:[],height:2,width:2,minWidth:1,minHeight:2,maxTopicsLength:0,isNeedTime:!0},e={topic:{topicTemplate:"",topicFilter:"",payloadType:0,payloadField:"",payloadNameField:""},math:"",valueFormat:0,prefix:"",postfix:""};return{defaultSettings:t,defaultItem:e,constants:{WIDGET_VALUE_FORMAT_STRING:vt["s"],WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE:vt["o"],WIDGET_VALUE_FORMAT_DATE:vt["m"],WIDGET_VALUE_FORMAT_PRE:vt["r"],WIDGET_VALUE_FORMAT_MARKDOWN:vt["q"],WIDGET_VALUE_FORMAT_JSON:vt["p"],WIDGET_VALUE_FORMAT_DURATION:vt["n"]},currentItem:F()(e),currentSettings:Object.assign({},t,this.widget.settings),formatOptions:[{label:"String",value:vt["s"]},{label:"Human readable size, B",value:vt["o"]},{label:"Datetime, s",value:vt["m"]},{label:"Duration, s",value:vt["n"]},{label:"Preformated",value:vt["r"]},{label:"Markdown",value:vt["q"]},{label:"JSON",value:vt["p"]}],defaultTopic:{topicTemplate:"",topicFilter:"",payloadType:0,payloadField:"",payloadNameField:""}}},methods:{addItem:function(){this.currentSettings.items.push(this.currentItem),this.currentItem=F()(this.defaultItem)},removeItem:function(t){this.$delete(this.currentSettings.items,t)},upItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t+1,0,e)},updateTopics:function(){this.$set(this.currentSettings,"topics",this.currentSettings.items.map((function(t){return t.topic})))},validate:function(){return!0}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",t)}}},components:{Topic:St}},de=ce,ue=(i("4df4"),Object(nt["a"])(de,re,le,!1,null,null,null)),me=ue.exports,pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-toggle",{staticClass:"q-mt-sm",attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}}),i("q-input",{staticClass:"q-mb-sm",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",dense:"",label:t.currentSettings.label.length<=25?"Button label":"Button label (25 symbols max)",error:t.currentSettings.label.length>25},model:{value:t.currentSettings.label,callback:function(e){t.$set(t.currentSettings,"label",e)},expression:"currentSettings.label"}}),i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"","hide-bottom-space":"",dense:"",color:"grey-9",label:"Icon"},model:{value:t.currentSettings.icon,callback:function(e){t.$set(t.currentSettings,"icon",e)},expression:"currentSettings.icon"}},[i("q-icon",{attrs:{slot:"append",name:"mdi-"+(t.currentSettings.icon||"send"),size:"1.5rem"},slot:"append"})],1),i("q-list",{staticClass:"relative-position q-mt-lg",attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.topics.length}},[t._v("\n      Topics"+t._s(t.currentSettings.topics.length?"":" are empty")+"\n      "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addTopic}})],1),t._l(t.currentSettings.topics,(function(e,s){return i("q-expansion-item",{key:s,attrs:{group:"frame-items","header-class":["bg-"+(t.checkUniqueTopic(s)?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.topics.length-1}},[i("template",{slot:"header"},[i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.topicTemplate||"New topic"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeTopic(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Topic"},on:{input:function(t){return e.topicFilter=t}},model:{value:e.topicTemplate,callback:function(i){t.$set(e,"topicTemplate",i)},expression:"item.topicTemplate"}}),t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{attrs:{variables:t.board.settings.variables},on:{add:function(t){return e.value+=t}}}):t._e(),i("q-input",{staticClass:"q-mt-sm full-width",attrs:{type:"textarea",outlined:"","hide-bottom-space":"",dense:"",color:"grey-9",label:"Payload","input-style":"resize: none;"},model:{value:e.payload,callback:function(i){t.$set(e,"payload",i)},expression:"item.payload"}})],1)],2)}))],2)],1)},he=[],ge={name:"ClickerSchema",props:["widget","board"],data:function(){var t={label:"",icon:"",topics:[],save:!1,height:2,width:3,minWidth:1,minHeight:2,maxTopicsLength:0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings)}},created:function(){this.$emit("update",this.currentSettings)},methods:{validate:function(){return this.currentSettings.label.length<=25&&this.currentSettings.topics.length>0},addTopic:function(){this.currentSettings.topics.push({topicTemplate:"",topicFilter:"",payloadType:0,payloadField:"",payloadNameField:"",payload:""})},removeTopic:function(t){this.$delete(this.currentSettings.topics,t)},checkUniqueTopic:function(t){var e=this.currentSettings.topics[t],i=this.currentSettings.topics.reduce((function(t,i,s){return i.topicTemplate===e.topicTemplate&&t.push(s),t}),[]);return e.topicTemplate&&0===i.indexOf(t)}},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("validate",this.validate()),this.$emit("update",t)}}},components:{VariablesHelper:rt}},fe=ge,ve=(i("156f"),Object(nt["a"])(fe,pe,he,!1,null,null,null)),be=ve.exports,ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("div",{staticClass:"text-grey-9",staticStyle:{"font-size":".8rem"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Min value settings","header-class":["bg-"+(t.isValidMinValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Min value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("min")}},model:{value:t.currentSettings.minValueMode,callback:function(e){t.$set(t.currentSettings,"minValueMode",e)},expression:"currentSettings.minValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.minValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Min value"},model:{value:t.currentSettings.minValue,callback:function(e){t.$set(t.currentSettings,"minValue",t._n(e))},expression:"currentSettings.minValue"}}):i("topic",{attrs:{label:"Min value",board:t.board},model:{value:t.minValue,callback:function(e){t.minValue=e},expression:"minValue"}})],1)])]),i("q-expansion-item",{staticClass:"col-12 q-my-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Max value settings","header-class":["bg-"+(t.isValidMaxValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Max value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("max")}},model:{value:t.currentSettings.maxValueMode,callback:function(e){t.$set(t.currentSettings,"maxValueMode",e)},expression:"currentSettings.maxValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.maxValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Max value"},model:{value:t.currentSettings.maxValue,callback:function(e){t.$set(t.currentSettings,"maxValue",t._n(e))},expression:"currentSettings.maxValue"}}):i("topic",{attrs:{label:"Max value",board:t.board},model:{value:t.maxValue,callback:function(e){t.maxValue=e},expression:"maxValue"}})],1)])]),i("div",{staticClass:"col-4 q-mb-sm"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Low level"},model:{value:t.currentSettings.lowLevel,callback:function(e){t.$set(t.currentSettings,"lowLevel",t._n(e))},expression:"currentSettings.lowLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-mx-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Mid level"},model:{value:t.currentSettings.midLevel,callback:function(e){t.$set(t.currentSettings,"midLevel",t._n(e))},expression:"currentSettings.midLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-ml-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"High level"},model:{value:t.currentSettings.highLevel,callback:function(e){t.$set(t.currentSettings,"highLevel",t._n(e))},expression:"currentSettings.highLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Units"},model:{value:t.currentSettings.units,callback:function(e){t.$set(t.currentSettings,"units",e)},expression:"currentSettings.units"}})],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},xe=[],Se={name:"RadialSchema",props:["widget","board"],data:function(){var t={math:"",lowLevel:60,midLevel:100,highLevel:120,minValue:0,topics:[],minValueMode:vt["i"],maxValue:250,maxValueMode:vt["i"],units:"",height:6,width:3,maxTopicsLength:1,minWidth:2,minHeight:4,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),rangeValueModeOptions:[{label:"Manual",value:vt["i"]},{label:"Broker",value:vt["j"]}],defaultTopic:{topicFilter:"",payloadType:0,payloadField:""}}},computed:{minValue:{get:function(){return this.currentSettings.minValueMode===vt["i"]?this.currentSettings.minValue:this.currentSettings.topics[0]},set:function(t){J["default"].set(this.currentSettings.topics,0,t)}},maxValue:{get:function(){return this.currentSettings.maxValueMode===vt["i"]?this.currentSettings.maxValue:this.currentSettings.minValueMode===vt["i"]?this.currentSettings.topics[0]:this.currentSettings.topics[1]},set:function(t){this.currentSettings.minValueMode===vt["i"]?J["default"].set(this.currentSettings.topics,0,t):J["default"].set(this.currentSettings.topics,1,t)}},isValidMinValue:function(){return this.currentSettings.minValueMode===vt["i"]||this.currentSettings.minValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.minValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.minValue.topicFilter)},isValidMaxValue:function(){return this.currentSettings.maxValueMode===vt["i"]||this.currentSettings.maxValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.maxValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.maxValue.topicFilter)}},methods:{changeRangeValueTypeHandler:function(t){var e=[];this.currentSettings.minValueMode===vt["j"]&&("max"===t?e.push(this.currentSettings.topics[0]):e.push(Object.assign({},this.defaultTopic))),this.currentSettings.maxValueMode===vt["j"]&&("min"===t?this.currentSettings.minValueMode===vt["j"]?e.push(this.currentSettings.topics[0]):e.push(this.currentSettings.topics[1]):e.push(Object.assign({},this.defaultTopic))),J["default"].set(this.currentSettings,"topics",e)},validate:function(){return this.isValidMinValue&&this.isValidMaxValue}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],components:{Topic:St},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}}}},qe=Se,_e=Object(nt["a"])(qe,ye,xe,!1,null,null,null),we=_e.exports,Ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("div",{staticClass:"text-grey-9",staticStyle:{"font-size":".8rem"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Min value settings","header-class":["bg-"+(t.isValidMinValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-3 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Min value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("min")}},model:{value:t.currentSettings.minValueMode,callback:function(e){t.$set(t.currentSettings,"minValueMode",e)},expression:"currentSettings.minValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.minValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Min value"},model:{value:t.currentSettings.minValue,callback:function(e){t.$set(t.currentSettings,"minValue",t._n(e))},expression:"currentSettings.minValue"}}):i("topic",{attrs:{label:"Min value",board:t.board},model:{value:t.minValue,callback:function(e){t.minValue=e},expression:"minValue"}})],1)])]),i("q-expansion-item",{staticClass:"col-12 q-my-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Max value settings","header-class":["bg-"+(t.isValidMaxValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-3 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Max value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("max")}},model:{value:t.currentSettings.maxValueMode,callback:function(e){t.$set(t.currentSettings,"maxValueMode",e)},expression:"currentSettings.maxValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.maxValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Max value"},model:{value:t.currentSettings.maxValue,callback:function(e){t.$set(t.currentSettings,"maxValue",t._n(e))},expression:"currentSettings.maxValue"}}):i("topic",{attrs:{label:"Max value",board:t.board},model:{value:t.maxValue,callback:function(e){t.maxValue=e},expression:"maxValue"}})],1)])]),i("div",{staticClass:"col-4 q-mb-sm"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Low level"},model:{value:t.currentSettings.lowLevel,callback:function(e){t.$set(t.currentSettings,"lowLevel",t._n(e))},expression:"currentSettings.lowLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-mx-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Mid level"},model:{value:t.currentSettings.midLevel,callback:function(e){t.$set(t.currentSettings,"midLevel",t._n(e))},expression:"currentSettings.midLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-ml-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"High level"},model:{value:t.currentSettings.highLevel,callback:function(e){t.$set(t.currentSettings,"highLevel",t._n(e))},expression:"currentSettings.highLevel"}})],1),i("div",{staticClass:"col-4"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Units"},model:{value:t.currentSettings.units,callback:function(e){t.$set(t.currentSettings,"units",e)},expression:"currentSettings.units"}})],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},ke=[],Te={name:"LinearSchema",props:["widget","board"],data:function(){var t={math:"",lowLevel:60,midLevel:100,highLevel:120,minValue:0,topics:[],minValueMode:vt["i"],maxValue:250,maxValueMode:vt["i"],units:"",height:8,width:1,maxTopicsLength:1,minWidth:1,minHeight:2,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),rangeValueModeOptions:[{label:"Manual",value:vt["i"]},{label:"Broker",value:vt["j"]}],defaultTopic:{topicFilter:"",payloadType:0,payloadField:""}}},computed:{minValue:{get:function(){return this.currentSettings.minValueMode===vt["i"]?this.currentSettings.minValue:this.currentSettings.topics[0]},set:function(t){J["default"].set(this.currentSettings.topics,0,t)}},maxValue:{get:function(){return this.currentSettings.maxValueMode===vt["i"]?this.currentSettings.maxValue:this.currentSettings.minValueMode===vt["i"]?this.currentSettings.topics[0]:this.currentSettings.topics[1]},set:function(t){this.currentSettings.minValueMode===vt["i"]?J["default"].set(this.currentSettings.topics,0,t):J["default"].set(this.currentSettings.topics,1,t)}},isValidMinValue:function(){return this.currentSettings.minValueMode===vt["i"]||this.currentSettings.minValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.minValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.minValue.topicFilter)},isValidMaxValue:function(){return this.currentSettings.maxValueMode===vt["i"]||this.currentSettings.maxValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.maxValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.maxValue.topicFilter)}},methods:{changeRangeValueTypeHandler:function(t){var e=[];this.currentSettings.minValueMode===vt["j"]&&("max"===t?e.push(this.currentSettings.topics[0]):e.push(Object.assign({},this.defaultTopic))),this.currentSettings.maxValueMode===vt["j"]&&("min"===t?this.currentSettings.minValueMode===vt["j"]?e.push(this.currentSettings.topics[0]):e.push(this.currentSettings.topics[1]):e.push(Object.assign({},this.defaultTopic))),J["default"].set(this.currentSettings,"topics",e)},validate:function(){return this.isValidMinValue&&this.isValidMaxValue}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],components:{Topic:St},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}}}},Ve=Te,$e=Object(nt["a"])(Ve,Ce,ke,!1,null,null,null),Ie=$e.exports,Me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"text-grey-6 text-center q-mt-md",staticStyle:{"font-size":"1.3rem"}},[t._v(t._s(t.descriptions[t.currentSettings.mode]))]),i("div",{staticClass:"row"},[i("q-btn-toggle",{staticClass:"q-mt-md col-12",attrs:{rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",options:t.modeOptions},model:{value:t.currentSettings.mode,callback:function(e){t.$set(t.currentSettings,"mode",e)},expression:"currentSettings.mode"}}),t.currentSettings.mode===t.IFRAME_MODE_INTEGRATION?i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Iframe link"},model:{value:t.currentSettings.link,callback:function(e){t.$set(t.currentSettings,"link",e)},expression:"currentSettings.link"}}):t._e(),t.currentSettings.mode===t.IFRAME_MODE_INTEGRATION?i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Ready message from iframe"},model:{value:t.currentSettings.readyMessage,callback:function(e){t.$set(t.currentSettings,"readyMessage",e)},expression:"currentSettings.readyMessage"}}):t._e(),t.currentSettings.mode===t.IFRAME_MODE_INTEGRATION?i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Init message to iframe"},model:{value:t.currentSettings.initMessage,callback:function(e){t.$set(t.currentSettings,"initMessage",e)},expression:"currentSettings.initMessage"}}):t._e(),t.currentSettings.mode===t.IFRAME_MODE_INTEGRATION?i("div",{staticClass:"frame__items-wrapper col-12 relative-position q-mb-sm q-mt-lg"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Post message commands"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.value,attrs:{group:"frame-items","header-class":["bg-"+(t.checkUniqueTopic(s)?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.label||e.topic.topicFilter))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Label"},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"item.label"}}),i("topic",{key:""+s+e.value,staticClass:"col-12 q-mb-sm",attrs:{label:e.label,board:t.board},on:{input:t.setTopics},model:{value:e.topic,callback:function(i){t.$set(e,"topic",i)},expression:"item.topic"}}),i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"textarea",color:"grey-9",label:"Payload template","input-style":"resize: none;"},model:{value:e.template,callback:function(i){t.$set(e,"template",i)},expression:"item.template"}}),i("div",{staticClass:"col-12 text-grey-6",staticStyle:{"font-size":".8rem"}},[t._v("\n              You can use variables in template: "),i("span",{staticClass:"text-grey-10 cursor-pointer",on:{click:function(t){e.template+="<{topic}>"}}},[t._v("<{topic}>")]),t._v(" is a topic from payload packet, "),i("span",{staticClass:"text-grey-10 cursor-pointer",on:{click:function(t){e.template+="<{topic[0]}>"}}},[t._v("<{topic[0]}>")]),t._v(" is a slash separated topic part (0 is part index), "),i("span",{staticClass:"text-grey-10 cursor-pointer",on:{click:function(t){e.template+="<{payload}>"}}},[t._v("<{payload}>")]),t._v(" is a stringified payload of packet, "),i("span",{staticClass:"text-grey-8"},[t._v("<%payload.name%>")]),t._v(" is a JSON path to value in payload, if payload is object.\n            ")])],1)],2)}))],2)],1):t._e(),i("div",{staticClass:"col-12 text-grey-6 q-mt-xs",staticStyle:{"font-size":".8rem"}},[i("span",{staticClass:"text-grey-9 cursor-pointer",on:{click:t.exampleSettingsApply}},[t._v("Example")]),i("span",{staticClass:"text-red"},[t._v(" (will clear all your settings)")])]),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Oe=[],Ee=0,Be=1,Fe={name:"FrameSchema",props:["widget","board"],data:function(){var t={height:6,width:3,maxTopicsLength:0,minWidth:3,minHeight:3,mode:0,template:"",items:[],topics:[],link:"https://flespi.io/mapview",readyMessage:"",initMessage:"",isNeedTime:!0},e={label:"New item",template:"",topic:{topicFilter:"",payloadType:0,payloadField:""}};return{defaultSettings:t,defaultItem:e,currentSettings:Object.assign({},t,this.widget.settings),IFRAME_MODE_INTEGRATION:Ee,IFRAME_MODE_SHOW:Be,modeOptions:[{label:"Integration mode",value:Ee},{label:"Show mode",value:Be}],descriptions:["Payload will be posted to your iframe","Link as payload expected!"]}},methods:{exampleSettingsApply:function(){this.$set(this.currentSettings,"link","https://flespi.io/mapview"),this.$set(this.currentSettings,"readyMessage",'MapView|state:{"ready": true}'),this.$set(this.currentSettings,"items",[{label:"Map item",template:'MapView|cmd:{"addmarkers": [[<%position.latitude%>, <%position.longitude%>]], "clear": "all"}',topic:{topicFilter:"flespi/message/gw/devices/+",payloadType:1,payloadField:""}}]),this.$set(this.currentSettings,"topics",[{topicFilter:"flespi/message/gw/devices/+",payloadType:1,payloadField:""}])},addItem:function(){this.currentSettings.items.push(F()(this.defaultItem))},removeItem:function(t){this.$delete(this.currentSettings.items,t)},setTopics:function(){this.$set(this.currentSettings,"topics",this.currentSettings.items.map((function(t){return t.topic})))},checkUniqueTopic:function(t){var e=this.currentSettings.items[t],i=this.currentSettings.items.reduce((function(t,i,s){return i.topic.topicFilter===e.topic.topicFilter&&t.push(s),t}),[]);return e.topic.topicFilter&&0===i.indexOf(t)},validate:function(){var t=this;return this.currentSettings.mode===Ee&&this.currentSettings.items.length&&this.currentSettings.items.reduce((function(e,i,s){return e&&t.checkUniqueTopic(s)}),!0)||this.currentSettings.mode===Be}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}},"currentSettings.mode":function(t){t===Ee?(this.currentSettings.maxTopicsLength=0,this.widget.dataTopics=[]):(this.currentSettings.maxTopicsLength=1,this.currentSettings.topics=[],this.currentSettings.items=[])}},components:{Topic:St}},Ne=Fe,Ae=(i("de1c"),Object(nt["a"])(Ne,Me,Oe,!1,null,null,null)),Le=Ae.exports,ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}})],1),i("q-btn-toggle",{staticClass:"q-mt-md col-12",attrs:{rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",options:t.modeOptions},model:{value:t.currentSettings.mode,callback:function(e){t.$set(t.currentSettings,"mode",e)},expression:"currentSettings.mode"}}),i("div",{staticClass:"singleselect__items-wrapper col-12 relative-position q-mb-sm"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Items"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.value,attrs:{group:"singleselect-items","header-class":["bg-"+(t.checkUniqueValue(e.val,s)&&e.actionTopic?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{avatar:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.items.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.label?e.label+" ["+e.val+"]":e.val||"New item"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-mr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",autofocus:"",color:"grey-9",label:"Label"},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"item.label"}})],1),i("div",{staticClass:"col-6  q-mb-sm"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Value",error:!t.checkUniqueValue(e.val,s)},model:{value:e.val,callback:function(i){t.$set(e,"val",i)},expression:"item.val"}})],1),1===t.currentSettings.mode?i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-mr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Action topic",error:!e.actionTopic},model:{value:e.actionTopic,callback:function(i){t.$set(e,"actionTopic",i)},expression:"item.actionTopic"}})],1):t._e(),1===t.currentSettings.mode?i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Action payload"},model:{value:e.actionPayload,callback:function(i){t.$set(e,"actionPayload",i)},expression:"item.actionPayload"}})],1):t._e(),t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{staticClass:"col-12",attrs:{variables:t.board.settings.variables},on:{add:function(t){return e.actionTopic+=t}}}):t._e()],1)],2)}))],2)],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},He=[],De=0,Pe=1,je={name:"SingleselectSchema",props:["widget","board"],data:function(){var t={label:"item",val:"",actionTopic:"topic/to/action",actionPayload:""},e={items:[],save:!0,mode:De,height:4,width:2,maxTopicsLength:1,minWidth:2,minHeight:4,isNeedTime:!0};return{defaultSettings:e,defaultItem:t,currentItem:Object.assign({},t),currentSettings:Object.assign({},e,this.widget.settings),modeOptions:[{label:"Default mode",value:De},{label:"Command mode",value:Pe}]}},methods:{addItem:function(){this.currentSettings.items.push(this.currentItem),this.currentItem=Object.assign({},this.defaultItem)},removeItem:function(t){this.$delete(this.currentSettings.items,t)},upItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t+1,0,e)},checkUniqueValue:function(t,e){var i=!0;return this.currentSettings.items.map((function(t){return t.val})).some((function(s,a){var n=s===t;return n&&(i=a===e),n})),i},validate:function(){return(this.currentSettings.mode===De||this.currentSettings.mode===Pe&&this.currentSettings.items.reduce((function(t,e){return t&&!!e.actionTopic}),!0))&&!!this.currentSettings.items.length&&this.currentSettings.items.reduce((function(t,e,i,s){return t[e.val]||(t[e.val]=0),t[e.val]++,i===s.length-1?Object.keys(t).reduce((function(e,i){return e?1===t[i]:e}),!0):t}),{})}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t,e){if(b()(t,e))return!1;this.$emit("validate",this.validate()),this.$emit("update",t)}}},components:{VariablesHelper:rt}},Re=je,We=(i("798c"),Object(nt["a"])(Re,ze,He,!1,null,null,null)),Ue=We.exports,Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[t.widget.topics.length&&t.widget.topics[0].split("/")?i("div",{staticClass:"q-mb-sm col-12"},[i("div",{staticClass:"q-mb-sm text-grey-9"},[t._v("Group layer")]),t._l(t.widget.topics[0].split("/"),(function(e,s){return i("div",{key:""+s+e,staticClass:"q-mr-xs q-pa-xs rounded-borders cursor-pointer inline-block",class:{"bg-grey-9 text-white":t.currentSettings.groupLayout>=s,"text-grey-9 bg-grey-3":t.currentSettings.groupLayout<s},on:{click:function(e){return t.setGroupLayer(s)}}},[t._v("\n        "+t._s(e)+"\n      ")])}))],2):t._e(),t.widget.dataTopics[0]&&1===t.widget.dataTopics[0].payloadType?i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",label:"Widget`s name field",color:"grey-9"},model:{value:t.currentSettings.nameField,callback:function(e){t.$set(t.currentSettings,"nameField",e)},expression:"currentSettings.nameField"}}):t._e(),i("q-input",{staticClass:"col-12 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",label:"Multiplied widget render logic",color:"grey-9",hint:"You can use math logic to define what values to show in the widget. Example: `%value% > 1000` or `<%jsons-some-field%> != nill`, where %value% is a payload and <%jsons-some-field%> is a JSON field from your subscription."},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("div",{staticClass:"q-mb-sm col-12"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.typeOptions,"emit-value":"","map-options":"",label:"Widget multiplier type"},on:{input:function(e){t.currentSettings.widgetSettings={}}},model:{value:t.currentSettings.type,callback:function(e){t.$set(t.currentSettings,"type",e)},expression:"currentSettings.type"}})],1),i("div",{staticClass:"color-palette q-pa-sm rounded-borders q-mb-lg col-12"},[i("div",{staticClass:"text-grey-9 q-pb-sm color-palette__label"},[t._v("Widgets color")]),i("div",{staticClass:"row color-palette__wrapper"},t._l(t.colors,(function(e){return i("span",{key:e,staticClass:"q-mr-sm cursor-pointer color-palette__item",class:["bg-"+e],on:{click:function(i){return t.setColor(e)}}},[e===t.currentSettings.color?i("q-icon",{staticClass:"item__icon",attrs:{size:"1.4rem",name:"mdi-check",color:"white"}}):t._e()],1)})),0)]),i("div",{staticClass:"q-mt-sm col-12"},[i(t.currentSettings.type,{tag:"component",attrs:{widget:t.schemaWidget,board:t.board,integration:!0},on:{update:t.updateSettingsHandler,validate:t.validateSchemas}})],1)],1)])},Ye=[],Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-mt-xl"},[i("div",{staticClass:"row"},[i("q-card",{staticClass:"complex__items-editor row col-12 q-mb-xl",class:["bg-"+t.widget.color+"-1"]},[i("div",{staticClass:"items__top col-12 flex q-px-md q-py-xs",staticStyle:{"background-color":"rgba(255,255,255,0.5)"}},[t._l(t.currentSettings.items.filter((function(t){return"top"===t.position})),(function(e,s){return i("my-"+t.currentSettings.items[e.index].type,{key:"top"+s+e.index,tag:"component",staticClass:"complex__element cursor-pointer",attrs:{item:t.currentSettings.items[e.index],color:t.widget.color,selected:!!t.edited&&"top"===t.edited.position&&t.edited.indexByPosition===s},nativeOn:{click:function(e){return t.selectHandler("top",s)}}})})),i("add-menu",{staticClass:"q-ml-sm",attrs:{anchor:"bottom left",self:"top left"},on:{add:function(e){return t.addItem(e,"top")}}})],2),i("div",{staticClass:"items__left col-6 flex q-pa-sm"},[t._l(t.currentSettings.items.filter((function(t){return"left"===t.position})),(function(e,s){return i("my-"+t.currentSettings.items[e.index].type,{key:"left"+s+e.index,tag:"component",staticClass:"complex__element cursor-pointer",attrs:{item:t.currentSettings.items[e.index],color:t.widget.color,selected:!!t.edited&&"left"===t.edited.position&&t.edited.indexByPosition===s},nativeOn:{click:function(e){return t.selectHandler("left",s)}}})})),i("add-menu",{staticStyle:{width:"100%","min-height":"30px"},attrs:{anchor:"top middle",self:"bottom middle"},on:{add:function(e){return t.addItem(e,"left")}}})],2),i("div",{staticClass:"items__right col-6 q-pa-sm"},[t._l(t.currentSettings.items.filter((function(t){return"right"===t.position})),(function(e,s){return i("my-"+t.currentSettings.items[e.index].type,{key:"right"+s+e.index,tag:"component",staticClass:"complex__element text-center cursor-pointer",attrs:{item:t.currentSettings.items[e.index],color:t.widget.color,selected:!!t.edited&&"right"===t.edited.position&&t.edited.indexByPosition===s},nativeOn:{click:function(e){return t.selectHandler("right",s)}}})})),i("add-menu",{staticStyle:{width:"100%","min-height":"30px"},attrs:{anchor:"top middle",self:"bottom middle"},on:{add:function(e){return t.addItem(e,"right")}}})],2),i("div",{staticClass:"items__bottom col-12 flex q-px-md q-py-xs",staticStyle:{"background-color":"rgba(255,255,255,0.5)"}},[t._l(t.currentSettings.items.filter((function(t){return"bottom"===t.position})),(function(e,s){return i("my-"+t.currentSettings.items[e.index].type,{key:"bottom"+s+e.index,tag:"component",staticClass:"complex__element cursor-pointer",attrs:{item:t.currentSettings.items[e.index],color:t.widget.color,selected:!!t.edited&&"bottom"===t.edited.position&&t.edited.indexByPosition===s},nativeOn:{click:function(e){return t.selectHandler("bottom",s)}}})})),i("add-menu",{staticClass:"q-ml-sm",attrs:{anchor:"top right",self:"bottom middle"},on:{add:function(e){return t.addItem(e,"bottom")}}})],2)]),t.edited?i("div",{staticClass:"complex__items-wrapper col-12 relative-position q-mb-sm"},[i("q-expansion-item",{staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"header-class":["bg-grey-4"],"expand-icon":"mdi-settings","default-opened":""}},[i("template",{slot:"header"},[i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(t.editedItem.label?t.editedItem.label+" ["+t.editedItem.type+"]":t.editedItem.type))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(t.editedItem.index)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-mr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",autofocus:"",color:"grey-9",label:"Label"},model:{value:t.editedItem.label,callback:function(e){t.$set(t.editedItem,"label",e)},expression:"editedItem.label"}})],1),i("div",{staticClass:"col-6 q-mb-sm"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Path",placeholder:"item[0].value"},model:{value:t.editedItem.path,callback:function(e){t.$set(t.editedItem,"path",e)},expression:"editedItem.path"}})],1),"knob"===t.editedItem.type||"progress"===t.editedItem.type?i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Min value settings","header-class":["bg-"+(t.isValidMinValue(t.editedItem.index)?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Min value source","emit-value":"","map-options":"",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler(t.editedItem.index,"min")}},model:{value:t.editedItem.minValueMode,callback:function(e){t.$set(t.editedItem,"minValueMode",e)},expression:"editedItem.minValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.editedItem.minValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Min value"},model:{value:t.editedItem.minValue,callback:function(e){t.$set(t.editedItem,"minValue",t._n(e))},expression:"editedItem.minValue"}}):i("topic",{attrs:{label:"Min value",board:t.board},model:{value:t.editedItem.minValue,callback:function(e){t.$set(t.editedItem,"minValue",e)},expression:"editedItem.minValue"}})],1)])]):t._e(),"knob"===t.editedItem.type||"progress"===t.editedItem.type?i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Max value settings","header-class":["bg-"+(t.isValidMaxValue(t.editedItem.index)?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Max value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler(t.editedItem.index,"max")}},model:{value:t.editedItem.maxValueMode,callback:function(e){t.$set(t.editedItem,"maxValueMode",e)},expression:"editedItem.maxValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.editedItem.maxValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Max value"},model:{value:t.editedItem.maxValue,callback:function(e){t.$set(t.editedItem,"maxValue",t._n(e))},expression:"editedItem.maxValue"}}):i("topic",{attrs:{label:"Max value",board:t.board},model:{value:t.editedItem.maxValue,callback:function(e){t.$set(t.editedItem,"maxValue",e)},expression:"editedItem.maxValue"}})],1)])]):t._e(),"text"===t.editedItem.type?i("div",{staticClass:"row"},[i("q-input",{staticClass:"col-8 q-mb-sm q-pr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.editedItem.math,callback:function(e){t.$set(t.editedItem,"math",e)},expression:"editedItem.math"}}),i("q-select",{staticClass:"col-4 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.formatOptions,"emit-value":"","map-options":"",label:"Format value as"},model:{value:t.editedItem.valueFormat,callback:function(e){t.$set(t.editedItem,"valueFormat",e)},expression:"editedItem.valueFormat"}}),t.editedItem.valueFormat===t.constants.WIDGET_VALUE_FORMAT_DATE?i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Datetime format",placeholder:"DD/MM/YYYY HH:mm:ss.SSS"},model:{value:t.editedItem.dateFormat,callback:function(e){t.$set(t.editedItem,"dateFormat",e)},expression:"editedItem.dateFormat"}}):t._e(),i("div",{staticClass:"text-grey-7 q-mt-xs",staticStyle:{"font-size":"12px","line-height":"1"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")])],1):t._e()],1)],2)],1):t._e(),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Ke=[],Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-btn",{attrs:{dense:"",flat:"","icon-right":"mdi-plus",label:"add"}},[i("q-menu",{attrs:{anchor:t.anchor,self:t.self}},[i("q-list",{attrs:{dense:""}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(e){return t.$emit("add","text")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-short"}})],1),i("q-item-section",[t._v("Text")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.$emit("add","knob")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-circle-slice-5"}})],1),i("q-item-section",[t._v("Knob")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.$emit("add","progress")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-percent"}})],1),i("q-item-section",[t._v("Progress")])],1)],1)],1)],1)},Qe=[],Xe={name:"AddMenu",props:["anchor","self"]},ti=Xe,ei=Object(nt["a"])(ti,Ze,Qe,!1,null,null,null),ii=ei.exports,si=function(){var t,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"q-pa-xs",class:(t={"bg-grey-3":e.selected,"rounded-borders":e.selected},t["text-"+e.color+"-7"]=!0,t)},[s("div",{staticClass:"text-bold",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.item.label))]),s("div",{staticStyle:{"word-break":"break-all","font-size":".8rem"}},[e._v(e._s(e.computedValue))])])},ai=[],ni=i("7937"),oi=i("bd4c"),ri=i("0508"),li=i("5c2b"),ci=ni["c"].humanStorageSize,di=function(t){var e=Math.floor(t/864e5);t%=864e5;var i=Math.floor(t/36e5);t%=36e5;var s=Math.floor(t/6e4);t%=6e4;var a=Math.floor(t/1e3);return(e?e+" days ":"")+(i?i+" hours ":"")+(s?s+" minutes ":"")+(!a&&(e||i||s||a)?"":a+" seconds ")},ui=Object(ri["a"])(li["a"]);ui.import({equal:function(t,e){return t===e},unequal:function(t,e){return t!==e}},{override:!0});var mi={methods:{mathProcessing:function(t,e){if(e&&"N/A"!==t)try{var i=e.replace(/%value%/g,t);i=i.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s[\]']*)%>/gim,(function(e,i){var s=j()(t,i,void 0);return s=void 0===s?"nill":"string"===typeof s?'"'.concat(s,'"'):s,s})),i=i.replace(/nill/gim,'"nill"'),t=ui.evaluate(i)}catch(s){t=!1}return t},formatValue:function(t,e){if(t=this.mathProcessing(t,e.math),e.valueFormat)try{switch(e.valueFormat){case vt["s"]:break;case vt["o"]:t=ci(t);break;case vt["m"]:var i=e.dateFormat||"DD/MM/YYYY HH:mm:ss";t="N/A"!==t?oi["a"].formatDate(1e3*t,i):t;break;case vt["n"]:t="N/A"!==t?di(1e3*t):t}}catch(s){}return t}}},pi={name:"Text",props:["item","value","selected","color"],computed:{computedValue:function(){var t=this.formatValue(this.value,this.item);return"N/A"===t||void 0===t?"*novalue*":t}},mixins:[mi]},hi=pi,gi=Object(nt["a"])(hi,si,ai,!1,null,null,null),fi=gi.exports,vi=function(){var t,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"q-pa-xs",class:(t={"bg-grey-3":e.selected,"rounded-borders":e.selected},t["text-"+e.color+"-7"]=!0,t)},[s("q-knob",{staticClass:"q-ma-sm",attrs:{thickness:.1,size:"7rem",value:void 0===e.value?50:"N/A"===e.value?0:e.value,min:e.item.min,max:e.item.max,readonly:"","show-value":"",color:e.color+"-7","track-color":e.color+"-2"}},[s("div",{staticClass:"text-center",staticStyle:{"font-size":".8rem",width:"100%"}},[e._v(e._s(e.item.label))]),s("div",{staticClass:"text-center",staticStyle:{"font-size":".8rem",width:"100%"}},[e._v(e._s((void 0===e.value?"value":e.value)+"/"+(void 0===e.value?"max":e.item.max)))])])],1)},bi=[],yi={name:"Knob",props:["item","value","selected","color"]},xi=yi,Si=Object(nt["a"])(xi,vi,bi,!1,null,null,null),qi=Si.exports,_i=function(){var t,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"q-pa-xs",class:(t={"bg-grey-3":e.selected,"rounded-borders":e.selected},t["text-"+e.color+"-7"]=!0,t)},[s("div",[e._v(e._s(e.item.label))]),s("q-linear-progress",{staticStyle:{"min-width":"150px"},attrs:{value:e.percentage/100,color:e.color+"-7"}}),s("div",{staticStyle:{float:"right","font-size":".8rem"}},[e._v(e._s((void 0===e.value?"value":e.value)+"/"+(void 0===e.value?"max":e.item.max)))])],1)},wi=[],Ci={name:"Progress",props:["item","value","selected","color"],computed:{percentage:function(){return"undefined"===typeof this.value||null===this.value||"N/A"===this.value?0:100*(this.value-this.item.min)/(this.item.max-this.item.min)}}},ki=Ci,Ti=Object(nt["a"])(ki,_i,wi,!1,null,null,null),Vi=Ti.exports,$i={name:"ComplexSchema",props:["widget","board"],data:function(){var t={label:"item",type:"knob",path:"",position:"top",minValueMode:vt["i"],minValue:0,maxValueMode:vt["i"],maxValue:100},e={items:[],topics:[],height:8,width:4,maxTopicsLength:1,minWidth:2,minHeight:4,isNeedTime:!0};return{defaultSettings:e,constants:{WIDGET_VALUE_FORMAT_STRING:vt["s"],WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE:vt["o"],WIDGET_VALUE_FORMAT_DATE:vt["m"],WIDGET_VALUE_FORMAT_PRE:vt["r"],WIDGET_VALUE_FORMAT_MARKDOWN:vt["q"],WIDGET_VALUE_FORMAT_JSON:vt["p"],WIDGET_VALUE_FORMAT_DURATION:vt["n"]},defaultItem:t,currentItem:Object.assign({},t),currentSettings:Object.assign({},e,this.widget.settings),itemTypes:[{label:"Knob",value:"knob"},{label:"Progress",value:"progress"},{label:"Text",value:"text"}],rangeValueModeOptions:[{label:"Manual",value:vt["i"]},{label:"Broker",value:vt["j"]}],formatOptions:[{label:"String",value:vt["s"]},{label:"Human readable size, B",value:vt["o"]},{label:"Datetime, s",value:vt["m"]},{label:"Duration, s",value:vt["n"]},{label:"Preformated",value:vt["r"]},{label:"Markdown",value:vt["q"]},{label:"JSON",value:vt["p"]}],defaultTopic:{topicFilter:"",payloadType:0,payloadField:""},edited:null}},computed:{editedItem:function(){return this.edited?this.currentSettings.items[this.edited.index]:null}},methods:{selectHandler:function(t,e){var i=-1;this.currentSettings.items.reduce((function(s,a,n){return a.position===t&&(s++,s===e&&(i=n)),s}),-1),this.edited={position:t,indexByPosition:e,index:i}},addItem:function(t,e){var i=this.currentSettings.items.length;return this.currentItem.index=i,this.currentItem.type=t,this.currentItem.position=e,this.currentSettings.items.push(this.currentItem),this.selectHandler(e,this.currentSettings.items.filter((function(t){return t.position===e})).length-1),this.currentItem=Object.assign({},this.defaultItem),this.currentSettings.items.length-1},removeItem:function(t){this.edited=null,this.currentSettings.items.forEach((function(e){t<e.index&&e.index--})),this.$delete(this.currentSettings.items,t)},isValidMinValue:function(t){var e=this.currentSettings.items[t];return e.minValueMode===vt["i"]||e.minValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(e.minValue.topicFilter)&&e.maxValue.topicFilter!==e.minValue.topicFilter&&this.validateTopic(e.minValue.topicFilter)},isValidMaxValue:function(t){var e=this.currentSettings.items[t];return e.maxValueMode===vt["i"]||e.maxValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(e.maxValue.topicFilter)&&e.maxValue.topicFilter!==e.minValue.topicFilter&&this.validateTopic(e.maxValue.topicFilter)},changeRangeValueTypeHandler:function(t,e){var i=this.currentSettings.items[t];"min"===e?i.minValueMode?this.$set(i,"minValue",Object.assign({},this.defaultTopic)):this.$set(i,"minValue",0):"max"===e&&(i.maxValueMode?this.$set(i,"maxValue",Object.assign({},this.defaultTopic)):this.$set(i,"maxValue",100))},validate:function(){return this.currentSettings.items.length}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",t)}},"currentSettings.items":{deep:!0,handler:function(t){var e=t.reduce((function(t,e){return e.minValueMode===vt["j"]&&t.push(e.minValue),e.maxValueMode===vt["j"]&&t.push(e.maxValue),t}),[]);this.$set(this.currentSettings,"topics",e)}}},mixins:[tt],components:{Topic:St,AddMenu:ii,MyText:fi,MyKnob:qi,MyProgress:Vi}},Ii=$i,Mi=(i("c3d9"),Object(nt["a"])(Ii,Je,Ke,!1,null,null,null)),Oi=Mi.exports,Ei=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"map__items-wrapper col-12 relative-position q-mb-sm"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Items"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.name,attrs:{group:"map-items","header-class":["bg-"+(t.isitemValid(s)?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.items.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.name||"New item"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Name",autofocus:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Latitude settings","header-class":["bg-"+(t.isValidLatValue(s)?"grey-4":"red-2")]}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 q-pa-xs"},[i("topic",{attrs:{label:"Latitude value",board:t.board,config:{needSelectors:!0}},on:{input:t.updateTopics},model:{value:e.lat,callback:function(i){t.$set(e,"lat",i)},expression:"item.lat"}})],1)])]),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Longitude settings","header-class":["bg-"+(t.isValidLonValue(s)?"grey-4":"red-2")]}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 q-pa-xs"},[i("topic",{attrs:{label:"Longitude value",board:t.board,config:{needSelectors:!0}},on:{input:t.updateTopics},model:{value:e.lon,callback:function(i){t.$set(e,"lon",i)},expression:"item.lon"}})],1)])])],1)],2)}))],2)],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)])])},Bi=[],Fi={name:"MapLocationSchema",props:["widget","board"],data:function(){var t={topics:[],items:[],height:6,width:3,maxTopicsLength:0,minWidth:3,minHeight:6,isNeedTime:!0},e={topicFilter:"",payloadType:0,payloadField:""};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),defaultTopic:e,defaultItem:{name:"",lat:{topicFilter:"topic/to/lat",payloadType:0,payloadField:""},lon:{topicFilter:"topic/to/lon",payloadType:0,payloadField:""}}}},methods:{addItem:function(){this.currentSettings.items.push(F()(this.defaultItem))},removeItem:function(t){this.$delete(this.currentSettings.items,t)},upItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t+1,0,e)},updateTopics:function(){this.$set(this.currentSettings,"topics",this.currentSettings.items.reduce((function(t,e){return t.push(e.lat),t.push(e.lon),t}),[]))},isitemValid:function(t){var e=this.currentSettings.items[t];return!(this.currentSettings.items.filter((function(t){return t.name===e.name})).length>1)},isValidLatValue:function(t){var e=j()(this.currentSettings,"items[".concat(t,"].lat.topicFilter"),"#/");return!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(e)&&this.validateTopic(e)},isValidLonValue:function(t){var e=j()(this.currentSettings,"items[".concat(t,"].lon.topicFilter"),"#/");return!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(e)&&this.validateTopic(e)},validate:function(){var t=this;return this.currentSettings.items.reduce((function(e,i,s){return e=e&&t.isitemValid(s),e=e&&t.isValidLatValue(s),e=e&&t.isValidLonValue(s),e}),!0)}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],components:{Topic:St},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}}}},Ni=Fi,Ai=(i("d540"),Object(nt["a"])(Ni,Ei,Bi,!1,null,null,null)),Li=Ai.exports,zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"map__items-wrapper col-12 relative-position q-mb-sm"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Items"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.name,attrs:{group:"map-items","header-class":["bg-"+(t.isitemValid(s)?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.items.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.name||"New item"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Name",autofocus:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Route settings","header-class":["bg-"+(t.isValidRouteValue(s)?"grey-4":"red-2")]}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 q-pa-xs"},[i("topic",{attrs:{label:"Route value",board:t.board,config:{needSelectors:!0}},on:{input:t.updateTopics},model:{value:e.route,callback:function(i){t.$set(e,"route",i)},expression:"item.route"}})],1)])])],1)],2)}))],2)],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)])])},Hi=[],Di={name:"MapRouteSchema",props:["widget","board"],data:function(){var t={topics:[],items:[],height:6,width:3,maxTopicsLength:0,minWidth:3,minHeight:6,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),defaultTopic:{topicFilter:"",payloadType:0,payloadField:""},defaultItem:{name:"",route:{topicFilter:"topic/to/route",payloadType:0,payloadField:""}}}},methods:{addItem:function(){this.currentSettings.items.push(F()(this.defaultItem))},removeItem:function(t){this.$delete(this.currentSettings.items,t)},upItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t+1,0,e)},updateTopics:function(){this.$set(this.currentSettings,"topics",this.currentSettings.items.reduce((function(t,e){return t.push(e.route),t}),[]))},isitemValid:function(t){var e=this.currentSettings.items[t];return!(this.currentSettings.items.filter((function(t){return t.name===e.name})).length>1)},isValidRouteValue:function(t){var e=j()(this.currentSettings,"items[".concat(t,"].route.topicFilter"),"#/");return!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(e)&&this.validateTopic(e)},validate:function(){var t=this;return this.currentSettings.items.reduce((function(e,i,s){return e=e&&t.isitemValid(s),e=e&&t.isValidRouteValue(s),e}),!0)}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],components:{Topic:St},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}}}},Pi=Di,ji=(i("e36e"),Object(nt["a"])(Pi,zi,Hi,!1,null,null,null)),Ri=ji.exports,Wi={name:"MultiplierSchema",props:["widget","board"],data:function(){var t={type:"",groupLayout:0,widgetSettings:{},topics:[],nameField:"",math:"",height:8,width:5,maxTopicsLength:1,minWidth:1,minHeight:2,color:"grey"};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),typeOptions:[{label:"Toggle",value:"switcher"},{label:"Text",value:"informer"},{label:"Radial gauge",value:"radial"},{label:"Linear gauge",value:"linear"},{label:"Radio button",value:"singleselect"},{label:"Complex",value:"complex"},{label:"Location",value:"map-location"},{label:"Route",value:"map-route"}],colors:["grey","red","green","orange","blue","light-blue","purple","deep-orange","cyan","brown","blue-grey"]}},computed:{schemaWidget:function(){return this.updateTopics(),{name:"Multiplier",parentType:this.widget.type,color:this.currentSettings.color,type:this.currentSettings.type,topics:[],dataTopics:this.widget.dataTopics,settings:this.currentSettings.widgetSettings,status:vt["k"]}}},created:function(){this.$emit("update",this.currentSettings)},methods:{updateTopics:function(){this.$set(this.currentSettings,"topics",this.currentSettings.widgetSettings.topics)},updateSettingsHandler:function(t){J["default"].set(this.currentSettings,"widgetSettings",{}),J["default"].set(this.currentSettings,"widgetSettings",t)},setColor:function(t){J["default"].set(this.currentSettings,"color",t)},validateSchemas:function(t){this.$emit("validate",t)},setGroupLayer:function(t){this.$set(this.currentSettings,"groupLayout",t)}},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("update",t)}}},mixins:[tt],components:{Switcher:Yt,Informer:te,Radial:we,Linear:Ie,Singleselect:Ue,Complex:Oi,MapLocation:Li,MapRoute:Ri}},Ui=Wi,Gi=Object(nt["a"])(Ui,Ge,Ye,!1,null,null,null),Yi=Gi.exports,Ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("q-toggle",{staticClass:"q-mt-sm col-12",attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}}),i("q-expansion-item",{staticClass:"col-12 q-mt-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Min value settings","header-class":["bg-"+(t.isValidMinValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Min value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("min")}},model:{value:t.currentSettings.minValueMode,callback:function(e){t.$set(t.currentSettings,"minValueMode",e)},expression:"currentSettings.minValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.minValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Min value"},model:{value:t.currentSettings.minValue,callback:function(e){t.$set(t.currentSettings,"minValue",t._n(e))},expression:"currentSettings.minValue"}}):i("topic",{attrs:{label:"Min value",board:t.board},model:{value:t.minValue,callback:function(e){t.minValue=e},expression:"minValue"}})],1)])]),i("q-expansion-item",{staticClass:"col-12 q-my-sm",staticStyle:{border:"solid #e0e0e0 1px"},attrs:{"default-opened":"",label:"Max value settings","header-class":["bg-"+(t.isValidMaxValue?"grey-4":"red-2")]}},[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-5 q-mb-sm"},[i("q-select",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9","emit-value":"","map-options":"",label:"Max value source",options:t.rangeValueModeOptions},on:{input:function(e){return t.changeRangeValueTypeHandler("max")}},model:{value:t.currentSettings.maxValueMode,callback:function(e){t.$set(t.currentSettings,"maxValueMode",e)},expression:"currentSettings.maxValueMode"}})],1),i("div",{staticClass:"col-12"},[0===t.currentSettings.maxValueMode?i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Max value"},model:{value:t.currentSettings.maxValue,callback:function(e){t.$set(t.currentSettings,"maxValue",t._n(e))},expression:"currentSettings.maxValue"}}):i("topic",{attrs:{label:"Max value",board:t.board},model:{value:t.maxValue,callback:function(e){t.maxValue=e},expression:"maxValue"}})],1)])]),i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",type:"number",color:"grey-9",label:"Step"},model:{value:t.currentSettings.step,callback:function(e){t.$set(t.currentSettings,"step",t._n(e))},expression:"currentSettings.step"}})],1),i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Units"},model:{value:t.currentSettings.units,callback:function(e){t.$set(t.currentSettings,"units",e)},expression:"currentSettings.units"}})],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Ki=[],Zi={name:"SliderSchema",props:["widget","board"],data:function(){var t={minValue:0,topics:[],minValueMode:vt["i"],maxValue:250,maxValueMode:vt["i"],units:"",step:5,save:!0,height:2,width:3,maxTopicsLength:1,minWidth:3,minHeight:2,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),rangeValueModeOptions:[{label:"Manual",value:vt["i"]},{label:"Broker",value:vt["j"]}],defaultTopic:{topicFilter:"",payloadType:0,payloadField:""}}},computed:{minValue:{get:function(){return this.currentSettings.minValueMode===vt["i"]?this.currentSettings.minValue:this.currentSettings.topics[0]},set:function(t){J["default"].set(this.currentSettings.topics,0,t)}},maxValue:{get:function(){return this.currentSettings.maxValueMode===vt["i"]?this.currentSettings.maxValue:this.currentSettings.minValueMode===vt["i"]?this.currentSettings.topics[0]:this.currentSettings.topics[1]},set:function(t){this.currentSettings.minValueMode===vt["i"]?J["default"].set(this.currentSettings.topics,0,t):J["default"].set(this.currentSettings.topics,1,t)}},isValidMinValue:function(){return this.currentSettings.minValueMode===vt["i"]||this.currentSettings.minValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.minValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.minValue.topicFilter)},isValidMaxValue:function(){return this.currentSettings.maxValueMode===vt["i"]||this.currentSettings.maxValueMode===vt["j"]&&!this.widget.dataTopics.map((function(t){return t.topicFilter})).includes(this.maxValue.topicFilter)&&this.maxValue.topicFilter!==this.minValue.topicFilter&&this.validateTopic(this.maxValue.topicFilter)}},methods:{changeRangeValueTypeHandler:function(t){var e=[];this.currentSettings.minValueMode===vt["j"]&&("max"===t?e.push(this.currentSettings.topics[0]):e.push(Object.assign({},this.defaultTopic))),this.currentSettings.maxValueMode===vt["j"]&&("min"===t?this.currentSettings.minValueMode===vt["j"]?e.push(this.currentSettings.topics[0]):e.push(this.currentSettings.topics[1]):e.push(Object.assign({},this.defaultTopic))),J["default"].set(this.currentSettings,"topics",e)},validate:function(){return this.isValidMinValue&&this.isValidMaxValue}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],components:{Topic:St},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}}}},Qi=Zi,Xi=Object(nt["a"])(Qi,Ji,Ki,!1,null,null,null),ts=Xi.exports,es=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 q-mb-sm"},[i("q-btn-toggle",{attrs:{rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",flat:"",options:t.modeOptions},model:{value:t.currentSettings.mode,callback:function(e){t.$set(t.currentSettings,"mode",e)},expression:"currentSettings.mode"}})],1),i("div",{staticClass:"col-12 q-mb-sm"},[i("q-select",{attrs:{dense:"",outlined:"","hide-bottom-space":"",color:"grey-9",label:"Format",options:t.formatOptions,"emit-value":"","map-options":""},model:{value:t.currentSettings.format,callback:function(e){t.$set(t.currentSettings,"format",e)},expression:"currentSettings.format"}})],1),i("div",{staticClass:"col-12 q-mb-sm"},[i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",error:!t.isValueTemplateValide,hint:t.valueTemplateHelper,type:"textarea",color:"grey-9",label:"Value template"},model:{value:t.currentSettings.valueTemplate,callback:function(e){t.$set(t.currentSettings,"valueTemplate",e)},expression:"currentSettings.valueTemplate"}})],1),t.widget.dataTopics[0]&&t.widget.dataTopics[0].payloadType?i("div",{staticClass:"col-12 q-mb-sm"},[i("q-input",{attrs:{outlined:"","hide-bottom-space":"",dense:"",type:"textarea","input-style":"resize: none;",color:"grey-9",hint:"You can set publish template. %value% is variable of your color.",label:"Publish template"},model:{value:t.currentSettings.publishTemplate,callback:function(e){t.$set(t.currentSettings,"publishTemplate",e)},expression:"currentSettings.publishTemplate"}})],1):t._e(),i("q-toggle",{staticClass:"q-mt-sm col-12",attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}}),i("q-toggle",{staticClass:"q-mt-sm col-12",attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)])},is=[],ss="hexa",as="rgba",ns="hsva",os=0,rs=1,ls={name:"ColorSchema",props:["widget","board"],data:function(){var t={publishTemplate:"",valueTemplate:"",format:ss,mode:os,save:!0,width:2,minWidth:2,height:6,minHeight:6,maxTopicsLength:1,isNeedTime:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings),modeOptions:[{label:"Simple",value:os},{label:"Advanced",value:rs}],formatOptions:[{label:"HEX",value:ss},{label:"RGB",value:as},{label:"HSV",value:ns}]}},computed:{valueTemplateHelper:function(){var t="You can set a template of publish string. Variables to use in this case: ";switch(this.currentSettings.format){case ss:t+="%hex%.";break;case as:t+="%r%, %g%, %b%, %a%.";break;case ns:t+="%h%, %s%, %v%, %a%.";break}return t},isValueTemplateValide:function(){if(!this.currentSettings.valueTemplate)return!0;var t=this.currentSettings.valueTemplate.match(/%[hex|r|g|b|h|s|v|a]{1,3}%/g);if(!t)return!1;t=t.map((function(t){return t.slice(1,-1)}));var e=!1;return this.currentSettings.format===ss?e=t.includes("hex")&&1===t.length:this.currentSettings.format===as?e=t.reduce((function(t,e){return t&&["r","g","b","a"].includes(e)}),!0)&&t.length>2&&t.length<5:this.currentSettings.format===ns&&(e=t.reduce((function(t,e){return t&&["h","s","v","a"].includes(e)}),!0)&&t.length>2&&t.length<5),e}},methods:{validate:function(){return this.isValueTemplateValide}},created:function(){this.$emit("update",this.currentSettings)},watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",this.currentSettings)}},"widget.dataTopics.0.payloadType":function(t){t||(this.currentSettings.publishTemplate="")}}},cs=ls,ds=Object(nt["a"])(cs,es,is,!1,null,null,null),us=ds.exports,ms=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 q-mb-sm"},[i("q-input",{staticClass:"q-mr-xs icon-input",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Default icon",error:!t.currentSettings.defaultIcon},model:{value:t.currentSettings.defaultIcon,callback:function(e){t.$set(t.currentSettings,"defaultIcon",e)},expression:"currentSettings.defaultIcon"}},[i("q-icon",{staticStyle:{position:"absolute",right:"0",bottom:"7px"},attrs:{slot:"after",name:"mdi-"+t.currentSettings.defaultIcon,size:"1.5rem"},slot:"after"})],1)],1),i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%"},model:{value:t.currentSettings.math,callback:function(e){t.$set(t.currentSettings,"math",e)},expression:"currentSettings.math"}}),i("div",{staticClass:"text-grey-9",staticStyle:{"font-size":".8rem"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),i("div",{staticClass:"status-indicator__items-wrapper col-12 relative-position q-mb-sm q-mt-lg"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.items.length}},[t._v("\n          Items"+t._s(t.currentSettings.items.length?"":" are empty")+"\n          "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",flat:"",label:"ADD",icon:"mdi-plus"},on:{click:t.addItem}})],1),t._l(t.currentSettings.items,(function(e,s){return i("q-expansion-item",{key:""+s+e.value,attrs:{group:"status-indicator-items","header-class":["bg-"+(t.checkUniqueItem(e,s)&&e.actionTopic?"grey-4":"red-2")],"expand-icon":"mdi-settings",value:s===t.currentSettings.items.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.items.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(t.getItemLabel(e,s)))])]),e.default?t._e():i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[e.default?i("div",{staticClass:"col-12 text-grey-8 q-mt-sm",staticStyle:{"font-size":".9rem"}},[t._v("\n              Default item. Used if there is no data in the source or data doesn't match the specified items.\n            ")]):t._e(),i("div",{staticClass:"q-mb-sm",class:["col-"+(e.default?"12":"6")]},[i("q-input",{staticClass:"q-mr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",autofocus:"",color:"grey-9",label:"Label"},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"item.label"}})],1),e.default?t._e():i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Value",error:!t.checkUniqueItem(e,s)},model:{value:e.val,callback:function(i){t.$set(e,"val",i)},expression:"item.val"}})],1),i("div",{staticClass:"col-10 q-mb-sm"},[i("q-input",{staticClass:"q-mr-xs icon-input",style:{color:e.color},attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Icon"},model:{value:e.icon,callback:function(i){t.$set(e,"icon",i)},expression:"item.icon"}},[i("q-icon",{style:{color:e.color},attrs:{slot:"append",name:"mdi-"+(e.icon||t.currentSettings.defaultIcon),size:"1.5rem"},slot:"append"})],1)],1),i("div",{staticClass:"col-2 relative-position"},[i("q-btn",{staticStyle:{position:"absolute",bottom:"18px",right:"0"},style:{backgroundColor:e.color},attrs:{flat:""}},[i("q-menu",{staticClass:"q-pa-sm",attrs:{anchor:"top right",self:"bottom right"}},[i("q-color",{attrs:{"format-model":"hex"},model:{value:e.color,callback:function(i){t.$set(e,"color",i)},expression:"item.color"}})],1)],1)],1),e.default?i("div",{staticClass:"col-12 text-grey-6 q-mt-sm",staticStyle:{"font-size":".8rem"}},[t._v("\n              You can find more icons on "),i("a",{attrs:{href:"https://materialdesignicons.com/",target:"blank"}},[t._v("MDI")])]):t._e(),e.default?t._e():i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression",placeholder:"%value%",error:!t.checkUniqueItem(e,s)},model:{value:e.math,callback:function(i){t.$set(e,"math",i)},expression:"item.math"}}),e.default?t._e():i("div",{staticClass:"text-grey-9",staticStyle:{"font-size":".8rem"}},[t._v("You can use math expressions to calculate the final value. Example: (%value% * 1000) / 1024, where %value% is the payload from your subscription.")]),1===t.currentSettings.mode?i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-mr-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Action topic",error:!e.actionTopic},model:{value:e.actionTopic,callback:function(i){t.$set(e,"actionTopic",i)},expression:"item.actionTopic"}})],1):t._e(),1===t.currentSettings.mode?i("div",{staticClass:"col-6"},[i("q-input",{staticClass:"q-ml-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Action payload"},model:{value:e.actionPayload,callback:function(i){t.$set(e,"actionPayload",i)},expression:"item.actionPayload"}})],1):t._e()],1)],2)}))],2)],1),i("q-input",{staticClass:"col-12",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",type:"number",label:"Reset timeout, s"},model:{value:t.currentSettings.resetTimeout,callback:function(e){t.$set(t.currentSettings,"resetTimeout",t._n(e))},expression:"currentSettings.resetTimeout"}}),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},ps=[],hs=0,gs=1,fs={name:"StatusIndicatorSchema",props:["widget","board"],data:function(){var t={label:"item",icon:"",color:"#000",val:"",actionTopic:"topic/to/action",actionPayload:""},e={items:[{label:"default",icon:"",color:"#000",math:"",val:"",default:!0,actionTopic:"topic/to/action",actionPayload:""}],save:!0,mode:hs,math:"",defaultIcon:"circle",resetTimeout:0,height:2,width:1,maxTopicsLength:1,minWidth:1,minHeight:2,isNeedTime:!0};return{defaultSettings:e,defaultItem:t,currentItem:Object.assign({},t),currentSettings:Object.assign({},e,this.widget.settings),modeOptions:[{label:"Default mode",value:hs},{label:"Command mode",value:gs}]}},methods:{addItem:function(){this.currentSettings.items.push(this.currentItem),this.currentItem=Object.assign({},this.defaultItem)},removeItem:function(t){this.$delete(this.currentSettings.items,t)},upItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.items.splice(t,1)[0];this.currentSettings.items.splice(t+1,0,e)},checkUniqueItem:function(t,e){var i=!0;return this.currentSettings.items.some((function(s,a){var n=s.val===t.val,o=s.math===t.math;return n&&o&&(i=a===e),n})),i},validate:function(){return!!this.currentSettings.defaultIcon&&(this.currentSettings.mode===hs||this.currentSettings.mode===gs&&this.currentSettings.items.reduce((function(t,e){return t&&!!e.actionTopic}),!0))&&!!this.currentSettings.items.length&&this.currentSettings.items.reduce((function(t,e,i,s){var a="".concat(e.val," - ").concat(e.math);return t[a]||(t[a]=0),t[a]++,i===s.length-1?Object.keys(t).reduce((function(e,i){return e?1===t[i]:e}),!0):t}),{})},getItemLabel:function(t,e){var i="";return t.label?(i+="".concat(t.label," "),t.default||(i+="[".concat(t.val||"N/A","]"))):i="".concat(t.val||"item ".concat(e+1)),i}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",t)}}}},vs=fs,bs=(i("d9c4"),Object(nt["a"])(vs,ms,ps,!1,null,null,null)),ys=bs.exports,xs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("q-toggle",{staticClass:"q-mt-sm",attrs:{color:"grey-9",label:"Save last status on server (retained message)"},model:{value:t.currentSettings.save,callback:function(e){t.$set(t.currentSettings,"save",e)},expression:"currentSettings.save"}}),i("div",{staticClass:"col-12 q-mt-sm"},[i("q-input",{staticClass:"q-mr-sm",attrs:{dense:"",outlined:"","hide-bottom-space":"",color:"grey-9",label:"Topic"},on:{input:function(e){t.currentSettings.topics[0].topicFilter=t.currentSettings.topics[0].topicTemplate}},model:{value:t.currentSettings.topics[0].topicTemplate,callback:function(e){t.$set(t.currentSettings.topics[0],"topicTemplate",e)},expression:"currentSettings.topics[0].topicTemplate"}}),t.board.settings.variables&&t.board.settings.variables.length?i("variables-helper",{attrs:{variables:t.board.settings.variables},on:{add:function(e){return t.currentSettings.topics[0].topicFilter+=e}}}):t._e()],1),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Ss=[],qs={name:"TextSenderSchema",props:["widget","board"],data:function(){var t={height:2,topics:[{topicFilter:"topic/to/data",payloadType:0,payloadField:""}],width:2,minWidth:1,minHeight:2,maxTopicsLength:0,isNeedTime:!0,save:!0};return{defaultSettings:t,currentSettings:Object.assign({},t,this.widget.settings)}},created:function(){this.$emit("update",this.currentSettings)},watch:{currentSettings:{deep:!0,handler:function(t){this.$emit("update",t)}}},components:{VariablesHelper:rt}},_s=qs,ws=Object(nt["a"])(_s,xs,Ss,!1,null,null,null),Cs=ws.exports,ks=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row q-mt-lg"},[i("div",{staticClass:"calculator__items-wrapper col-12 relative-position q-mb-sm"},[i("q-list",{attrs:{bordered:""}},[i("q-item-label",{staticClass:"q-py-md q-px-sm list__header",class:{"text-red-6":!t.currentSettings.variables.length}},[t._v("\n          Variables"+t._s(t.currentSettings.variables.length?"":" are empty")+"\n           "),i("q-btn",{staticClass:"absolute-right",attrs:{color:"grey-9",icon:"mdi-plus",flat:"",label:"ADD"},on:{click:t.addItem}})],1),t._l(t.currentSettings.variables,(function(e,s){return i("q-expansion-item",{key:""+s,attrs:{group:"variables","header-class":[t.isitemValid(s)?"bg-purple-2":"bg-red-2"],"expand-icon":"mdi-settings",value:s===t.currentSettings.variables.length-1}},[i("template",{slot:"header"},[i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"col-1",attrs:{disabled:0===s,round:"",dense:"",flat:"",icon:"mdi-arrow-up"},on:{click:function(e){return e.stopPropagation(),t.upItem(s)}}}),i("q-btn",{staticClass:"col-1",attrs:{disabled:s===t.currentSettings.variables.length-1,round:"",dense:"",flat:"",icon:"mdi-arrow-down"},on:{click:function(e){return e.stopPropagation(),t.downItem(s)}}})],1)]),i("q-item-section",[i("span",{staticClass:"ellipsis full-width"},[t._v(t._s(e.name||"New item"))])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{flat:"",color:"red-6",round:"",dense:"",icon:"mdi-delete"},on:{click:function(e){return t.removeItem(s)}}})],1)],1),i("div",{staticClass:"row q-pa-sm"},[i("q-input",{staticClass:"col-12 q-mb-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Name",autofocus:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),i("q-input",{staticClass:"col-8 q-pr-xs q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Math expression"},model:{value:e.math,callback:function(i){t.$set(e,"math",i)},expression:"item.math"}}),i("q-select",{staticClass:"col-4 q-mb-sm",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",options:t.formatOptions,"emit-value":"","map-options":"",label:"Format value as"},model:{value:e.valueFormat,callback:function(i){t.$set(e,"valueFormat",i)},expression:"item.valueFormat"}}),e.valueFormat===t.constants.WIDGET_VALUE_FORMAT_DATE?i("q-input",{staticClass:"col-12 q-mb-xs",attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Datetime format",placeholder:"DD/MM/YYYY HH:mm:ss.SSS"},model:{value:e.dateFormat,callback:function(i){t.$set(e,"dateFormat",i)},expression:"item.dateFormat"}}):t._e(),i("div",{staticClass:"col-12 text-grey-7 q-px-sm q-mb-sm",staticStyle:{"font-size":"12px","line-height":"1.2"}},[t._v("\n              You can use math expressions to calculate the final value. Example:\n              (%topic[1]% - %variable[var1]% * 1000) / 1024, where %topic1% is the payload from your subscription by first topic (if need field from JSON %topic[1]($.somefield)%), %variable[var1]% is calculated value of variable with name var1.\n            ")])],1)],2)}))],2)],1),i("q-input",{staticClass:"col-8 q-mb-sm full-width",attrs:{type:"textarea",outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",label:"Template"},model:{value:t.currentSettings.template,callback:function(e){t.$set(t.currentSettings,"template",e)},expression:"currentSettings.template"}}),i("div",{staticClass:"col-12 text-grey-7 q-px-sm q-mb-sm",staticStyle:{"font-size":"12px","line-height":"1.2"}},[t._v("\n      Create final message html template. Example:\n      By topic with value %topic[1]% data is %variable[var1]%, where %topic1% is the payload from your subscription by first topic (if need field from JSON %topic[1]($.somefield)%),\n      %variable[var1]% is calculated value of variable with name var1.\n    ")]),i("div",{staticClass:"q-mt-sm col-12"},[i("q-toggle",{attrs:{color:"grey-9",label:"Show last update time"},model:{value:t.currentSettings.isNeedTime,callback:function(e){t.$set(t.currentSettings,"isNeedTime",e)},expression:"currentSettings.isNeedTime"}})],1)],1)])},Ts=[],Vs={name:"CalculatorSchema",props:["widget","board"],data:function(){var t={variables:[],height:2,width:2,minWidth:1,minHeight:2,template:"",isNeedTime:!0},e={name:"",math:"",valueFormat:0};return{defaultSettings:t,defaultVar:e,constants:{WIDGET_VALUE_FORMAT_STRING:vt["s"],WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE:vt["o"],WIDGET_VALUE_FORMAT_DATE:vt["m"],WIDGET_VALUE_FORMAT_PRE:vt["r"],WIDGET_VALUE_FORMAT_MARKDOWN:vt["q"],WIDGET_VALUE_FORMAT_JSON:vt["p"],WIDGET_VALUE_FORMAT_DURATION:vt["n"]},currentSettings:Object.assign({},t,this.widget.settings),formatOptions:[{label:"String",value:vt["s"]},{label:"Human readable size, B",value:vt["o"]},{label:"Datetime, s",value:vt["m"]},{label:"Duration, s",value:vt["n"]},{label:"Preformated",value:vt["r"]},{label:"Markdown",value:vt["q"]},{label:"JSON",value:vt["p"]}]}},methods:{addItem:function(){this.currentSettings.variables.push(F()(this.defaultVar))},removeItem:function(t){this.$delete(this.currentSettings.variables,t)},upItem:function(t){var e=this.currentSettings.variables.splice(t,1)[0];this.currentSettings.variables.splice(t-1,0,e)},downItem:function(t){var e=this.currentSettings.variables.splice(t,1)[0];this.currentSettings.variables.splice(t+1,0,e)},isitemValid:function(t){var e=this.currentSettings.variables[t];return!(this.currentSettings.variables.filter((function(t){return t.name===e.name})).length>1)},validate:function(){var t=this;return this.currentSettings.variables.reduce((function(e,i,s){return e=e&&t.isitemValid(s),e}),!0)}},created:function(){this.$emit("update",this.currentSettings)},mixins:[tt],watch:{widget:{deep:!0,handler:function(t,e){if(this.$emit("validate",this.validate()),b()(t,e))return!1;this.$emit("update",t)}}}},$s=Vs,Is=(i("fc6a"),Object(nt["a"])($s,ks,Ts,!1,null,null,null)),Ms=Is.exports,Os={name:"Settings",props:["value","settings","mode","board"],data:function(){var t,e={name:"New widget",color:"grey",type:"informer",topics:[],dataTopics:[],settings:{},status:vt["k"]};return{defaultSettings:e,currentSettings:this.settings?z()({},e,this.settings):z()({},e),typeOptions:[{label:"Text",value:"informer",rightIcon:"mdi-format-color-text"},{label:"Multi text",value:"multi-informer",rightIcon:"mdi-card-text-outline"},{label:"Static text",value:"static-informer",rightIcon:"mdi-format-text"},{label:"Toggle",value:"switcher",rightIcon:"mdi-toggle-switch-outline"},{label:"Button",value:"clicker",rightIcon:"mdi-send"},{label:"Textarea",value:"text-sender",rightIcon:"mdi-text-subject"},{label:"Slider",value:"slider",rightIcon:"mdi-ray-vertex"},{label:"Color",value:"color",rightIcon:"mdi-palette"},{label:"Map (Location)",value:"map-location",rightIcon:"mdi-map-marker-outline"},{label:"Map (Route)",value:"map-route",rightIcon:"mdi-map-marker-distance"},{label:"Status Indicator",value:"status-indicator",rightIcon:"mdi-lightbulb-outline"},{label:"Formula",value:"calculator",rightIcon:"mdi-calculator"},{label:"Radial gauge",value:"radial",rightIcon:"mdi-gauge"},{label:"Linear gauge",value:"linear",rightIcon:"mdi-oil-temperature"},{label:"Iframe",value:"frame",rightIcon:"mdi-window-maximize"},{label:"Radio button",value:"singleselect",rightIcon:"mdi-radiobox-marked"},{label:"Multiplier",value:"multiplier",rightIcon:"mdi-monitor-multiple"},{label:"Complex",value:"complex",rightIcon:"mdi-ballot-outline"}],typeElementWidth:0,colors:["grey","red","green","orange","blue","light-blue","purple","deep-orange","cyan","brown","blue-grey"],isValideSchema:!0,defaultTopic:{topicTemplate:"",topicFilter:"",payloadType:0,payloadField:"",payloadNameField:""},saveButtonLabels:(t={},f()(t,vt["d"],"Save"),f()(t,vt["f"],"Update"),f()(t,vt["e"],"Clone"),t)}},computed:{validateCurrentSettings:function(){var t=this;return!!this.isValidCurrentTopics&&this.currentSettings.topics.every((function(e){return t.validateTopic(e)}))},status:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},isValidCurrentTopics:function(){var t=this;return(!!this.currentSettings.dataTopics.length||0===this.currentSettings.settings.maxTopicsLength)&&this.currentSettings.dataTopics.every((function(e){return t.validateTopic(e.topicFilter)}))&&this.currentSettings.dataTopics.every((function(e){return 1===t.currentSettings.dataTopics.filter((function(t){return t.topicFilter===e.topicFilter})).length}))&&(void 0===this.currentSettings.settings.maxTopicsLength||void 0!==this.currentSettings.settings.maxTopicsLength&&this.currentSettings.settings.maxTopicsLength===this.currentSettings.dataTopics.length)},topicsHighlight:function(){var t=this;return this.currentSettings.dataTopics.reduce((function(e,i,s){return t.validateTopic(i.topicFilter)&&t.checkUniqueTopic(i.topicFilter,s)?e[s]="grey-4":e[s]="red-2",e}),[])}},methods:{saveSettingsHandler:function(){this.$emit("save",this.currentSettings),this.closeHandler()},closeHandler:function(){var t=this;this.$emit("input",!1),this.$emit("hide"),this.$nextTick((function(){t.currentSettings=z()({},t.defaultSettings)}))},typeChangeHandler:function(t){this.currentSettings.type!==t&&(this.currentSettings.settings={},this.currentSettings.dataTopics=[]),this.$set(this.currentSettings,"type",t)},setColor:function(t){J["default"].set(this.currentSettings,"color",t)},validateSchemas:function(t){this.isValideSchema=t},addTopicHandler:function(){this.currentSettings.dataTopics.push(Object.assign({},this.defaultTopic))},removeTopicHandler:function(t){J["default"].delete(this.currentSettings.dataTopics,t)},checkUniqueTopic:function(t,e){var i=!0;return this.currentSettings.dataTopics.map((function(t){return t.topicFilter})).some((function(s,a){var n=s===t;return n&&(i=a===e),n})),i},updateSettingsHandler:function(t){J["default"].set(this.currentSettings,"settings",t)},generateTopics:function(){var t=this.currentSettings.dataTopics.map((function(t){return t.topicFilter}));return this.currentSettings.settings.topics&&(t=D()([].concat(d()(t),d()(this.currentSettings.settings.topics.map((function(t){return t.topicFilter})))))),t},onResize:function(t){var e=t.width;this.typeElementWidth=e}},watch:{settings:function(t){this.currentSettings=z()({},this.defaultSettings,t)},"currentSettings.dataTopics":function(){this.currentSettings.topics=this.generateTopics()},"currentSettings.settings.topics":{deep:!0,handler:function(){this.currentSettings.topics=this.generateTopics()}}},mixins:[tt],components:{Topic:St,Switcher:Yt,Informer:te,Clicker:be,Radial:we,Linear:Ie,Frame:Le,Singleselect:Ue,Multiplier:Yi,Complex:Oi,StaticInformer:oe,MultiInformer:me,Slider:ts,Color:us,MapLocation:Li,MapRoute:Ri,StatusIndicator:ys,TextSender:Cs,Calculator:Ms}},Es=Os,Bs=(i("9296"),Object(nt["a"])(Es,At,Lt,!1,null,null,null)),Fs=Bs.exports,Ns=i("7be8"),As=i.n(Ns),Ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.actionHandler(e)}}},[i("div",{class:["bg-"+(null!==t.currentValue?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("q-icon",{class:[null===t.currentValue?"disabled":t.actionTopic?"cursor-pointer":""],attrs:{size:"3rem",color:null===t.item.currentValue?"grey-4":t.currentValue?t.item.color+"-7":"grey-6",name:t.currentValue?"mdi-"+(t.item.settings.trueIcon||"toggle-switch-outline"):"mdi-"+(t.item.settings.falseIcon||"toggle-switch-off-outline")}})],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__switcher q-pa-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-pa-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("q-icon",{class:[null===t.currentValue?"disabled":t.isActiveWidget?"cursor-pointer":""],staticStyle:{width:"100%",height:"100%"},attrs:{size:"3.8rem",color:null===t.item.currentValue?"grey-4":t.currentValue?t.item.color+"-7":"grey-6",name:t.currentValue?"mdi-"+(t.item.settings.trueIcon||"toggle-switch-outline"):"mdi-"+(t.item.settings.falseIcon||"toggle-switch-off-outline")},nativeOn:{click:function(e){return e.stopPropagation(),t.actionHandler(e)}}})],1),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px",bottom:"1px",left:"1px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},zs=[],Hs=(i("6b54"),i("34ef"),i("52cd")),Ds=i.n(Hs);function Ps(t,e,i){var s=Ds.a.query(t,e);return null!==s&&void 0!==s&&s.length||(s=i),1===s.length&&(s=s[0]),s}var js={methods:{getValueByTopic:function(t,e){var i=t instanceof Uint8Array;if(null===t)t="N/A";else switch(e.payloadType){case vt["h"]:t=i?t.toString():JSON.stringify(t);break;case vt["g"]:try{if(e.payloadField){var s=i?JSON.parse(t.toString()):t,a=Ps(s,e.payloadField,"N/A");if(e.payloadNameField){var n=Ps(s,e.payloadNameField,"N/A");t=[n,a]}else t=a}else t=JSON.parse(i?t.toString():JSON.stringify(t))}catch(o){t="N/A"}break;default:t=i?t.toString():JSON.stringify(t)}return t}}},Rs={computed:{time:function(){var t=this;return Object.keys(this.value).reduce((function(e,i){if(!t.value[i])return e;var s=1e3*parseInt(j()(t.value[i],"properties.userProperties.timestamp",t.value[i].timestamp/1e3));return s>e&&(e=s),e}),0)},timestamp:function(){var t=this.time,e=new Date(Date.now()),i=new Date(t),s="DD/MM HH:mm:ss";return e.getDate()+e.getMonth()===i.getDate()+i.getMonth()&&(s="HH:mm:ss"),t?oi["a"].formatDate(t,s):""}}},Ws={name:"Switcher",props:["item","index","value","mini","in-shortcuts","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},computed:{currentValue:function(){var t=this,e=this.item.settings.accumulateLogic,i=e===jt;return this.item.dataTopics.reduce((function(i,s){if(null===i)return i;var a=null!==t.value[s.topicFilter]?"".concat(t.mathProcessing(t.getValueByTopic(t.value[s.topicFilter].payload,s),t.item.settings.math)):t.value[s.topicFilter];switch(e){case jt:i=a===t.item.settings.trueValue?i&&!0:a===t.item.settings.falseValue?i&&!1:null;break;case Rt:i=a===t.item.settings.trueValue?i||!0:a===t.item.settings.falseValue?i||!1:null;break}return i}),i)},actionTopic:function(){var t=null;return null===this.currentValue?t=null:this.item.settings.mode===Pt?t=this.currentValue?this.item.settings.falseActionTopic:this.item.settings.trueActionTopic:1===this.item.topics.length?t=this.item.topics[0]:this.item.settings.mode===Dt&&(t=this.item.settings.actionTopic),t},isActiveWidget:function(){return this.actionTopic&&(this.item.settings.mode===Pt||!this.item.settings.math&&this.item.settings.mode===Dt)},contentHeight:function(){var t="calc(100% - 22px)";return!this.item.name&&this.blocked&&(t="calc(100% - 4px)"),t}},methods:{getValue:function(){var t=this;return this.item.settings.mode===Pt?this.currentValue?this.item.settings.falsePayload:this.item.settings.truePayload:this.item.dataTopics.reduce((function(e,i){var s=null!==t.value[i.topicFilter]?t.getValueByTopic(t.value[i.topicFilter].payload,i):t.value[i.topicFilter];return s===t.item.settings.trueValue&&e===t.item.settings.trueValue?t.item.settings.falseValue:s===t.item.settings.falseValue&&e===t.item.settings.falseValue?t.item.settings.trueValue:s?t.item.settings.falseValue:t.item.settings.trueValue}),this.item.settings.falseValue)},actionHandler:function(){if(null!==this.currentValue&&this.isActiveWidget){var t={topic:this.actionTopic,payload:this.getValue(),settings:{retain:this.item.settings.save}};this.$emit("action",t)}}},mixins:[js,Rs,mi]},Us=Ws,Gs=(i("97da"),Object(nt["a"])(Us,Ls,zs,!1,null,null,null)),Ys=Gs.exports,Js=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.showTooltip(e)}}},[i("div",{class:["bg-"+(null!==t.text?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis",style:{fontSize:(t.stringLength>5?16:18)+"px"}},[i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.item.settings.prefix))]),t._v(t._s(""+t.text)),i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.item.settings.postfix))])]),i("q-tooltip",{ref:"tooltip"},[i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.item.settings.prefix))]),t._v("\n      "+t._s(""+t.text)+"\n      "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.item.settings.postfix))])])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__informer",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"informer__payload-wrapper",staticStyle:{"padding-bottom":"15px"}},[i("text-view",{staticClass:"informer__payload",class:["text-"+(null!==t.value[t.topic]?"grey-9":"grey-5")],attrs:{text:t.text,title:t.title,prefix:t.item.settings.prefix,postfix:t.item.settings.postfix,settings:t.item.settings}})],1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{bottom:"1px",left:"1px","font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},Ks=[],Zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.settings.valueFormat===t.WIDGET_VALUE_FORMAT_PRE?i("div",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),i("pre",{staticStyle:{margin:"0"}},[t._v(t._s(t.text))]),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e(),t.showTooltip?i("q-tooltip",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),i("pre",{staticStyle:{margin:"0"}},[t._v(t._s(t.title))]),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e()]):t._e()],1):t.settings.valueFormat===t.WIDGET_VALUE_FORMAT_MARKDOWN?i("div",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),i("markdown",{attrs:{source:t.text}}),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e(),t.showTooltip?i("q-tooltip",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),t._v("\n    "+t._s(t.title)+"\n    "),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e()]):t._e()],1):t.settings.valueFormat===t.WIDGET_VALUE_FORMAT_JSON?i("div",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),i("json-tree",{attrs:{data:t.getJsonValue()}}),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e()],1):(t.settings.valueFormat===t.WIDGET_VALUE_FORMAT_STRING||t.settings.valueFormat===t.WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE||(t.settings.valueFormat,t.WIDGET_VALUE_FORMAT_DATE),i("div",{staticClass:"text-center"},[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),t._v("\n  "+t._s(t.text)+"\n  "),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e(),t.showTooltip?i("q-tooltip",[t.prefix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.prefix))]):t._e(),t._v("\n    "+t._s(t.title)+"\n    "),t.postfix?i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(""+t.postfix))]):t._e()]):t._e()],1))},Qs=[],Xs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("markdown",{staticClass:"markdown-block",attrs:{"table-class":"markdown-table",source:t.source,prerender:t.prerenderHandler,postrender:t.postrenderHandler}},[t._t("default")],2)},ta=[],ea=i("9ce6"),ia=i.n(ea),sa=i("5e38"),aa=i.n(sa),na={name:"flespi-markdown",props:["source"],data:function(){return{}},methods:{prerenderHandler:function(t){return aa()(t)},postrenderHandler:function(t){return t.replace(/\*\*\s\*\s\*\*/g,"*")}},mounted:function(){this.$prism.highlightAll()},updated:function(){this.$prism.highlightAll()},components:{Markdown:ia.a}},oa=na,ra=(i("590d"),Object(nt["a"])(oa,Xs,ta,!1,null,null,null)),la=ra.exports,ca=function(){var t,e=this,i=e.$createElement,s=e._self._c||i;return Array.isArray(e.data)||"object"===typeof e.data?s("div",[s("span",{class:{"text-white":void 0!==e.inverted}},[e._v(e._s(Array.isArray(e.data)?"[":"{"))]),e._l(e.data,(function(t,i,a){var n;return s("div",{key:i+"-"+a,staticClass:"margin-left"},[t&&"object"===typeof t?s("div",[s("div",{staticClass:"cursor-pointer",on:{click:function(t){e.toggle(Array.isArray(e.data)?i:a)}}},[e.showObj[Array.isArray(e.data)?i:a]?s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==e.inverted?"white":"grey-9",name:"mdi-menu-down"}}):s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==e.inverted?"white":"grey-9",name:"mdi-menu-right"}}),s("span",{class:[e.theme.label]},[e._v(e._s(i))]),s("span",{class:{"text-white":void 0!==e.inverted}},[e._v(" : "+e._s(Array.isArray(t)?"Array ["+t.length+"]":"Object"))])],1),e.showObj[Array.isArray(e.data)?i:a]?s("json-tree",{staticClass:"margin-left",attrs:{data:t,inverted:e.inverted}}):e._e()],1):s("div",[s("span",{class:[e.theme.label]},[e._v(e._s(i))]),s("span",{class:{"text-white":void 0!==e.inverted}},[e._v(" : ")]),s("span",{class:(n={},n[e.theme.typeNumberOrBool]="number"===typeof t||"boolean"===typeof t,n[e.theme.typeString]="string"===typeof t,n[e.theme.typeEmpty]="undefined"===typeof t||null===t,n)},[e._v(e._s(JSON.stringify(t)))])])])})),s("span",{class:{"text-white":void 0!==e.inverted}},[e._v(e._s(Array.isArray(e.data)?"]":"}"))])],2):s("div",[s("span",{class:(t={},t[e.theme.typeNumberOrBool]="number"===typeof e.data||"boolean"===typeof e.data,t[e.theme.typeString]="string"===typeof e.data,t[e.theme.typeEmpty]="undefined"===typeof e.data||null===e.data,t),staticStyle:{"font-size":"1rem"}},[e._v(e._s(e.data))])])},da=[],ua={name:"JsonTree",props:{data:{requered:!0},inverted:{type:Boolean,default:function(){}}},data:function(){for(var t=[],e=Object.keys(this.data).length,i=0,s=e;i<s;i++)t.push(!0);return{showObj:t}},computed:{theme:function(){return void 0!==this.inverted?{label:"text-pink-4",typeString:"text-red-3",typeNumberOrBool:"text-blue-3",typeEmpty:"text-grey-5"}:{label:"text-pink-8",typeString:"text-red-6",typeNumberOrBool:"text-blue-6",typeEmpty:"text-grey-6"}}},methods:{toggle:function(t){J["default"].set(this.showObj,t,!this.showObj[t])}}},ma=ua,pa=(i("40b8"),Object(nt["a"])(ma,ca,da,!1,null,null,null)),ha=pa.exports,ga={props:["prefix","postfix","text","title","settings","showTooltip"],data:function(){return{WIDGET_VALUE_FORMAT_STRING:vt["s"],WIDGET_VALUE_FORMAT_HUMAN_READABLE_SIZE:vt["o"],WIDGET_VALUE_FORMAT_DATE:vt["m"],WIDGET_VALUE_FORMAT_DURATION:vt["n"],WIDGET_VALUE_FORMAT_PRE:vt["r"],WIDGET_VALUE_FORMAT_MARKDOWN:vt["q"],WIDGET_VALUE_FORMAT_JSON:vt["p"]}},methods:{getJsonValue:function(){var t=this.text;try{t=JSON.parse(t)}catch(e){}return t}},components:{Markdown:la,JsonTree:ha}},fa=ga,va=Object(nt["a"])(fa,Zs,Qs,!1,null,null,null),ba=va.exports,ya={name:"Informer",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()}},computed:{topic:function(){return this.item.dataTopics[0].topicFilter},title:function(){return this.getValueByTopic(this.value[this.topic]&&this.value[this.topic].payload,this.item.dataTopics[0])},text:function(){return this.formatValue(this.title,this.item.settings)},stringLength:function(){return this.item.settings.prefix.length+this.text.length+this.item.settings.postfix.length},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 26px)"),t}},components:{TextView:ba},mixins:[js,Rs,mi]},xa=ya,Sa=(i("53e2d"),Object(nt["a"])(xa,Js,Ks,!1,null,null,null)),qa=Sa.exports,_a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__static-informer",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"sattic-informer__payload-wrapper"},[i("text-view",{staticClass:"static-informer__payload text-grey-9",attrs:{text:t.text,title:t.text,settings:t.item.settings,"show-tooltip":!1}})],1)])],1)},wa=[],Ca={name:"StaticInformer",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()}},computed:{text:function(){return this.item.settings.text},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},components:{TextView:ba},mixins:[js,Rs]},ka=Ca,Ta=(i("229f"),Object(nt["a"])(ka,_a,wa,!1,null,null,null)),Va=Ta.exports,$a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__informer",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"multi-informer__payload-wrapper",staticStyle:{"padding-bottom":"15px"}},t._l(t.text,(function(e,s){return i("text-view",{key:s,staticClass:"multi-informer__payload",class:["text-"+(null!==t.value[t.item.settings.items[s].topic.topicFilter]?"grey-9":"grey-5")],attrs:{text:e,title:t.title[s],prefix:t.item.settings.items[s].prefix,postfix:t.item.settings.items[s].postfix,settings:t.item.settings.items[s]}})})),1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{bottom:"1px",left:"1px","font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},Ia=[],Ma={name:"MultiInformer",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()}},computed:{title:function(){var t=this;return this.item.settings.items.map((function(e){var i=e.topic.topicFilter;return t.getValueByTopic(t.value[i]&&t.value[i].payload,e.topic)}))},text:function(){var t=this;return this.title.map((function(e,i){var s=t.item.settings.items[i];return t.formatValue(e,s)}))},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 24px)"),t}},components:{TextView:ba},mixins:[js,Rs,mi]},Oa=Ma,Ea=(i("fcc5"),Object(nt["a"])(Oa,$a,Ia,!1,null,null,null)),Ba=Ea.exports,Fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.actionHandler(e)}}},[i("div",{class:["bg-"+t.item.color+"-1"],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("q-btn",{attrs:{disabled:t.item.status===t.WIDGET_STATUS_DISABLED,size:"0.8rem",dense:"",round:"",icon:"mdi-"+(t.item.settings.icon||"send"),color:t.item.color+"-7"}}),i("q-tooltip",[t._v("Payload"+t._s(t.item.settings.payload?": "+t.item.settings.payload:" is empty"))])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__informer q-pa-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-py-none q-px-sm",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis text-white",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content clicker__payload q-py-none q-px-sm scroll",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("q-btn",{staticClass:"payload__button",attrs:{disabled:t.item.status===t.WIDGET_STATUS_DISABLED,color:t.item.color+"-7",label:t.item.settings.icon?void 0:t.item.settings.label||"Send",icon:t.item.settings.icon?"mdi-"+t.item.settings.icon:void 0,rounded:""},on:{click:t.actionHandler}})],1)],1)},Na=[],Aa={name:"Clicker",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},computed:{contentHeight:function(){var t="calc(100% - 22px)";return!this.item.name&&this.blocked&&(t="100%"),t}},methods:{actionHandler:function(){var t=this;this.item.settings.topics.forEach((function(e){var i={topic:e.topicTemplate,payload:e.payload,settings:{retain:t.item.settings.save}};t.$emit("action",i)}))}}},La=Aa,za=(i("355b"),Object(nt["a"])(La,Fa,Na,!1,null,null,null)),Ha=za.exports,Da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.showTooltip(e)}}},[i("div",{class:["bg-"+(null!==t.currentValueText?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis",style:{fontSize:(t.stringLength>5?16:18)+"px"}},[t._v("\n      "+t._s(""+t.currentValue+t.item.settings.units)+"\n    ")]),i("q-tooltip",{ref:"tooltip"},[t._v("\n      "+t._s(""+t.currentValue+t.item.settings.units)+"\n    ")])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__radial absolute",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"radial__payload",staticStyle:{height:"100%"}},[i("q-resize-observer",{on:{resize:t.onResize}}),i("radial-gauge",{attrs:{options:t.options,value:t.currentValue}})],1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},Pa=[],ja=(i("6c7b"),i("ee1d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{staticClass:"canvas-gauges"})}),Ra=[],Wa=i("af13"),Ua=E()((function(t,e){t.value=e}),1e3,{trailing:!0}),Ga={props:{value:Number,options:{type:Object,default:function(){return{}}}},data:function(){return{chart:null}},mounted:function(){this.value&&(this.options.value=this.value),this.options.renderTo=this.$el,this.chart=new Wa["RadialGauge"](this.options).draw()},beforeDestroy:function(){this.chart.destroy()},watch:{options:{deep:!0,handler:function(t){this.chart.update(t)}},value:function(t){Ua(this.chart,t)}}},Ya=Ga,Ja=Object(nt["a"])(Ya,ja,Ra,!1,null,null,null),Ka=Ja.exports,Za={name:"Radial",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],width:0,height:0,colors:{plate:{grey:"#bdbdbd",red:"#e57373",green:"#81c784",orange:"#ffb74d",blue:"#64b5f6","light-blue":"#4fc3f7",purple:"#ba68c8","deep-orange":"#ff8a65",cyan:"#4dd0e1",brown:"#a1887f","blue-grey":"#90a4ae"},borderOuter:{grey:"#fafafa",red:"#ffebee",green:"#e8f5e9",orange:"#fff3e0",blue:"#e3f2fd","light-blue":"#e1f5fe",purple:"#f3e5f5","deep-orange":"#fbe9e7",cyan:"#e0f7fa",brown:"#efebe9","blue-grey":"#eceff1"},borderMiddle:{grey:"#f5f5f5",red:"#ffcdd2",green:"#c8e6c9",orange:"#ffe0b2",blue:"#bbdefb","light-blue":"#b3e5fc",purple:"#f3e5f5","deep-orange":"#ffccbc",cyan:"#b2ebf2",brown:"#d7ccc8","blue-grey":"#cfd8dc"},borderInner:{grey:"#eee",red:"#ef9a9a",green:"#a5d6a7",orange:"#ffcc80",blue:"#90caf9","light-blue":"#81d4fa",purple:"#e1bee7","deep-orange":"#ffab91",cyan:"#80deea",brown:"#bcaaa4","blue-grey":"#b0bec5"}}}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},onResize:function(t){var e=t.width,i=t.height;this.width=e,this.height=i}},computed:{valuesBySettings:function(){var t=this.item.dataTopics[0],e=this.item.settings.topics[0],i=this.item.settings.topics[1],s=f()({},t.topicFilter,parseFloat(this.getValueByTopic(this.value[t.topicFilter]&&this.value[t.topicFilter].payload,t)));return e&&(s[e.topicFilter]=parseFloat(this.getValueByTopic(this.value[e.topicFilter]&&this.value[e.topicFilter].payload,e))),i&&(s[i.topicFilter]=parseFloat(this.getValueByTopic(this.value[i.topicFilter]&&this.value[i.topicFilter].payload,i))),s},currentValueText:function(){return this.valuesBySettings[this.item.dataTopics[0].topicFilter]},currentValue:function(){var t=this.valuesBySettings[this.item.dataTopics[0].topicFilter];return Number.isNaN(t)?0:this.mathProcessing(t,this.item.settings.math)},stringLength:function(){return this.currentValue.length+this.item.settings.units.length},maxValue:function(){return this.item.settings.maxValueMode===vt["i"]?this.item.settings.maxValue:this.item.settings.minValueMode===vt["j"]?this.valuesBySettings[this.item.settings.topics[1].topicFilter]:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},minValue:function(){return this.item.settings.minValueMode===vt["i"]?this.item.settings.minValue:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},options:function(){var t=this,e=this.item.settings,i=function(e){var i=(t.maxValue-t.minValue)/10;return new Array(11).fill(0).reduce((function(e,s,a,n){if(0===a)e.push(t.minValue);else if(a===n.length-1)e.push(t.maxValue);else{var o=Math.round(100*(e[e.length-1]+i))/100;Number.isNaN(o)&&(o="N/A"),e.push(o)}return e}),[])};return{valueText:this.currentValue,minValue:this.minValue,maxValue:this.maxValue,width:this.width-16,height:this.height-16,majorTicks:i(e),units:e.units,animation:!0,animationRule:"linear",animationDuration:300,colorPlate:this.colors.plate[this.item.color],colorBorderOuter:this.colors.borderOuter[this.item.color],colorBorderOuterEnd:this.colors.borderOuter[this.item.color],colorBorderMiddle:this.colors.borderMiddle[this.item.color],colorBorderMiddleEnd:this.colors.borderMiddle[this.item.color],colorBorderInner:this.colors.borderInner[this.item.color],colorBorderInnerEnd:this.colors.borderInner[this.item.color],borderShadowWidth:1,colorNeedleShadowDown:"#222",colorNeedle:"#d32f2f",colorNeedleEnd:"#d32f2f",colorUnits:"#616161",highlights:[{from:this.minValue,to:e.lowLevel,color:"rgba(165,214,167,1)"},{from:e.lowLevel,to:e.midLevel,color:"rgba(220,231,117,1)"},{from:e.midLevel,to:e.highLevel,color:"rgba(255,179,0,1)"},{from:e.highLevel,to:this.maxValue,color:"rgba(244,81,30,1)"}]}},contentHeight:function(){var t="calc(100% - 34px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},components:{RadialGauge:Ka},mixins:[js,Rs,mi]},Qa=Za,Xa=(i("8306"),Object(nt["a"])(Qa,Da,Pa,!1,null,null,null)),tn=Xa.exports,en=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.showTooltip(e)}}},[i("div",{class:["bg-"+(null!==t.currentValueText?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis",style:{fontSize:(t.stringLength>5?16:18)+"px"}},[t._v("\n      "+t._s(""+t.currentValue+t.item.settings.units)+"\n    ")]),i("q-tooltip",{ref:"tooltip"},[t._v("\n      "+t._s(""+t.currentValue+t.item.settings.units)+"\n    ")])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__linear absolute",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"linear__payload",staticStyle:{height:"100%"}},[i("q-resize-observer",{on:{resize:t.onResize}}),i("linear-gauge",{attrs:{options:t.options,value:t.currentValue}})],1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},sn=[],an=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{staticClass:"canvas-gauges"})},nn=[],on=E()((function(t,e){t.value=e}),1e3,{trailing:!0}),rn={props:{value:Number,options:{type:Object,default:function(){return{}}}},data:function(){return{chart:null}},mounted:function(){this.value&&(this.options.value=this.value),this.options.renderTo=this.$el,this.chart=new Wa["LinearGauge"](this.options).draw()},beforeDestroy:function(){this.chart.destroy()},watch:{options:{deep:!0,handler:function(t){this.chart.update(t)}},value:function(t){on(this.chart,t)}}},ln=rn,cn=Object(nt["a"])(ln,an,nn,!1,null,null,null),dn=cn.exports,un={name:"Linear",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],width:0,height:0,colors:{border:{grey:"#fafafa",red:"#ffebee",green:"#e8f5e9",orange:"#fff3e0",blue:"#e3f2fd","light-blue":"#e1f5fe",purple:"#f3e5f5","deep-orange":"#fbe9e7",cyan:"#e0f7fa",brown:"#efebe9","blue-grey":"#eceff1"},barColorsProgress:{grey:"#bdbdbd",red:"#e57373",green:"#81c784",orange:"#ffb74d",blue:"#64b5f6","light-blue":"#4fc3f7",purple:"#ba68c8","deep-orange":"#ff8a65",cyan:"#4dd0e1",brown:"#a1887f","blue-grey":"#90a4ae"},barColors:{grey:"#f5f5f5",red:"#ffcdd2",green:"#c8e6c9",orange:"#ffe0b2",blue:"#bbdefb","light-blue":"#b3e5fc",purple:"#e1bee7","deep-orange":"#ffccbc",cyan:"#b2ebf2",brown:"#d7ccc8","blue-grey":"#cfd8dc"}}}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},onResize:function(t){var e=t.width,i=t.height;this.width=e,this.height=i}},computed:{valuesBySettings:function(){var t=this.item.dataTopics[0],e=this.item.settings.topics[0],i=this.item.settings.topics[1],s=f()({},t.topicFilter,parseFloat(this.getValueByTopic(this.value[t.topicFilter]&&this.value[t.topicFilter].payload,t)));return e&&(s[e.topicFilter]=parseFloat(this.getValueByTopic(this.value[e.topicFilter]&&this.value[e.topicFilter].payload,e))),i&&(s[i.topicFilter]=parseFloat(this.getValueByTopic(this.value[i.topicFilter]&&this.value[i.topicFilter].payload,i))),s},currentValueText:function(){return this.valuesBySettings[this.item.dataTopics[0].topicFilter]},currentValue:function(){var t=this.valuesBySettings[this.item.dataTopics[0].topicFilter];return Number.isNaN(t)?0:this.mathProcessing(t,this.item.settings.math)},stringLength:function(){return this.currentValue.length+this.item.settings.units.length},maxValue:function(){return this.item.settings.maxValueMode===vt["i"]?this.item.settings.maxValue:this.item.settings.minValueMode===vt["j"]?this.valuesBySettings[this.item.settings.topics[1].topicFilter]:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},minValue:function(){return this.item.settings.minValueMode===vt["i"]?this.item.settings.minValue:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},options:function(){var t=this,e=this.item.settings,i=function(e){var i=(t.maxValue-t.minValue)/10;return new Array(11).fill(0).reduce((function(e,s,a,n){if(0===a)e.push(t.minValue);else if(a===n.length-1)e.push(t.maxValue);else{var o=Math.round(100*(e[e.length-1]+i))/100;Number.isNaN(o)&&(o="N/A"),e.push(o)}return e}),[])};return{valueText:this.currentValue,minValue:this.minValue,maxValue:this.maxValue,width:this.width-16,height:this.height-16,majorTicks:i(e),units:e.units,animation:!0,animationRule:"linear",animationDuration:300,colorPlate:this.colors.border[this.item.color],colorBorderOuter:this.colors.border[this.item.color],colorBorderOuterEnd:this.colors.border[this.item.color],colorBorderMiddle:this.colors.border[this.item.color],colorBorderMiddleEnd:this.colors.border[this.item.color],colorBorderInner:this.colors.border[this.item.color],colorBorderInnerEnd:this.colors.border[this.item.color],borderShadowWidth:0,colorNeedleShadowDown:"#222",colorNeedle:"#d32f2f",colorNeedleEnd:"#d32f2f",colorUnits:"#616161",barWidth:8,colorBarProgress:this.colors.barColorsProgress[this.item.color],colorBar:this.colors.barColors[this.item.color],highlights:[{from:this.minValue,to:e.lowLevel,color:"rgba(79,195,247,1)"},{from:e.lowLevel,to:e.midLevel,color:"rgba(165,214,167,1)"},{from:e.midLevel,to:e.highLevel,color:"rgba(255,179,0,1)"},{from:e.highLevel,to:this.maxValue,color:"rgba(244,81,30,1)"}]}},contentHeight:function(){var t="calc(100% - 34px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},components:{LinearGauge:dn},mixins:[js,Rs,mi]},mn=un,pn=(i("169a"),Object(nt["a"])(mn,en,sn,!1,null,null,null)),hn=pn.exports,gn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__frame",class:["bg-"+t.item.color+"-1",t.blocked?"scroll":""],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"frame__payload",staticStyle:{height:"100%"}},[i("q-resize-observer",{on:{resize:t.onResize}}),null!==t.link?i("iframe",{ref:"frame",attrs:{src:t.link,frameborder:"0",height:t.height,width:t.width,autoplay:"",allowfullscreen:""}}):i("div",{staticClass:"bg-grey-5 text-grey-8 relative-position q-pt-xs",staticStyle:{height:"95%"}},[i("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[i("q-icon",{attrs:{name:"mdi-block-helper",size:t.height/2+"px"}})],1),i("div",{staticStyle:{"font-size":"1.5rem"}},[t._v("Invalid link address")])])],1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},fn=[],vn=(i("b54a"),{name:"Frame",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{width:0,height:0,currentPayloads:[],isReady:!this.item.settings.readyMessage,IFRAME_MODE_INTEGRATION:Ee,IFRAME_MODE_SHOW:Be}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},onResize:function(t){var e=t.width,i=t.height;this.width=e-16,this.height=i-16},send:function(t){this.$refs.frame&&this.$refs.frame.contentWindow.postMessage(t,"*")},getPayload:function(t){var e;if(this.item.settings.mode===Ee){var i=this.item.settings.items[t].topic,s=this.getValueByTopic(this.value[i.topicFilter]&&this.value[i.topicFilter].payload,i),a=this.value&&this.value[i.topicFilter]&&this.value[i.topicFilter].topic,n=a&&a.split("/");e=this.item.settings.items[t].template,e=e.replace("<{topic}>",a),e=e.replace(/<{topic\[(\d)\]}>/g,(function(t,e){return n&&n[e]})),e=e.replace("<{payload}>",JSON.stringify(s)),e=e.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)%>/gim,(function(t,e){return JSON.stringify(j()(s,e,null))}))}return e},update:function(){var t=this;this.item.settings.items.forEach((function(e,i){if(!t.isReady)return!1;var s=t.getPayload(i);t.currentPayloads[i]!==s&&t.send(s),t.$set(t.currentPayloads,i,s)}))}},computed:{link:function(){if(this.item.settings.mode===Ee)return this.item.settings.link;var t=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#/%?=~_|!:,.;]*[a-z0-9-+&@#/%=~_|]/gim,e=this.getValueByTopic(this.value[this.item.dataTopics[0].topicFilter]&&this.value[this.item.dataTopics[0].topicFilter].payload,this.item.dataTopics[0]);return e&&e.toString().match(t)?e:null},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},watch:{value:{deep:!0,handler:function(){this.update()}},item:{deep:!0,handler:function(){this.item.settings.initMessage&&this.send(this.item.settings.initMessage)}}},created:function(){var t=this;this.item.settings.readyMessage?window.addEventListener("message",(function(e){e.data===t.item.settings.readyMessage&&(t.item.settings.initMessage&&t.send(t.item.settings.initMessage),t.isReady=!0,t.update())})):this.item.settings.initMessage&&this.send(this.item.settings.initMessage)},mixins:[js,Rs]}),bn=vn,yn=(i("b006"),Object(nt["a"])(bn,gn,fn,!1,null,null,null)),xn=yn.exports,Sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"}},[i("div",{class:["bg-"+(null!==t.currentValue?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis",style:{fontSize:(t.stringLength>5?16:18)+"px"}},[t._v("\n      "+t._s(""+t.currentLabel)+"\n    ")]),i("q-tooltip",{ref:"tooltip"},[t._v("\n      "+t._s(t.currentLabel+" ("+t.currentValue+")")+"\n    ")])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__switcher q-pa-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-pa-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("q-list",{staticStyle:{height:"100%",overflow:"auto"}},t._l(t.item.settings.items,(function(e,s){return i("q-item",{key:""+s+e.value,staticClass:"q-pa-none",attrs:{tag:"label"}},[i("q-item-section",{attrs:{avatar:""}},[i("q-radio",{attrs:{val:e.val,color:t.item.color+"-7"},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}})],1),i("q-item-section",{staticClass:"cursor-pointer"},[i("q-item-label",{attrs:{header:""}},[t._v(t._s(e.label||e.val||"Empty"))]),t.item.settings.mode===t.COMMAND_MODE?i("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.actionTopic))]):t._e(),t.item.settings.mode===t.COMMAND_MODE?i("q-item-label",{attrs:{caption:""}},[t._v("("+t._s(e.actionPayload||"*Empty*")+")")]):t._e()],1)],1)})),1)],1),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px",bottom:"1px",left:"1px","user-select":"none"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},qn=[],_n={name:"Singleselect",props:["item","index","value","mini","in-shortcuts","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],DEFAULT_MODE:De,COMMAND_MODE:Pe,actionTopic:null,actionPayload:""}},computed:{currentLabel:function(){var t=this,e=this.value[this.item.dataTopics[0].topicFilter]&&this.value[this.item.dataTopics[0].topicFilter].payload;if(null===e)return"N/A";var i=this.item.settings.items.filter((function(e){return e.val===t.currentValue}))[0];return i?i.label:"N/A"},stringLength:function(){return this.currentLabel.length},currentValue:{get:function(){var t=this.value[this.item.dataTopics[0].topicFilter]&&this.value[this.item.dataTopics[0].topicFilter].payload;return null===t?null:this.getValueByTopic(t,this.item.dataTopics[0])},set:function(t){this.setAction(t),this.actionHandler()}},contentHeight:function(){var t="calc(100% - 22px)";return!this.item.name&&this.blocked&&(t="calc(100% - 4px)"),t}},methods:{setAction:function(t){var e="",i="";if(this.item.settings.mode===De)e=this.item.dataTopics[0].topicFilter,i=t;else{var s=this.item.settings.items.filter((function(e){return e.val===t}))[0];e=s.actionTopic,i=s.actionPayload}this.actionTopic=e,this.actionPayload=i},actionHandler:function(){if(null!==this.actionTopic){var t={topic:this.actionTopic,payload:this.actionPayload,settings:{retain:this.item.settings.save}};this.$emit("action",t)}}},mixins:[js,Rs]},wn=_n,Cn=(i("49cb"),Object(nt["a"])(wn,Sn,qn,!1,null,null,null)),kn=Cn.exports,Tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__multiplier q-pa-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-pa-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",position:"relative"}},[t._l(t.renderedWidgets,(function(e,s){return i("div",{key:s,staticClass:"q-ma-sm",staticStyle:{display:"inline-block",position:"relative"},style:{width:t.widgetsWidth,minHeight:"radial"===t.item.settings.type||"linear"===t.item.settings.type?50*t.item.settings.widgetSettings.height+"px":""}},[i(t.item.settings.type,{tag:"component",staticClass:"wrapper__items",attrs:{item:t.widgets[s],value:t.values[s],index:s,blocked:!0,integration:!0},on:{action:function(e){t.$emit("action",e)}}})],1)})),t.widgetsIds.length>t.limit?i("div",{staticClass:"flex flex-center"},[i("q-pagination",{attrs:{max:Math.ceil(t.widgetsIds.length/t.limit),"max-pages":t.item.settings.width,"direction-links":"",color:t.item.color},model:{value:t.batch,callback:function(e){t.batch=e},expression:"batch"}})],1):t._e()],2)])],1)},Vn=[],$n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__complex q-py-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-pa-none q-px-sm",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("q-resize-observer",{on:{resize:t.setPaddings}}),t.topItems.length?i("div",{ref:"itemsTop",staticClass:"items__top flex q-px-md q-py-xs absolute scroll"},t._l(t.topItems,(function(e,s){return i("my-"+t.renderItems[e.index].type,{key:"top"+s+e.index,tag:"component",attrs:{item:t.renderItems[e.index],value:e.val,color:t.item.color}})})),1):t._e(),i("div",{staticClass:"scroll row",style:{marginTop:t.mainMarginTop+"px",marginBottom:t.mainMarginBottom+"px",maxHeight:"calc(100% - "+(t.mainMarginTop+t.mainMarginBottom)+"px)"}},[t.leftItems.length?i("div",{staticClass:"items__left flex q-pa-sm",class:{"col-6":t.leftItems.length&&t.rightItems.length,"col-12":!t.rightItems.length,"justify-center":!t.rightItems.length},staticStyle:{overflow:"hidden"}},t._l(t.leftItems,(function(e,s){return i("my-"+t.renderItems[e.index].type,{key:"left"+s+e.index,tag:"component",attrs:{item:t.renderItems[e.index],value:e.val,color:t.item.color}})})),1):t._e(),t.rightItems.length?i("div",{staticClass:"items__right q-pa-sm",class:{"col-6":t.leftItems.length&&t.rightItems.length,"col-12":!t.leftItems.length}},t._l(t.rightItems,(function(e,s){return i("my-"+t.renderItems[e.index].type,{key:"right"+s+e.index,tag:"component",attrs:{item:t.renderItems[e.index],value:e.val,color:t.item.color}})})),1):t._e()]),t.bottomItems.length?i("div",{ref:"itemsBottom",staticClass:"items__bottom flex q-px-md q-py-xs absolute scroll"},t._l(t.bottomItems,(function(e,s){return i("my-"+t.renderItems[e.index].type,{key:"bottom"+s+e.index,tag:"component",attrs:{item:t.renderItems[e.index],value:e.val,color:t.item.color}})})),1):t._e()],1),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px",bottom:"1px",left:"1px","user-select":"none"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},In=[],Mn={name:"Complex",props:["item","index","value","mini","in-shortcuts","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],mainMarginTop:0,mainMarginBottom:0}},computed:{currentValue:{get:function(){var t=this.value[this.item.dataTopics[0].topicFilter]&&this.value[this.item.dataTopics[0].topicFilter].payload;if(null===t)return null;var e=this.item.dataTopics[0];return e.payloadType===vt["h"]&&(e.payloadType=vt["g"]),this.getValueByTopic(t,this.item.dataTopics[0])}},renderItems:function(){var t=this;return this.item.settings.items.reduce((function(e,i){var s={type:i.type,label:i.label,position:i.position,index:i.index,val:i.path?j()(t.currentValue,i.path,"N/A"):null===t.currentValue?"N/A":t.currentValue};switch(i.type){case"knob":s.min=i.minValueMode?parseFloat(t.getValueByTopic(t.value[i.minValue.topicFilter]&&t.value[i.minValue.topicFilter].payload,i.minValue)):i.minValue,s.max=i.maxValueMode?parseFloat(t.getValueByTopic(t.value[i.maxValue.topicFilter]&&t.value[i.maxValue.topicFilter].payload,i.maxValue)):i.maxValue;break;case"progress":s.min=i.minValueMode?parseFloat(t.getValueByTopic(t.value[i.minValue.topicFilter]&&t.value[i.minValue.topicFilter].payload,i.minValue)):i.minValue,s.max=i.maxValueMode?parseFloat(t.getValueByTopic(t.value[i.maxValue.topicFilter]&&t.value[i.maxValue.topicFilter].payload,i.maxValue)):i.maxValue;break;case"text":s.math=i.math||"",s.valueFormat=i.valueFormat||0;break}return e.push(s),e}),[])},topItems:function(){return this.renderItems.filter((function(t){return"top"===t.position}))},leftItems:function(){return this.renderItems.filter((function(t){return"left"===t.position}))},rightItems:function(){return this.renderItems.filter((function(t){return"right"===t.position}))},bottomItems:function(){return this.renderItems.filter((function(t){return"bottom"===t.position}))},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 24px)"),t}},methods:{get:j.a,setPaddings:function(){this.mainMarginTop=this.$refs.itemsTop?this.$refs.itemsTop.offsetHeight:0,this.mainMarginBottom=this.$refs.itemsBottom?this.$refs.itemsBottom.offsetHeight:0}},mounted:function(){this.setPaddings()},updated:function(){this.setPaddings()},mixins:[js,Rs],components:{MyText:fi,MyKnob:qi,MyProgress:Vi}},On=Mn,En=(i("4fb8"),Object(nt["a"])(On,$n,In,!1,null,null,null)),Bn=En.exports,Fn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__map-location absolute",class:["bg-"+t.item.color+"-1",t.blocked?"scroll":""],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("iframe",{ref:"map",staticStyle:{width:"100%",height:"calc(100% - 18px)"},attrs:{src:t.route,frameborder:"0",allowfullscreen:""}})]),i("div",{staticClass:"absolute-top-left q-pa-xs hidden",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":".8rem","border-bottom-left-radius":"4px"}},[t._v(t._s(t.positions))]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},Nn=[],An={name:"MapLocation",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){var t=Object(T["a"])();return{route:"https://flespi.io/mapview/#/salt/".concat(t),salt:t,WIDGET_STATUS_DISABLED:vt["k"],prevPositions:{}}},computed:{positions:function(){var t=this,e=this.item.settings.items.reduce((function(e,i,s){var a=t.item.settings.topics[2*s],n=t.item.settings.topics[2*s+1],o=parseFloat(t.getValueByTopic(t.value[a.topicFilter]&&t.value[a.topicFilter].payload,a)),r=parseFloat(t.getValueByTopic(t.value[n.topicFilter]&&t.value[n.topicFilter].payload,n));return o&&r?e[i.name]={latlng:[o,r],title:[o,r],label:i.name}:t.prevPositions[i.name]&&t.prevPositions[i.name].lat&&t.prevPositions[i.name].lon&&(o=t.prevPositions[i.name].lat,r=t.prevPositions[i.name].lon,e[i.name]={latlng:[o,r],title:[o,r],label:i.name}),e}),{});return this.setPosition(e),e},contentHeight:function(){var t="calc(100% - 34px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},methods:{setPosition:function(t){this.$refs.map&&this.$refs.map.contentWindow.postMessage("MapView-".concat(this.salt,'|cmd:{"namedmarkers": ').concat(JSON.stringify(t),', "clear": "all", "fullscreencontrol": true}'),"*"),this.prevPositions=t}},watch:{"item.settings.items":function(){this.setPosition(this.positions)}},created:function(){var t=this;window.addEventListener("message",(function(e){e.data==="MapView-".concat(t.salt,'|state:{"ready": true}')&&t.setPosition(t.positions)}))},mixins:[js,Rs]},Ln=An,zn=(i("2dde"),Object(nt["a"])(Ln,Fn,Nn,!1,null,null,null)),Hn=zn.exports,Dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__map-route absolute",class:["bg-"+t.item.color+"-1",t.blocked?"scroll":""],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("iframe",{ref:"map",staticStyle:{width:"100%",height:"calc(100% - 18px)"},attrs:{src:t.route,frameborder:"0",allowfullscreen:""}})])]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},Pn=[],jn={name:"MapRoute",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){var t=Object(T["a"])();return{route:"https://flespi.io/mapview/#/salt/".concat(t),salt:t,WIDGET_STATUS_DISABLED:vt["k"],prevRoute:[]}},computed:{contentHeight:function(){var t="calc(100% - 34px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},methods:{setRoutes:function(t){this.$refs.map&&this.$refs.map.contentWindow.postMessage("MapView-".concat(this.salt,'|cmd:{"addgroutes": ').concat(JSON.stringify(t),', "clear": "all", "fullscreencontrol": true}'),"*"),this.prevRoute=t},getRoutes:function(){var t=this,e=this.item.settings.items.reduce((function(e,i,s){var a=t.item.settings.topics[s],n=t.getValueByTopic(t.value[a.topicFilter]&&t.value[a.topicFilter].payload,a);return n="N/A"===n?"":n,Array.isArray(n)?e=[].concat(d()(e),d()(n)):e.push(n),e}),[]);return e}},created:function(){var t=this;window.addEventListener("message",(function(e){e.data==="MapView-".concat(t.salt,'|state:{"ready": true}')&&t.setRoutes(t.getRoutes())}))},mixins:[js,Rs],watch:{value:{deep:!0,handler:function(t){var e=this.getRoutes();(e.length!==this.prevRoute.length||this.prevRoute.some((function(t,i){return t!==e[i]})))&&this.setRoutes(this.getRoutes())}},"item.settings.topics":function(){this.setRoutes(this.getRoutes())}}},Rn=jn,Wn=(i("88fb"),Object(nt["a"])(Rn,Dn,Pn,!1,null,null,null)),Un=Wn.exports;function Gn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Yn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(i),!0).forEach((function(e){f()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Gn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Jn={name:"Multiplier",props:["item","index","value","mini","in-shortcuts","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],widgets:{},batch:1,limit:100}},computed:{currentTopic:function(){var t=this.item.dataTopics[0].topicFilter,e=t.split("/").slice(0,this.item.settings.groupLayout+1),i=e.join("/");return i},renderedWidgets:function(){var t=this,e=(this.batch-1)*this.limit,i=this.batch*this.limit;return this.widgetsIds.reduce((function(s,a,n){return n>=e&&n<i&&(s[a]=t.widgets[a]),s}),{})},widgetsIds:function(){return Object.keys(this.widgets)},currentValue:function(){if(!this.value)return{};var t=this.item.dataTopics[0].topicFilter;if(!t||!this.value[t])return{};var e=this.currentTopic.split("/");e.forEach((function(t,i){-1!==t.indexOf(",")&&(e[i]="+")}));var i=null;return-1===e.indexOf("+")?i=1===e.length?this.value[t]:j()(this.value[t],e.slice(0,-1).join("."),null):(i=e.reduce((function(t,e,i){return t="+"===e?t.reduce((function(t,e){var i=Object.keys(e.value);return i.forEach((function(i){var s={name:"".concat(e.name?"".concat(e.name,"["):"").concat(i).concat(e.name?"]":""),value:e.value[i]};t.push(s)})),t}),[]):t.reduce((function(t,i,s){return t[s].value=i.value&&i.value[e],t}),t),t}),[{name:"",value:this.value[t]}]),i=i.reduce((function(t,e){return t[e.name]=e.value,t}),{})),i=Object.keys(i).reduce((function(t,e){return t[e]={payload:i[e]},t}),{}),i},values:function(){var t=this;return Object.keys(this.currentValue).reduce((function(e,i){var s=t.widgets[i];if(!s)return e;var a=t.item.dataTopics[0].topicFilter,n=f()({},a,t.currentValue[i]);return s.topics.forEach((function(e){if(a===e)return!1;n[e]={},n[e].payload=t.value[e]&&t.value[e].payload})),e[i]=n,e}),{})},widgetsWidth:function(){var t=this.item.settings.widgetSettings.width/this.item.settings.width*100;return t=t<=33?33:t<=50?50:100,this.$q.platform.is.mobile&&(t=100),"calc(".concat(t,"% - 16px)")},contentHeight:function(){var t="calc(100% - 22px)";return!this.item.name&&this.blocked&&(t="calc(100% - 4px)"),t}},methods:{needRender:function(t){return!this.item.settings.math||this.mathProcessing(t,this.item.settings.math)},initMultiplier:function(){var t=this,e=this.currentValue;if(!e)return!1;this.widgets={},Object.keys(e).forEach((function(i){var s=t.needRender(e[i]&&e[i].payload);!t.widgets[i]&&s&&t.initWidget(i)}))},processingMultiplier:function(){var t=this,e=this.currentValue,i=this.widgets,s=Object.keys(e),a=Object.keys(i),n=D()([].concat(d()(s),d()(a)));n.forEach((function(s,a){var n=t.needRender(e[s]&&e[s].payload);e[s]&&!i[s]&&n?t.initWidget(s):(e[s]&&e[s].payload||!i[s])&&n||t.$delete(i,s)}))},getWidgetByName:function(t){var e=[this.item.dataTopics[0].topicFilter];this.item.settings.widgetSettings.topics&&(e=[this.item.dataTopics[0].topicFilter].concat(d()(this.item.settings.widgetSettings.topics.map((function(t){return t.topicFilter})))));var i=1===this.item.dataTopics[0].payloadType&&this.item.settings.nameField?this.getValueByTopic(this.currentValue[t]&&this.currentValue[t].payload,Yn({},this.item.dataTopics[0],{payloadField:this.item.settings.nameField})):t,s={name:i,id:t,color:this.item.settings.color,type:this.item.settings.type,topics:e,dataTopics:[Yn({},this.item.dataTopics[0])],settings:F()(this.item.settings.widgetSettings),status:vt["k"]};return s},initWidget:function(t){this.$set(this.widgets,t,this.getWidgetByName(t))}},created:function(){this.initMultiplier()},watch:{value:{deep:!0,handler:function(t){this.processingMultiplier()}},"item.dataTopics":{deep:!0,handler:function(){this.initMultiplier()}}},mixins:[js,mi],components:{Switcher:Ys,Informer:qa,Radial:tn,Linear:hn,Singleselect:kn,Complex:Bn,MapLocation:Hn,MapRoute:Un}},Kn=Jn,Zn=(i("834d"),Object(nt["a"])(Kn,Tn,Vn,!1,null,null,null)),Qn=Zn.exports,Xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.showTooltip(e)}}},[i("div",{class:["bg-"+(null!==t.currentValueText?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis",style:{fontSize:(t.stringLength>5?16:18)+"px"}},[t._v("\n      "+t._s(""+t.currentValueText)+"\n    ")]),i("q-tooltip",{ref:"tooltip"},[t._v("\n      "+t._s(""+t.currentValueText)+"\n    ")])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__slider absolute",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"slider__payload q-px-md flex flex-center",staticStyle:{height:"100%"}},[i("div",{staticStyle:{width:"100%"}},[i("q-slider",{attrs:{value:t.currentValue,color:t.item.color+"-7",min:t.minValue,max:t.maxValue,step:t.item.settings.step},on:{change:t.actionHandler}}),i("div",{class:["text-"+t.item.color+"-7","text-bold"]},[t._v(t._s(t.currentValueText))])],1)])]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]):t._e()])],1)},to=[],eo={name:"Slider",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},actionHandler:function(t){var e={topic:this.item.dataTopics[0].topicFilter,payload:"".concat(t),settings:{retain:this.item.settings.save}};this.$emit("action",e)}},computed:{valuesBySettings:function(){var t=this.item.dataTopics[0],e=this.item.settings.topics[0],i=this.item.settings.topics[1],s=f()({},t.topicFilter,parseFloat(this.getValueByTopic(this.value[t.topicFilter]&&this.value[t.topicFilter].payload,t)));return e&&(s[e.topicFilter]=parseFloat(this.getValueByTopic(this.value[e.topicFilter]&&this.value[e.topicFilter].payload,e))),i&&(s[i.topicFilter]=parseFloat(this.getValueByTopic(this.value[i.topicFilter]&&this.value[i.topicFilter].payload,i))),s},currentValueText:function(){return"".concat(this.valuesBySettings[this.item.dataTopics[0].topicFilter]).concat(this.item.settings.units)},currentValue:{get:function(){var t=this.valuesBySettings[this.item.dataTopics[0].topicFilter];return Number.isNaN(t)?0:t},set:function(t){this.actionHandler(t)}},stringLength:function(){return this.currentValueText.length+this.item.settings.units.length},maxValue:function(){return this.item.settings.maxValueMode===vt["i"]?this.item.settings.maxValue:this.item.settings.minValueMode===vt["j"]?this.valuesBySettings[this.item.settings.topics[1].topicFilter]:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},minValue:function(){return this.item.settings.minValueMode===vt["i"]?this.item.settings.minValue:this.valuesBySettings[this.item.settings.topics[0].topicFilter]},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 11px)"),t}},mixins:[js,Rs]},io=eo,so=(i("cc786"),Object(nt["a"])(io,Xn,to,!1,null,null,null)),ao=so.exports,no=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"},on:{click:function(e){return e.stopPropagation(),t.showTooltip(e)}}},[i("div",{class:["bg-"+(t.disable?"grey-3":t.item.color+"-1")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticStyle:{"border-radius":"50%",height:"80%",width:"80%",display:"inline-block","vertical-align":"middle"},style:{backgroundColor:t.miniColor}})]),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__color",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"color__payload-wrapper flex flex-center"},[t.item.settings.mode===t.COLOR_MODE_SIMPLE?i("color-picker",{attrs:{hue:t.color.h,disabled:t.disable},on:{input:t.actionHandler}}):i("q-color",{class:["bg-"+t.item.color+"-1"],staticStyle:{border:"none"},attrs:{disable:t.disable,value:t.color,readonly:!!t.item.dataTopics[0].topicField,"default-value":"#FFF"},on:{input:t.actionHandler}})],1)]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px",bottom:"1px",left:"1px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},oo=[],ro=i("1ba3"),lo=(i("4c60"),i("1c16")),co=i("bc78"),uo=co["a"].rgbToHex,mo=co["a"].rgbToHsv,po=co["a"].hexToRgb,ho=co["a"].hsvToRgb,go=Object(lo["a"])((function(t,e){"object"===m()(e)&&(e=JSON.stringify(e));var i={topic:t.item.dataTopics[0].topicFilter,payload:e,settings:{retain:t.item.settings.save}};t.$emit("action",i)}),300),fo={name:"Color",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],COLOR_FORMAT_HEX:ss,COLOR_FORMAT_RGB:as,COLOR_FORMAT_HSV:ns,COLOR_MODE_SIMPLE:os,COLOR_MODE_FULL:rs,disable:!1}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},toggleStatus:function(t){return this.disable=t,t},actionHandler:function(t){go(this,this.getActionColor(t))},getObjByTemplate:function(t,e){var i=this,s={},a=[];e=e.replace(/\{|\}|\[|\]|\(|\)/g,(function(t){return"\\".concat(t)})),e=new RegExp(e.replace(/%[hex|r|g|b|h|s|v|a]{1,3}%/g,(function(t){return a.push(t.slice(1,-1)),"([.#A-Za-z0-9]+)"})));try{var n=t.match(e);return n=n.slice(1),a.forEach((function(t,e){i.item.settings.format===ss&&"hex"===t?s[t]=void 0===n[e]?"#ffffff":n[e]:s[t]=void 0===n[e]?100:parseInt(n[e])})),this.item.settings.format===ss&&(s=s.hex),s}catch(o){return a.forEach((function(t,e){s[t]=100})),s}},getModelColor:function(t){if(this.toggleStatus("N/A"===t),this.item.settings.valueTemplate)t=this.getObjByTemplate(t,this.item.settings.valueTemplate);else try{t=JSON.parse(t)}catch(s){}switch(this.item.settings.format){case ss:this.item.settings.mode===os?(t="string"===typeof t&&0===t.indexOf("#")?t:"#".concat(t),t=mo(po(t))):(t=po("string"===typeof t?t:"#ffffff"),t="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"));break;case as:if(this.item.settings.mode===os)t=mo(t);else{var e="string"===typeof t&&0===t.indexOf("#"),i="object"===m()(t)&&void 0!==t.h&&void 0!==t.s&&void 0!==t.v;t=e?po(t):i?ho(t):t,t="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")")}break;case ns:this.item.settings.mode===rs&&(t=ho(t),t="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"));break}return t},getRGBObj:function(t){var e=t.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d(?:\.\d?))\))?/);return e?{r:Number(e[1]),g:Number(e[2]),b:Number(e[3])}:{r:0,g:0,b:0}},getActionColor:function(t){if(this.item.settings.mode===os)switch(t={h:t,s:100,v:100,a:100},this.item.settings.format){case ss:t=uo(ho(t));break;case as:t=ho(t);break;case ns:break}else t=this.getRGBObj(t),this.item.settings.format===ns?t=mo(t):this.item.settings.format===ss&&(t=uo(t));return this.item.settings.valueTemplate&&(t=this.item.settings.valueTemplate.replace(/%[hex|r|g|b|h|s|v|a]{1,3}%/g,(function(e){var i=e.slice(1,-1);return void 0===t[i]?t||"":t[i]}))),this.item.settings.publishTemplate&&(t=this.item.settings.publishTemplate.replace("%value%",JSON.stringify(t))),t}},computed:{topic:function(){return this.item.dataTopics[0].topicFilter},colorValue:function(){return this.getValueByTopic(this.value[this.topic]&&this.value[this.topic].payload,this.item.dataTopics[0])},color:function(){return this.getModelColor(this.colorValue)},miniColor:function(){var t=this.color;return"string"===typeof t?t:(void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t=ho(t)),"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(void 0===t.a?100:t.a,")"))},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 24px)"),t}},components:{ColorPicker:ro["a"]},mixins:[js,Rs]},vo=fo,bo=(i("520d"),Object(nt["a"])(vo,no,oo,!1,null,null,null)),yo=bo.exports,xo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.mini?i("div",{staticStyle:{"text-align":"center"}},[i("div",{class:["bg-"+(null!==t.currentValue?t.item.color+"-1":"grey-3")],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[t.activeItem.icon||!t.activeItem.label?i("q-icon",{style:{color:t.activeItem.color},attrs:{size:"3rem",name:"mdi-"+(t.activeItem.icon||t.item.settings.defaultIcon)}}):i("div",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden"},style:{color:t.activeItem.color}},[t._v(t._s(t.activeItem.label))])],1),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(t.item.name))])]):i("q-card",{staticClass:"widget__status-indicator q-pa-sm",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-pa-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[1!==t.item.settings.width?i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[1===t.item.settings.width?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:t.inShortcuts?"mdi-star":"mdi-star-outline",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:function(e){return t.$emit("fast-bind")}}},[i("q-tooltip",[t._v(t._s((t.inShortcuts?"Remove from":"Add to")+" shortcuts"))])],1):t._e(),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[t.activeItem.icon||!t.activeItem.label?i("q-icon",{staticStyle:{width:"100%",height:"100%"},style:{color:t.activeItem.color,fontSize:t.size+"rem"},attrs:{name:"mdi-"+(t.activeItem.icon||t.item.settings.defaultIcon)}}):i("div",{staticClass:"flex flex-center",staticStyle:{width:"100%",height:"100%"},style:{color:t.activeItem.color}},[t._v(t._s(t.activeItem.label))])],1),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{"font-size":"12px","border-top-right-radius":"5px",bottom:"1px",left:"1px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},So=[],qo={name:"StatusIndicator",props:["item","index","value","mini","in-shortcuts","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],DEFAULT_MODE:hs,COMMAND_MODE:gs,actionTopic:null,actionPayload:"",valueExpired:!1,expireValueTimeoutId:0}},computed:{size:function(){var t=this.item.settings.height,e=this.item.settings.width,i=t>e?e:t;return 2.5*i},currentValue:{get:function(){var t=this.value[this.item.dataTopics[0].topicFilter]&&this.value[this.item.dataTopics[0].topicFilter].payload;return this.item.settings.resetTimeout?this.setExpireLogic():this.clearExpireLogic(),null===t||this.valueExpired?null:"".concat(this.mathProcessing(this.getValueByTopic(t,this.item.dataTopics[0]),this.item.settings.math))},set:function(t){this.setAction(t),this.actionHandler()}},activeItem:function(){var t=this,e=this.item.settings.items[0],i=this.item.settings.items.slice(1).filter((function(e){return e.val==="".concat(t.mathProcessing(t.currentValue,e.math))}));return i[0]||e},contentHeight:function(){var t="calc(100% - 22px)";return!this.item.name&&this.blocked&&(t="calc(100% - 4px)"),t}},methods:{setAction:function(t){var e="",i="";if(this.item.settings.mode===hs)e=this.item.dataTopics[0].topicFilter,i=t;else{var s=this.item.settings.items.filter((function(e){return e.val===t}))[0];e=s.actionTopic,i=s.actionPayload}this.actionTopic=e,this.actionPayload=i},actionHandler:function(){if(null!==this.actionTopic){var t={topic:this.actionTopic,payload:this.actionPayload,settings:{retain:this.item.settings.save}};this.$emit("action",t)}},setExpireLogic:function(){var t=this;this.expireValueTimeoutId&&(clearTimeout(this.expireValueTimeoutId),this.expireValueTimeoutId=0);var e=Date.now(),i=this.time+1e3*this.item.settings.resetTimeout;e>i?this.valueExpired=!0:(this.valueExpired=!1,this.expireValueTimeoutId=setTimeout((function(){t.valueExpired=!0}),i-e))},clearExpireLogic:function(){this.valueExpired=!1,this.expireValueTimeoutId&&(clearTimeout(this.expireValueTimeoutId),this.expireValueTimeoutId=0)}},mixins:[js,Rs,mi]},_o=qo,wo=(i("9723"),Object(nt["a"])(_o,xo,So,!1,null,null,null)),Co=wo.exports,ko=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__text-sender",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("div",[i("q-btn",{staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-send",dense:"",flat:"",color:t.inShortcuts?"yellow-9":t.item.color+"-7"},on:{click:t.sendHandler}},[i("q-tooltip",[t._v("Send")])],1),t.blocked?t._e():i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)])],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"text-sender__payload-wrapper relative-position",staticStyle:{height:"100%"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textModel,expression:"textModel"}],staticClass:"absolute-top-left absolute-bottom-right",staticStyle:{border:"1px solid rgba(0, 0, 0, .1)",outline:"0",width:"100%",height:"100%",resize:"none"},attrs:{placeholder:"Type your text here"},domProps:{value:t.textModel},on:{input:function(e){e.target.composing||(t.textModel=e.target.value)}}})])]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{bottom:"1px",left:"1px","font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},To=[],Vo={name:"TextSender",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"],textModel:""}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},setTextModel:function(t){this.textModel=t},sendHandler:function(){var t={topic:this.item.settings.topics[0].topicFilter,payload:this.textModel,settings:{retain:this.item.settings.save}};this.$emit("action",t)}},computed:{text:function(){var t=this.item.settings.topics[0],e=this.getValueByTopic(this.value[t.topicFilter]&&this.value[t.topicFilter].payload,t);return this.setTextModel(e),e},contentHeight:function(){var t="calc(100% - 44px)";return t}},watch:{value:{deep:!0,immediate:!0,handler:function(){var t=this.item.settings.topics[0],e=this.getValueByTopic(this.value[t.topicFilter]&&this.value[t.topicFilter].payload,t);this.setTextModel(e)}}},mixins:[js,Rs,mi]},$o=Vo,Io=(i("0fef"),Object(nt["a"])($o,ko,To,!1,null,null,null)),Mo=Io.exports,Oo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"widget__informer",class:["bg-"+t.item.color+"-1"],staticStyle:{width:"100%",height:"100%"},attrs:{flat:"",inline:""}},[i("q-item",{staticClass:"q-px-sm q-pt-sm q-pb-none",staticStyle:{"min-height":"0px"}},[i("q-item-section",{staticClass:"ellipsis",class:["text-"+t.item.color+"-7"],staticStyle:{"font-size":".9rem"}},[i("q-item-label",{staticClass:"ellipsis"},[t._v(t._s(t.item.name))]),i("q-tooltip",[t._v(t._s(t.item.name))])],1),i("transition",{attrs:{name:"block"}},[t.blocked?t._e():i("q-item-section",{staticStyle:{"min-width":"20px"},attrs:{side:""}},[i("q-btn",{staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",dense:"",flat:"",icon:"mdi-dots-vertical",color:t.item.color+"-7"}},[i("q-menu",{staticStyle:{"box-shadow":"none"},attrs:{anchor:"top right",self:"top right",offset:[8,8]}},[i("div",{staticClass:"q-pa-sm",class:["bg-"+t.item.color+"-1"]},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-content-duplicate",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("duplicate")}}},[i("q-tooltip",[t._v("Duplicate")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-settings",dense:"",flat:"",color:t.item.color+"-7"},on:{click:function(e){return t.$emit("update")}}},[i("q-tooltip",[t._v("Edit")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none q-mr-xs",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-delete-outline",dense:"",flat:"",color:"red"},on:{click:function(e){return t.$emit("delete")}}},[i("q-tooltip",[t._v("Remove")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-none",staticStyle:{"min-height":"1rem"},attrs:{size:"0.7rem",icon:"mdi-close",dense:"",flat:"",color:t.item.color+"-7"}})],1)])],1)],1)],1)],1),i("q-card-section",{staticClass:"widget__content scroll q-pa-none",class:["bg-"+t.item.color+"-1"],style:{height:t.contentHeight}},[i("div",{staticClass:"calculator__payload-wrapper",staticStyle:{"padding-bottom":"15px"},domProps:{innerHTML:t._s(t.text)}})]),t.item.settings.isNeedTime?i("div",{staticClass:"absolute-bottom-left q-px-xs q-pt-xs",class:["text-"+t.item.color+"-7","bg-"+t.item.color+"-1"],staticStyle:{bottom:"1px",left:"1px","font-size":"12px","border-top-right-radius":"5px"}},[t._v("\n    "+t._s(t.timestamp)+"\n  ")]):t._e()],1)},Eo=[];function Bo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Fo(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Bo(Object(i),!0).forEach((function(e){f()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Bo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var No={whiteList:{a:["href","title","target","style","class"],span:["style","class"],div:["style","class"],table:["style","class"],tr:["style","class"],td:["style","class"],th:["style","class"],b:["style","class"],i:["style","class"],em:["style","class"],sub:["style","class"],sup:["style","class"],s:["style","class"],hr:["style","class"],small:["style","class"],br:["style","class"]}},Ao={name:"Calculator",props:["item","index","mini","in-shortcuts","value","blocked"],data:function(){return{WIDGET_STATUS_DISABLED:vt["k"]}},methods:{showTooltip:function(){this.$q.platform.is.mobile&&this.$refs.tooltip.toogle()},resolveValues:function(t){return t.replace(/%topic\[(\d*)\](\((.*)\))?%/g,(function(t,e,i,s){var a="";return a=s?"<%".concat(e).concat(s.slice(1),"%>"):"<%".concat(e,"%>"),a}))}},computed:{valuesByIndex:function(){var t=this;return this.item.dataTopics.reduce((function(e,i,s){return e[s+1]=t.getValueByTopic(t.value[i.topicFilter]&&t.value[i.topicFilter].payload,i),e}),{})},variables:function(){var t=this;return this.item.settings.variables.reduce((function(e,i){var s=i.math;return s=s.replace(/%variable\[([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)\]%/g,(function(t,i){return e[i]||"nill"})),e[i.name]=t.formatValue(t.mathProcessing(t.valuesByIndex,t.resolveValues(s)),Fo({},i,{},{math:void 0})),e}),{})},text:function(){var t=this,e=this.item.settings.template;return e=e.replace(/%variable\[([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)\]%/g,(function(e,i){return t.variables[i]||"nill"})),e=e.replace(/%topic\[(\d*)\](\((.*)\))?%/g,(function(e,i,s,a){var n=t.valuesByIndex[i];return a&&(n=j()(n,"".concat(i).concat(a.slice(1)),void 0)),n||"nill"})),aa()(e,No)},contentHeight:function(){var t="calc(100% - 44px)";return!this.item.name&&this.blocked&&(t="calc(100% - 24px)"),t}},mixins:[js,Rs,mi]},Lo=Ao,zo=(i("f09b"),Object(nt["a"])(Lo,Oo,Eo,!1,null,null,null)),Ho=zo.exports,Do={lg:1200,md:996,sm:768,xs:480,xxs:0};function Po(t){t=t||window.innerWidth;var e=["xxs","xs","sm","md","lg"];return e.reduce((function(e,i){return t>Do[i]?i:e}),null)}var jo={name:"Board",props:["board","boards","widgets","values","canShare","isFrized","hasConnection","variablesValues"],data:function(){return{settingsModel:!1,boardSettingsModalModel:!1,currentSettings:void 0,editedWidgetId:void 0,editedWidgetTopics:void 0,colNum:12,rowHeight:50,breakpoints:Do,breakpoint:"xxs",operationMode:-1,variablesWrapperHeight:0,exportEnabled:!1,exportedWidgetsIndexes:null}},computed:{currentLayout:{get:function(){return this.board.layouts[this.breakpoint]},set:function(t){if(this.breakpoint!==this.$refs.grid&&this.$refs.grid.lastBreakpoint)return!1;this.$emit("update:layout",{layout:t,breakpoint:this.breakpoint})}},wrapperHeight:function(){var t=0;return this.board.settings.variables&&this.board.settings.variables.length&&(t+=this.variablesWrapperHeight),(this.isFrized&&this.board.name||!this.isFrized)&&(t+=50),"calc(100% - ".concat(t,"px)")},variablesListValues:function(){var t=this;return this.board.settings.variables.map((function(e){var i={};if(e.type&&0!==e.type){if(1===e.type){var s=Object.values(t.variablesValues[e.name]||{});i=s.reduce((function(e,i){var s=t.getVariableModel(i),a=s.label,n=s.value;return e[n]={label:a,value:n},e}),{}),Object.defineProperty(i,"length",{enumerable:!1,value:s.length})}}else i=e.values.reduce((function(e,i){var s=t.getVariableModel(i),a=s.label,n=s.value;return e[n]={label:a,value:n},e}),{}),Object.defineProperty(i,"length",{enumerable:!1,value:e.values.length});return i}))}},methods:{openSettings:function(){this.settingsModel=!0},hideSettingsHandler:function(){this.currentSettings=void 0,this.editedWidgetId=void 0,this.editedWidgetTopics=void 0},saveSettingsHandler:function(t){t=this.modifyWidgetByVariables(t),void 0!==this.editedWidgetId?this.$emit("edit:widget",{settings:t,widgetId:this.editedWidgetId,topics:this.editedWidgetTopics}):this.$emit("add:widget",t),this.operationMode=-1,this.setLastModifyBoard()},addWidgetHandler:function(){this.operationMode=vt["d"],this.openSettings()},editWidgetSettings:function(t){this.currentSettings=this.widgets[t],this.editedWidgetId=t,this.editedWidgetTopics=d()(this.currentSettings.topics),this.operationMode=vt["f"],this.openSettings()},resizeHandler:function(t,e,i){this.$emit("resized",{index:t,height:e,width:i}),this.setLastModifyBoard()},onResize:function(t){var e=t.width;this.breakpoint=Po(e)},shareHandler:function(){this.$emit("share")},uploadHandler:function(){this.$emit("upload")},duplicateWidgetHandler:function(t){this.currentSettings=F()(this.widgets[t]),J["default"].delete(this.currentSettings,"id"),this.operationMode=vt["e"],this.openSettings()},deleteWidgetHandler:function(t){this.$emit("delete:widget",{widgetId:t,settings:this.widgets[t]}),this.setLastModifyBoard()},fastBindHandler:function(t){this.$emit("fast-bind",t),this.setLastModifyBoard()},blockBoardHandler:function(){this.$emit("block"),this.setLastModifyBoard()},preventCollisionBoardHandler:function(){this.$emit("prevent"),this.setLastModifyBoard()},setLastModifyBoard:function(){this.$emit("modify")},onVariablesWrapperResize:function(t){var e=t.height;this.variablesWrapperHeight=e},changeVaribleHandler:function(t,e){var i=this;this.$set(this.board.activeVariables,t,e),this.board.widgetsIndexes.forEach((function(t){var e=F()(i.widgets[t]);e=i.modifyWidgetByVariables(e),i.$emit("edit:widget",{settings:e,widgetId:e.id,topics:d()(i.widgets[t].topics)})}))},modifyWidgetByVariables:function(t){var e=this,i=function(t){t.topicTemplate||(t.topicTemplate=t.topicFilter);var i=e.board.activeVariables;t.topicFilter=t.topicTemplate.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)%>/gim,(function(t,e){return i[e]||t}))},s=[];return t.dataTopics.length&&(t.dataTopics.forEach(i),s=[].concat(d()(s),d()(t.dataTopics))),t.settings.topics&&t.settings.topics.length&&(t.settings.topics.forEach(i),s=[].concat(d()(s),d()(t.settings.topics))),t.topics=D()(s.map((function(t){return t.topicFilter}))),t},naturalSort:function(t,e){return t.sort((function(t,i){if(e&&(t=t[e],i=i[e]),t="string"===typeof t?t.toLowerCase():t,i="string"===typeof i?i.toLowerCase():i,t!==i){var s=Number(t),a=Number(i);return s+""===t&&a+""===i?s-a:t>i?1:-1}}))},actionHandler:function(t){var e=this.board.activeVariables;t.topic=t.topic.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)%>/gim,(function(t,i){return e[i]||t})),this.$emit("action",t)},getVariableModel:function(t){var e,i;if(Array.isArray(t)){var s=Y()(t,2);e=s[0],i=s[1]}else i=t,e=t;return e="string"===typeof e?e:JSON.stringify(e),{label:e,value:i}},getVariableValues:function(t){var e=this.variablesListValues[t],i=this.board.settings.variables[t];return e=i.sortVarsBy?this.naturalSort(Object.values(e),"label"):this.naturalSort(Object.values(e),"value"),e},modifyBoardSettings:function(){this.boardSettingsModalModel=!0},editBoardHandler:function(t){var e=this;t.widgetsIndexes.forEach((function(i){var s=F()(e.widgets[i]);t.settings.variables.forEach((function(e){e.values.includes(t.activeVariables[e.name])||(t.activeVariables[e.name]=void 0)})),s=e.modifyWidgetByVariables(s,t),e.$emit("edit:widget",{settings:s,widgetId:s.id,topics:d()(e.widgets[i].topics)})})),this.$emit("edit:board",{id:this.board.id,board:t})},exportWidgets:function(t){this.exportedWidgetsIndexes[t]?this.$delete(this.exportedWidgetsIndexes,t):this.$set(this.exportedWidgetsIndexes,t,!0)},prepareExport:function(){this.exportedWidgetsIndexes={},this.exportEnabled=!0},doneExport:function(){var t=this,e=Object.keys(this.exportedWidgetsIndexes).map((function(e){return t.widgets[e]}));this.$emit("export-widgets",e),this.exportedWidgetsIndexes=null,this.exportEnabled=!1},importWidgets:function(){this.$emit("import-widgets")},share:function(t){this.canShare?t():this.$emit("share-error")}},components:{Settings:Fs,BoardSettings:Bt,Switcher:Ys,Informer:qa,MultiInformer:Ba,StaticInformer:Va,Clicker:Ha,Radial:tn,Linear:hn,Frame:xn,Singleselect:kn,Multiplier:Qn,Complex:Bn,Slider:ao,Color:yo,StatusIndicator:Co,MapLocation:Hn,MapRoute:Un,TextSender:Mo,Calculator:Ho,GridLayout:As.a.GridLayout,GridItem:As.a.GridItem,VirtualList:Nt.a}},Ro=jo,Wo=(i("ea5f"),Object(nt["a"])(Ro,W,U,!1,null,null,null)),Uo=Wo.exports,Go=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dash__boards"},[t.isFrized?t._e():i("q-btn",{staticClass:"absolute button--add",attrs:{fab:"",color:"grey-9",icon:"mdi-plus"},on:{click:t.openSettingsHandler}},[i("q-tooltip",[t._v("Add new board")])],1),Object.keys(t.remoteBoards).length?i("div",{staticClass:"remote-control text-center"},[i("span",{staticClass:"remote-control__button text-grey-9 bg-orange q-px-sm text-bold text-uppercase cursor-pointer shadow-3",on:{click:function(e){t.isPanelShowed=!t.isPanelShowed}}},[t._v(t._s(t.isPanelShowed?"hide":"saved boards"))])]):t._e(),i("transition",{attrs:{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated slideOutUp"}},[Object.keys(t.remoteBoards).length&&t.isPanelShowed?i("div",{staticClass:"boards__remote scroll bg-grey-3 q-pb-md q-pt-lg flex no-wrap"},t._l(t.remoteBoards,(function(e,s){return i("div",{key:"remote-"+s,staticClass:"q-my-xs q-px-sm q-my-sm remote__board"},[i("q-card",[i("q-item",{staticClass:"q-py-none q-pl-sm q-pr-none bg-grey-4",staticStyle:{"min-height":"20px"}},[i("q-item-section",{staticClass:"ellipsis"},[i("div",{staticClass:"ellipsis",staticStyle:{height:"24px","line-height":"24px"}},[t._v("\n                "+t._s(e.name||"*No name*")+"\n                "),e.name?i("q-tooltip",[t._v(t._s(e.name))]):t._e()],1),i("div",{staticClass:"ellipsis text-grey-9",staticStyle:{height:"14px","line-height":"14px","font-size":"14px"}},[t._v("\n                "+t._s(e.id)+"\n              ")])]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-dots-vertical",color:"grey-9"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[i("q-list",{attrs:{dense:""}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.canShare,clickable:""},on:{click:function(e){return e.stopPropagation(),t.share("share-uploaded",s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-link"}})],1),i("q-item-section",[t._v("Get link")])],1),i("q-separator"),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.$emit("delete-uploaded",s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-delete-outline",color:"red"}})],1),i("q-item-section",[t._v("Remove")])],1)],1)],1)],1)],1)],1),i("q-separator"),i("q-card-section",{staticClass:"text-center relative-position"},[e.settings.lastModify?i("div",{staticClass:"absolute-top-right text-grey-5 q-pr-xs",staticStyle:{"font-size":".7rem"}},[t._v(t._s(t.date(e.settings.lastModify,"DD-MM-YYYY HH:mm:ss")))]):t._e(),i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-download",size:"20px",color:"grey-9"},nativeOn:{click:function(e){return t.$emit("import",s)}}}),e.appVersion?i("span",{staticClass:"text-grey-5 absolute",staticStyle:{"font-size":"10px",bottom:"4px",left:"4px",cursor:"default"},attrs:{title:"MQTT Tiles version"}},[t._v("v."+t._s(e.appVersion))]):t._e(),i("span",{staticClass:"text-bold text-white absolute bg-purple-6 rounded-borders q-px-xs",staticStyle:{"font-size":"10px",bottom:"4px",right:"4px",cursor:"default"},attrs:{title:"Widgets count"}},[t._v(t._s(e.widgetsIndexes.length))])],1)],1)],1)})),0):t._e()]),i("q-toolbar",{staticClass:"bg-white"},[i("q-toolbar-title",{staticClass:"text-grey-9"},[t._v("Boards")]),t.connectionSettings?[t.attachMode?i("q-btn",{attrs:{flat:"",color:"green"},on:{click:t.attachHandler}},[i("div",{staticClass:"flex flex-center"},[i("q-icon",{attrs:{name:"mdi-check"}}),t._v("\n          Attach\n        ")],1)]):i("q-btn",{attrs:{icon:"mdi-link-variant",flat:"",color:"grey-9"},on:{click:function(e){t.attachMode=!0}}},[i("q-tooltip",[t._v("Attach boards to connection")])],1)]:t._e(),t._t("actions")],2),i("div",{staticClass:"q-px-sm scroll boards__wrapper",style:{height:t.isPanelShowed?"calc(100% - 199px)":"calc(100% - 50px)"}},[t.boardsKeys.length||Object.keys(t.boardsConfigs).length?i("div",{staticClass:"row"},[t._l(t.boards,(function(e,s){return i("div",{key:s,staticClass:"q-pt-md q-px-sm col-xl-4 col-md-6 col-sm-6 col-xs-12 relative-position"},[t.attachMode?i("div",{staticClass:"absolute-top-left absolute-bottom-right q-mt-md q-mx-sm flex flex-center",staticStyle:{"background-color":"rgba(255, 255, 255, .4)","z-index":"1"}},[i("q-btn",{staticClass:"absolute-top-left absolute-bottom-right",staticStyle:{width:"100%"},attrs:{icon:"mdi-check",color:t.currentAttachedBoard.includes(s)?"green":"grey",size:"4rem",flat:""},on:{click:function(e){return t.changeAttachedBoards(s)}}})],1):t._e(),i("q-card",[i("q-item",{staticClass:"q-py-none q-px-sm bg-grey-4",staticStyle:{"min-height":"40px"}},[i("q-item-section",{staticClass:"ellipsis"},[i("div",{staticClass:"ellipsis",staticStyle:{height:"24px","line-height":"24px"}},[t._v("\n                "+t._s(e.name||"*No name*")+"\n                "),e.name?i("q-tooltip",[t._v(t._s(e.name))]):t._e()],1),i("div",{staticClass:"ellipsis text-grey-9",staticStyle:{height:"14px","line-height":"14px","font-size":"14px"}},[t._v("\n                "+t._s(e.id)+"\n              ")])]),i("q-item-section",{attrs:{side:""}},[i("div",[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-link",color:"grey-"+(t.canShare?9:7),ripple:t.canShare},nativeOn:{click:function(e){return t.share("share",s)}}},[i("q-tooltip",[t._v("Get link")])],1),i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-fullscreen",color:"grey-9"},nativeOn:{click:function(e){return t.$emit("select",s)}}},[i("q-tooltip",[t._v("Show full board")])],1),i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-dots-vertical",color:"grey-9"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[i("q-list",{attrs:{dense:""}},[t.connectionSettings?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.$emit("export",s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-cloud-upload-outline"}})],1),i("q-item-section",[t._v("Save to broker")])],1):t._e(),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.$emit("export-as",s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-export-variant"}})],1),i("q-item-section",[t._v("Export")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.openEditSettingsHandler(s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-settings"}})],1),i("q-item-section",[t._v("Settings")])],1),i("q-separator"),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return e.stopPropagation(),t.$emit("delete",s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-delete-outline",color:"red"}})],1),i("q-item-section",[t._v("Remove")])],1)],1)],1)],1)],1)])],1),i("q-separator"),i("q-card-section",{staticClass:"row relative-position",class:{"bg-grey-2":!e.shortcutsIndexes.length}},[i("div",{staticClass:"text-grey-8 col-12 q-mb-sm",staticStyle:{"font-size":"15px"}},[t._v("Shortcuts")]),e.shortcutsIndexes.length?t._l([0,1,2,3],(function(s,a){return i("div",{key:a,staticClass:"col-3 q-px-xs",staticStyle:{"margin-bottom":"2px"}},[t.widgets[e.shortcutsIndexes[a]]&&void 0!==t.values[e.shortcutsIndexes[a]]?i(t.widgets[e.shortcutsIndexes[a]].type,{tag:"component",attrs:{item:t.widgets[e.shortcutsIndexes[a]],value:t.values[e.shortcutsIndexes[a]],index:e.shortcutsIndexes[a],mini:!0},on:{action:function(i){t.actionHandler(e.id,i)}}}):t._e()],1)})):i("div",{staticClass:"shortcuts--empty col-12",staticStyle:{"min-height":"89px","margin-bottom":"2px"}},[i("div",{staticClass:"text-center text-grey-8 q-mb-sm q-mt-sm",staticStyle:{"font-size":"1.2rem"}},[t._v("You have no shortcuts")]),i("div",{staticClass:"text-center text-grey-8"},[t._v("You can add one on "),i("q-btn",{attrs:{icon:"mdi-fullscreen",color:"grey-8",size:"sm",dense:"",unelevated:"",label:"full board view"},on:{click:function(e){return t.$emit("select",s)}}})],1)]),e.settings.lastModify?i("div",{staticClass:"absolute-top-right text-grey-5 q-pr-xs",staticStyle:{"font-size":".7rem"}},[t._v(t._s(t.date(e.settings.lastModify,"DD-MM-YYYY HH:mm:ss")))]):t._e(),i("span",{staticClass:"text-bold text-white absolute bg-purple-6 rounded-borders q-px-xs",staticStyle:{"font-size":"10px",bottom:"4px",right:"4px",cursor:"default"},attrs:{title:"Widgets count"}},[t._v(t._s(e.widgetsIndexes.length))]),i("div",{staticClass:"absolute-bottom-left q-ml-xs"},t._l(e.settings.variables,(function(e){return i("q-icon",{key:e.name,staticClass:"q-mr-xs",attrs:{name:t.getIcon(e),color:"grey-7"}},[i("q-tooltip",[t._v("Variable: "+t._s(e.name))])],1)})),1)],2)],1)],1)})),t.attachMode?t._l(t.boardsConfigs,(function(e,s){return i("div",{key:s,staticClass:"q-pt-md q-px-sm col-xl-4 col-md-6 col-sm-6 col-xs-12 relative-position"},[i("div",{staticClass:"absolute-top-left absolute-bottom-right q-mt-md q-mx-sm flex flex-center",staticStyle:{"background-color":"rgba(255, 255, 255, .4)","z-index":"1"}},[i("q-btn",{staticClass:"absolute-top-left absolute-bottom-right",staticStyle:{width:"100%"},attrs:{icon:"mdi-check",color:t.currentAttachedBoard.includes(s)?"green":"grey",size:"4rem",flat:""},on:{click:function(e){return t.changeAttachedBoards(s)}}})],1),i("q-card",[i("q-item",{staticClass:"q-py-none q-px-sm bg-grey-4"},[i("q-item-section",{staticClass:"ellipsis"},[i("div",{staticClass:"ellipsis",staticStyle:{height:"24px","line-height":"24px"}},[t._v("\n                  "+t._s(e.name||"*No name*")+"\n                  "),e.name?i("q-tooltip",[t._v(t._s(e.name))]):t._e()],1),i("div",{staticClass:"ellipsis text-grey-9",staticStyle:{height:"14px","line-height":"14px","font-size":"14px"}},[t._v("\n                  "+t._s(e.id)+"\n                ")])])],1),i("q-separator"),i("q-card-section",{staticClass:"row relative-position",class:{"bg-grey-2":!e.shortcutsIndexes.length}},[i("div",{staticClass:"text-grey-8 col-12 q-mb-sm",staticStyle:{"font-size":"15px"}},[t._v("Shortcuts")]),e.shortcutsIndexes.length?t._l(e.shortcutsIndexes.map((function(t){return e.widgetsIndexes.filter((function(e){return e.id===t}))[0]})),(function(e,s){return i("div",{key:s,staticClass:"col-3 q-px-xs",staticStyle:{"margin-bottom":"2px"}},[i("div",{staticStyle:{"text-align":"center"}},[i("div",{class:["bg-"+e.color+"-1"],staticStyle:{height:"60px",width:"60px","line-height":"60px",margin:"0 auto","border-radius":"5px"}},[i("div",{staticClass:"ellipsis"},[t._v("\n                        N/A\n                      ")])]),i("div",{staticClass:"ellipsis q-mt-sm"},[t._v(t._s(e.name))])])])})):i("div",{staticClass:"shortcuts--empty col-12",staticStyle:{"min-height":"89px","margin-bottom":"2px"}},[i("div",{staticClass:"text-center text-grey-8 q-mb-sm q-mt-sm",staticStyle:{"font-size":"1.2rem"}},[t._v("You have no shortcuts")]),i("div",{staticClass:"text-center text-grey-8"},[t._v("You can add one on "),i("q-btn",{attrs:{icon:"mdi-fullscreen",color:"grey-8",size:"sm",dense:"",label:"full board view"},on:{click:function(e){return t.$emit("select",s)}}})],1)]),e.settings.lastModify?i("div",{staticClass:"absolute-top-right text-grey-5 q-pr-xs",staticStyle:{"font-size":".7rem"}},[t._v(t._s(t.date(e.settings.lastModify,"DD-MM-YYYY HH:mm:ss")))]):t._e(),i("span",{staticClass:"text-bold text-white absolute bg-purple-6 rounded-borders q-px-xs",staticStyle:{"font-size":"10px",bottom:"4px",right:"4px",cursor:"default"},attrs:{title:"Widgets count"}},[t._v(t._s(e.widgetsIndexes.length))])],2)],1)],1)})):t._e()],2):i("div",{staticClass:"text-grey-9 text-bold wrapper--empty"},[i("div",{staticClass:"q-mb-sm"},[t._v("No boards")]),t.isFrized?t._e():i("div",[i("q-btn",{attrs:{color:"grey-9",icon:"mdi-plus-circle-outline",label:"New board"},on:{click:t.openSettingsHandler}})],1)])]),t.settingsModalModel?i("board-settings",{attrs:{settings:t.editedBoardModel,boards:t.boards},on:{add:t.addBoardHandler,edit:t.editBoardHandler,hide:t.hideModalHandler},model:{value:t.settingsModalModel,callback:function(e){t.settingsModalModel=e},expression:"settingsModalModel"}}):t._e()],1)},Yo=[],Jo={name:"Boards",props:["boards","boardsConfigs","widgets","values","remoteBoards","canShare","isFrized","connectionSettings"],data:function(){return{isPanelShowed:!1,settingsModalModel:!1,editedBoardModel:null,attachMode:!1,currentAttachedBoard:this.attachedBoards?d()(this.attachedBoards):[]}},computed:{attachedBoards:function(){return this.connectionSettings&&this.connectionSettings.attachedBoards||[]},boardsKeys:function(){return Object.keys(this.boards)}},methods:{date:oi["a"].formatDate,openSettingsHandler:function(){this.settingsModalModel=!0},openEditSettingsHandler:function(t){this.editedBoardModel=F()(this.boards[t]),this.openSettingsHandler()},editBoardHandler:function(t){var e=this;t.widgetsIndexes.forEach((function(i){var s=F()(e.widgets[i]);t.settings.variables.forEach((function(e){e.values.includes(t.activeVariables[e.name])||(t.activeVariables[e.name]=void 0)})),s=e.modifyWidgetByVariables(s,t),e.$emit("edit:widget",{settings:s,widgetId:s.id,topics:d()(e.widgets[i].topics)})})),this.$emit("edit",{id:this.editedBoardModel.id,board:t}),this.editedBoardModel=null},addBoardHandler:function(t){this.$emit("add",t)},hideModalHandler:function(){this.editedBoardModel=null},modifyWidgetByVariables:function(t,e){var i=function(t){t.topicTemplate||(t.topicTemplate=t.topicFilter);var i=e.activeVariables;t.topicFilter=t.topicTemplate.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)%>/gim,(function(t,e){return i[e]||t}))},s=[];return t.dataTopics.length&&(t.dataTopics.forEach(i),s=[].concat(d()(s),d()(t.dataTopics))),t.settings.topics&&t.settings.topics.length&&(t.settings.topics.forEach(i),s=[].concat(d()(s),d()(t.settings.topics))),t.topics=D()(s.map((function(t){return t.topicFilter}))),t},actionHandler:function(t,e){var i=this.boards[t].activeVariables;e.topic=e.topic.replace(/<%([a-zA-Z0-9-+&@#/%?=~_|!:,.;\s]*)%>/gim,(function(t,e){return i[e]||t})),this.$emit("action",e)},attachHandler:function(){this.$emit("change:attach",this.currentAttachedBoard),this.attachMode=!1},changeAttachedBoards:function(t){var e=this.currentAttachedBoard.indexOf(t),i=-1!==e;i?this.$delete(this.currentAttachedBoard,e):this.currentAttachedBoard.push(t)},getIcon:function(t){var e="";return t.preset&&("devices"===t.preset?e="mdi-developer-board":"channels"===t.preset?e="mdi-call-merge":"calcs"===t.preset?e="mdi-calculator-variant":"custom"===t.preset&&(e=1===t.type?"mdi-alpha-v-box":"mdi-variable")),e},share:function(t,e){this.canShare?this.$emit(t,e):this.$emit("share-error")}},watch:{boardsConfigs:{handler:function(t){this.currentAttachedBoard=this.attachedBoards&&this.attachedBoards.length?d()(this.attachedBoards):[]},immediate:!0,deep:!0},connectionSettings:function(){!this.boardsKeys.length&&this.attachedBoards.length?this.$emit("change:attach",[]):this.attachMode=!1,this.currentAttachedBoard=this.attachedBoards&&this.attachedBoards.length?d()(this.attachedBoards):[]}},components:{BoardSettings:Bt,Switcher:Ys,Clicker:Ha,Informer:qa,Linear:hn,Radial:tn,Singleselect:kn,Slider:ao,Color:yo,StatusIndicator:Co}},Ko=Jo,Zo=(i("e7d1"),Object(nt["a"])(Ko,Go,Yo,!1,null,null,null)),Qo=Zo.exports;function Xo(t){return[t.settings.topic]}function tr(t){return t.settings.mode===De?[t.dataTopics[0].topicFilter]:t.settings.items.map((function(t){return t.actionTopic}))}function er(t){return t.settings.mode===Pt?[t.settings.falseActionTopic,t.settings.trueActionTopic]:1===t.topics.length?[t.topics[0]]:t.settings.mode===Dt?[t.settings.actionTopic]:void 0}function ir(t){return[t.settings.topics[0].topicFilter]}function sr(t){return t.reduce((function(t,e){switch(e.type){case"switcher":t=[].concat(d()(t),d()(er(e)));break;case"singleselect":t=[].concat(d()(t),d()(tr(e)));break;case"clicker":t=[].concat(d()(t),d()(Xo(e)));break;case"textSender":t=[].concat(d()(t),d()(ir(e)));break}return t}),[])}var ar=i("193b"),nr=i.n(ar);function or(t,e,i,s){var a=i.split("/"),n=t.topic.split("/"),o=e,r=[];if(a.forEach((function(t,e){r.push(n[e])})),t.payload.length){var l;try{l=JSON.parse(t.payload.toString())}catch(m){l=t.payload.toString()}r.length?nr()(o,r,l,Object):o=l}else if(r.length){var c=r.slice(0,-1).join("."),d=r.slice(-1)[0],u=c?j()(o,c,null):o;u&&J["default"].delete(u,d)}else o=null;return o}function rr(t,e,i,s){if(!t||i!==s.dataTopics[0].topicFilter)return t;var a=e?F()(e):{};return t.forEach((function(t){a=or(t,a,i,s)})),a}function lr(t,e,i,s){return t&&(t.length&&t.slice(-1)[0]||e)||null}var cr={multiplier:rr},dr=function(t){return cr[t]||lr},ur=i("b697"),mr=i.n(ur),pr={"1.5.3":function(t){return t.settings.minWidth=1,t},"1.5.4":function(t){return t.settings.icon="",t},"1.10.6":function(t){var e=t.settings;return"string"===typeof e.topic&&(e.topics=[{topicTemplate:e.topic,topicFilter:e.topic,payloadType:0,payloadField:"",payloadNameField:""}]),t},"1.10.7":function(t){var e=t.settings;return"string"===typeof e.payload&&e.topics.forEach((function(t){t.payload=e.payload})),t}},hr={"1.5.4":function(t){var e=t.settings;if(void 0===e.mode&&(e.mode=Be),e.mode===Be&&(e.items=[],e.topics=[]),e.mode===Ee){var i=F()(t.dataTopics[0]);e.maxTopicsLength=0,e.items=[{label:"New item",template:e.template,topic:i}],e.topics=[i],t.dataTopics=[],delete e.template}return t},"1.10.1":function(t){var e=t.settings;return e.readyMessage="",t},"1.10.3":function(t){var e=t.settings;return e.initMessage="",t}},gr={"1.5.4":function(t){return t.settings.trueIcon="",t.settings.falseIcon="",t}},fr={"1.11.4":function(t){var e=t.settings;return e.items=[{name:"Item 1",lat:e.topics[0],lon:e.topics[1]}],t}},vr={"1.11.4":function(t){var e=t.settings;return e.items=[{name:"Item 1",route:e.topics[0]}],t}},br={clicker:pr,frame:hr,switcher:gr,"map-location":fr,"map-route":vr};function yr(t,e,i){return t.reduce((function(t,s){var a=br[s.type]||{},n=Object.keys(a);return n.forEach((function(t){if(mr.a.compare(t,e,">")&&mr.a.compare(t,i,"<="))try{a[t](s)}catch(n){console.log(n)}})),t.push(s),t}),[])}var xr=yr,Sr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{"prevent-close":""},model:{value:t.dialogModel,callback:function(e){t.dialogModel=e},expression:"dialogModel"}},[i("div",{staticClass:"bg-white",staticStyle:{"min-width":"300px"}},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-h5 text-bold q-mb-sm"},[t._v(t._s(t.title))]),i("div",{staticClass:"text-grey-6"},[t._v(t._s(t.message))]),i("div",{staticClass:"text-grey-6"},[i("q-checkbox",{attrs:{color:"grey-9",label:"Rename to save a copy"},model:{value:t.isNeedCopy,callback:function(e){t.isNeedCopy=e},expression:"isNeedCopy"}}),i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",color:"grey-9",disable:!t.isNeedCopy,label:"Name",error:t.isNeedCopy&&t.oldName===t.name},model:{value:t.nameModel,callback:function(e){t.nameModel=e},expression:"nameModel"}})],1)]),i("div",{staticClass:"flex justify-end q-mt-md q-pa-sm"},[i("q-btn",{attrs:{color:"grey-9",flat:"",label:"Close"},on:{click:function(e){t.mode="cancel"}}}),i("q-btn",{attrs:{color:"grey-9",flat:"",label:t.isNeedCopy?t.loadLabel:t.replaceLabel,disabled:t.isNeedCopy&&t.oldName===t.name},on:{click:function(e){t.mode="ok"}}})],1)])])},qr=[],_r={props:{initName:String},data:function(){return{dialogModel:!1,isNeedCopy:!1,name:"",oldName:"",mode:"",replaceLabel:"Replace",loadLabel:"Save"}},computed:{title:function(){return this.isNeedCopy?"Save board":"Replace board"},message:function(){return this.isNeedCopy?"Save the new board?":"Such board exists. Replace?"},nameModel:{get:function(){return this.name},set:function(t){this.$emit("change:name",t),this.name=t}}},methods:{open:function(t){var e=this;return this.replaceLabel=t&&t.replaceLabel||"Replace",this.loadLabel=t&&t.loadLabel||"Save",this.$nextTick((function(){e.name=e.initName,e.oldName=e.initName})),this.dialogModel=!0,new Promise((function(t,i){var s=setInterval((function(){e.mode&&("ok"===e.mode?t(e.oldName):i(new Error("canceled")),e.mode="",e.isNeedCopy=!1,e.dialogModel=!1,clearInterval(s))}),50)}))}}},wr=_r,Cr=Object(nt["a"])(wr,Sr,qr,!1,null,null,null),kr=Cr.exports,Tr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{maximized:t.$q.platform.is.mobile},on:{hide:t.close},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[i("div",{style:{width:t.$q.platform.is.mobile?"100%":"50vw"}},[i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title",[t._v("\n        "+t._s(t.mode?"Export":"Import")+"\n      ")])],1),i("div",{staticClass:"scrol bg-white q-pa-md",style:{height:t.$q.platform.is.mobile?"calc(100% - 100px)":"50vh"}},[1===t.mode?[i("div",{staticClass:"export-modal-view"},[i("div",{staticClass:"export-modal-view__string",staticStyle:{height:"45%"}},[i("q-input",{attrs:{outlined:"",dense:"","hide-bottom-space":"",rows:7,"input-style":"resize: none;",type:"textarea",readonly:!0,label:"Config",color:"grey-9"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[i("q-btn",{attrs:{slot:"append",dense:"",flat:"",icon:"mdi-content-copy"},on:{click:t.copyString},slot:"append"})],1)],1),i("div",{staticClass:"text-center text-italic q-mt-lg",staticStyle:{height:"10%","font-size":"2rem"}},[t._v("or")]),i("div",{staticClass:"export-modal-view__file flex flex-center q-mt-lg",staticStyle:{height:"45%"}},[i("q-btn",{attrs:{label:"Download file",size:"1.6rem",color:"grey-9",flat:"",icon:"mdi-download"},on:{click:t.downloadFile}})],1)])]:0===t.mode?[i("div",{staticClass:"import-modal-view full-height"},[i("div",{staticClass:"export-modal-view__string",staticStyle:{height:"45%"}},[i("q-input",{staticClass:"full-height",attrs:{outlined:"",dense:"","hide-bottom-space":"",row:7,"input-style":"resize: none;",type:"textarea",label:"Config",color:"grey-9",placeholder:"Put exported config here"},model:{value:t.importData,callback:function(e){t.importData=e},expression:"importData"}})],1),i("div",{staticClass:"text-center text-italic",staticStyle:{height:"10%","font-size":"2rem"}},[t._v("or")]),i("div",{staticClass:"export-modal-view__file flex flex-center relative-position rounded-borders",staticStyle:{height:"45%",border:"dashed 1px black"}},[t.canAddFiles?i("q-btn",{staticClass:"absolute-top-right",staticStyle:{top:"-20px",right:"8px","z-index":"1"},attrs:{icon:"mdi-plus",color:"grey-9","fab-mini":""},on:{click:t.pickFiles}},[i("q-tooltip",[t._v("Pick Files")])],1):t._e(),i("q-uploader",{ref:"uploader",staticClass:"full-width full-height",attrs:{url:"",color:"grey-9",accept:".txt","hide-upload-btn":""},on:{added:t.preview,removed:function(e){t.canAddFiles=!0}},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[e.isUploading?i("q-spinner",{staticClass:"q-uploader__spinner"}):t._e(),i("div",{staticClass:"col"},[i("div",{staticClass:"q-uploader__title"},[t._v("Upload your files")])]),e.canAddFiles?i("q-btn",{attrs:{type:"a",icon:"add_box",round:"",dense:"",flat:""}},[i("q-uploader-add-trigger"),i("q-tooltip",[t._v("Pick Files")])],1):t._e()],1)]}},{key:"list",fn:function(e){return[e.files.length?t._e():i("div",{staticClass:"text-center"},[i("q-icon",{attrs:{name:"mdi-file-import-outline",size:"6rem",color:"grey-9"}}),i("div",{staticStyle:{"font-size":"18px"}},[t._v("Select an importing file.")])],1),i("q-list",{attrs:{separator:""}},t._l(e.files,(function(s){return i("q-item",{key:s.name},[i("q-item-section",[i("q-item-label",{staticClass:"full-width ellipsis"},[t._v("\n                        "+t._s(s.name)+"\n                      ")]),i("q-item-label",{attrs:{caption:""}},[t._v("\n                        "+t._s(s.__sizeLabel)+"\n                      ")])],1),s.__img?i("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[i("img",{attrs:{src:s.__img.src}})]):t._e(),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"red",size:"12px",flat:"",dense:"",round:"",icon:"mdi-delete"},on:{click:function(t){return e.removeFile(s)}}})],1)],1)})),1)]}}])})],1)])]:t._e()],2),i("q-toolbar",{staticClass:"bg-grey-9"},[i("q-toolbar-title"),i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",color:"white",dense:""},on:{click:t.close}},[t._v("Close")]),0===t.mode?i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:"",color:"white"},on:{click:t.importHandler}},[t._v("Import")]):t._e()],1)],1)])},Vr=[],$r=i("cdde"),Ir={props:["mode","data"],data:function(){return{opened:!1,canAddFiles:!0,reader:new FileReader,importData:""}},methods:{open:function(){this.opened=!0},close:function(){this.opened=!1,this.canAddFiles=!0,this.$emit("close")},preview:function(t){this.canAddFiles=!1,this.reader.readAsText(t[0])},importHandler:function(){var t=this;this.close(),this.$nextTick((function(){t.$emit("import",t.importData),t.importData=""}))},copyString:function(){var t=this;Object($r["a"])(this.data).then((function(e){t.$q.notify({color:"positive",icon:"content_copy",message:"Copied",timeout:1e3,position:"bottom-left"})}),(function(e){t.$q.notify({color:"negative",icon:"content_copy",message:"Error coping",timeout:1e3,position:"bottom-left"})}))},downloadFile:function(){var t=document.createElement("a");t.style.display="none";var e=new Blob([this.data],{type:"text/plain"}),i=t.href=URL.createObjectURL(e);t.download="data.txt",document.body.appendChild(t),t.click(),setTimeout((function(){document.body.removeChild(t),window.URL.revokeObjectURL(i)}),0)},pickFiles:function(){console.log(this.$refs.uploader),this.$refs.uploader.pickFiles()}},created:function(){var t=this;this.reader.onload=function(e){t.importData=e.target.result,t.$nextTick((function(){t.importHandler()}))}}},Mr=Ir,Or=Object(nt["a"])(Mr,Tr,Vr,!1,null,null,null),Er=Or.exports,Br=i("9224"),Fr={"1.6.5":function(t){var e=t.settings.variables||[];return e.forEach((function(t,e){t.type?t.topic.payloadNameField="":t.values=t.values.map((function(t){return[t,t]}))})),t}};function Nr(t,e,i){return t.map((function(t){return Ar(t,e,i)}))}function Ar(t,e,i){var s=Fr,a=Object.keys(s);return a.forEach((function(a){if(mr.a.compare(a,e,">")&&mr.a.compare(a,i,"<="))try{s[a](t)}catch(n){console.log(n)}})),t}var Lr={methods:{migrateBoard:Ar,migrateBoards:Nr}};function zr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Hr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(i),!0).forEach((function(e){f()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zr(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Dr=function(t){Object.keys(t).forEach((function(e){t[e].status=vt["k"]}))},Pr=function(t,e){return t=F()(t),e=F()(e),Dr(e),Object.keys(t).forEach((function(i){t[i].widgetsIndexes=t[i].widgetsIndexes.map((function(t){return e[t]})),t[i].appVersion=Br["a"]})),t},jr=function(t,e){return t=F()(t),e=F()(e),Dr(e),t.widgetsIndexes=t.widgetsIndexes.map((function(t){return e[t]})),t.appVersion=Br["a"],t},Rr=function(t,e){return A()(t,(function(t){return t===e}))},Wr={name:"Dash",props:["clientSettings","initBoards"],data:function(){return{fullView:!(this.clientSettings&&this.clientSettings.flespiBoard),client:void 0,connack:void 0,clientStatus:!1,clientErrors:[],boards:{},boardsConfigs:{},widgets:{},subscriptions:{},subscriptionsStatuses:{},subscriptionsIndetifiers:{},currentSubscriptionIndetifier:0,widgetsBySubscription:{},activeBoardId:void 0,colsByBreakpoint:{lg:12,md:10,sm:6,xs:4,xxs:2},boardsFromConnection:{},exportBoardId:"",expireMessagesProcess:0,expireMessagesStore:{},importExportMode:void 0,importExportData:void 0,importExportEntity:void 0,values:{},boardsVariablesValues:{}}},computed:{boardsIds:function(){return Object.keys(this.boards)},subscriptionsTopics:function(){return Object.keys(this.subscriptions)},canShareByClientToken:function(){return this.connack&&this.connack.properties&&this.connack.properties.userProperties&&this.connack.properties.userProperties.token&&1!==JSON.parse(this.connack.properties.userProperties.token).access.type},canShare:function(){var t=this.clientSettings&&this.clientSettings.syncCreds&&this.clientSettings.syncCreds.length;return this.clientStatus&&!!this.clientSettings&&-1!==this.clientSettings.host.indexOf("flespi")&&!this.clientSettings.flespiBoard&&(t||this.canShareByClientToken)},isAttachedBoardsMode:function(){return!!this.clientSettings&&!!this.clientSettings.attachedBoards}},methods:{uid:T["a"],valuesProcessing:function(){var t=this,e=this.values;Object.keys(this.widgets).forEach((function(i){t.values[i]||t.$set(t.values,i,{});var s=e[i],a=t.widgets[i],n=!1,o=a.topics.reduce((function(e,o){var r=t.subscriptionsStatuses[o]&&t.subscriptions[o],l=!!s[o];l||(e[o]={}),l&&r&&1===r.length&&(r=[]);var c=dr(a.type)(r,j()(t.values,"".concat(i,"['").concat(o,"']"),void 0),o,a);return s[o]!==c&&(n=!0),e[o]=c,e}),{});n&&t.$set(t.values,i,o)}))},boardsVariablesValuesProcessing:function(){var t=this;this.boardsVariablesValues=this.boardsIds.reduce((function(e,i){var s=t.boards[i],a=s.settings.variables&&s.settings.variables.filter((function(t){return 1===t.type}))||[];e[i]||(e[i]={});var n=a.reduce((function(e,i,s){var a=i.topic.topicFilter,n=t.subscriptionsStatuses[a]&&t.subscriptions[a]?t.subscriptions[a]:[];return e[i.name]||(e[i.name]={}),n.forEach((function(s){var a=i.topic.topicFilter;if(!t.subscriptions[a])return!1;var n=t.getValueByTopic(s.payload,i.topic),o=s.topic;n&&"N/A"!==n?e[i.name][o]=n:e[i.name][o]&&delete e[i.name][o]})),e}),Object.assign({},e[i]));return t.$set(e,i,n),e}),Object.assign({},this.boardsVariablesValues))},busMessagesProcessing:function(){this.valuesProcessing(),this.boardsVariablesValuesProcessing(),this.clearMessages()},clearMessages:function(){var t=this;this.subscriptionsTopics.forEach((function(e){Array.isArray(t.subscriptions[e])&&t.subscriptions[e].splice(0,t.subscriptions[e].length-1)}))},getVariableValue:function(t,e,i){var s={},a=e.topic.topicFilter;if(!this.subscriptions[a])return s;var n=this.getValueByTopic(i.payload,e.topic),o=i.topic;return n&&"N/A"!==n?this.$set(s,o,n):s[o]&&this.$delete(s,o),s},boardsVariablesValuesClear:function(){var t=this;this.boardsIds.forEach((function(e){var i=t.boards[e],s=i.settings.variables&&i.settings.variables.filter((function(t){return 1===t.type}))||[];t.boardsVariablesValues[e]={},s.forEach((function(i,s){t.boardsVariablesValues[e][i.name]={}}))}))},checkTopic:function(t,e){if(t===e)return!0;var i=t.split("/"),s=e.split("/");return"$share"===s[0]&&s.splice(0,2),(s.length===i.length||"#"===s[s.length-1])&&s.reduce((function(t,e,s){return"#"===e||"+"===e?t&&!0:t&&e===i[s]}),!0)},clearObject:function(t){var e=this;return Object.keys(t).reduce((function(i,s){var a=t[s];return a instanceof Object&&(a=e.clearObject(a),Object.keys(a).length||(a=void 0)),void 0!==a&&null!==a&&(i[s]=a),i}),{})},getSharedTopicFilter:function(t){return t.replace(/^\$share\/[^/]+\//,"")},resolveTopics:function(t,e){0===e.indexOf("$share")&&(e=this.getSharedTopicFilter(e));var i=e.split("/"),s=t.split("/");return(s.length===i.length||"#"===i[i.length-1])&&i.reduce((function(t,e,i){return"#"===e||"+"===e?t&&!0:t&&e===s[i]}),!0)},errorHandler:function(t,e){t.timestamp=Date.now(),this.clientErrors.push(t),e&&this.showError(t)},showError:function(t){this.$q.notify({message:t.message,color:"negative",icon:"mdi-alert-outline",timeout:2e3})},isConnectivityIsEqual:function(t,e){return!!t&&!!e&&t.clientId===e.clientId&&t.host===e.host&&t.clean===e.clean&&t.keapalive===e.keapalive&&t.username===e.username&&t.password===e.password&&t.protocolVersion===e.protocolVersion&&t.syncNamespace===e.syncNamespace&&b()(t.properties,e.properties)},initClient:function(){var t=this,e=function(){t.clientStatus=!1,t.$emit("change-status",!1)},i=this.clearObject(this.clientSettings),s=k.connect(i.host,i);s.on("message",(function(e,s,a){if(-1!==e.indexOf(i.syncNamespace))return t.savedBoardProcess(e.split("/").slice(-1)[0],s),!1;t.setValueByTopic(e,Hr({},a,{timestamp:Date.now()})),t.expireMessagesHandler(a),t.debouncedBusMessagesProcessing()})),s.on("connect",(function(e){t.connack=e,t.clientStatus=!0,t.$emit("change-status",!0),t.initWidgets(),t.clientSettings.flespiBoard||t.getSyncedBoards(),t.$integrationMode&&t.$integrationBus.send("connected")})),s.on("error",(function(e){t.errorHandler(e,!1)})),s.on("close",e),s.on("offline",(function(){e(),t.expireMessagesProcessingStop()})),s.on("end",e),this.client=s},createClient:function(){this.initClient()},setValueByTopic:function(t,e){var i=this;if(null===e)return this.$set(this.subscriptions,t,e),!0;var s=e&&e.properties&&e.properties.subscriptionIdentifier;s?(Array.isArray(s)||(s=[s]),s.forEach((function(t){var s=i.subscriptionsIndetifiers[t];i.writeValueByTopic(s,e)}))):this.subscriptionsTopics.forEach((function(s){i.checkTopic(t,s)&&i.writeValueByTopic(s,e)}))},writeValueByTopic:function(t,e){Array.isArray(this.subscriptions[t])?this.subscriptions[t].push(e):this.$set(this.subscriptions,t,[e])},expireMessagesHandler:function(t){t.properties&&t.properties.messageExpiryInterval?(this.expireMessagesProcess||this.expireMessagesProcessing(),this.expireMessagesStore[t.topic]=Date.now()+Math.floor(1e3*t.properties.messageExpiryInterval)):this.expireMessagesStore[t.topic]&&this.$delete(this.expireMessagesStore,t.topic)},expireMessagesProcessing:function(){var t=this;this.expireMessagesProcess=setInterval((function(){var e=Date.now();Object.keys(t.expireMessagesStore).forEach((function(i){var s=t.expireMessagesStore[i];s<e&&(t.subscriptionsTopics.forEach((function(e){t.checkTopic(i,e)&&t.subscriptions[e]&&t.subscriptions[e].push({topic:i,payload:$()().slice(0,-1)})})),t.$delete(t.expireMessagesStore,s))}))}),3e4)},expireMessagesProcessingStop:function(){this.expireMessagesProcess&&clearInterval(this.expireMessagesProcess),this.expireMessagesStore={},this.expireMessagesProcess=0},subscribe:function(){var t,e,i,s,a=this,n=arguments,o=arguments;return h.a.async((function(r){while(1)switch(r.prev=r.next){case 0:if(!this.client){r.next=4;break}return t=Array.prototype.slice.call(o),e=t[0],i=t[1],5===this.clientSettings.protocolVersion&&(i||(i={}),i.properties||(i.properties={}),s=Number(Object.keys(this.subscriptionsIndetifiers).find((function(t){return a.subscriptionsIndetifiers[t]===e})))||++this.currentSubscriptionIndetifier,i.properties.subscriptionIdentifier=s,this.subscriptionsIndetifiers[s]=e),r.abrupt("return",this.client.subscribe(e,i).then((function(){var t=n[0];return a.subscriptionsStatuses[t]=!0,n})).catch((function(t){a.errorHandler(t)})));case 4:case"end":return r.stop()}}),null,this)},unsubscribe:function(t){var e,i,s,a,n=this,o=arguments,r=arguments;return h.a.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.client){t.next=4;break}return e=Array.prototype.slice.call(r),i=e[0],s=e[1],5===this.clientSettings.protocolVersion&&(a=Object.keys(this.subscriptionsIndetifiers).find((function(t){return n.subscriptionsIndetifiers[t]===i})),-1!==a&&delete this.subscriptionsIndetifiers[a]),t.abrupt("return",this.client.unsubscribe(i,s).then((function(){var t=o[0];delete n.subscriptionsStatuses[t]})).catch((function(t){n.errorHandler(t)})));case 4:case"end":return t.stop()}}),null,this)},publish:function(){var t,e=this,i=arguments;return h.a.async((function(s){while(1)switch(s.prev=s.next){case 0:if(!this.client){s.next=4;break}return s.abrupt("return",(t=this.client).publish.apply(t,i).catch((function(t){return e.errorHandler(t,!0),t})));case 4:this.showError(new Error("You have no active clients"),!0);case 5:case"end":return s.stop()}}),null,this)},destroyClient:function(){return h.a.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(this.client.end(!0));case 2:this.subscriptionsStatuses={};case 3:case"end":return t.stop()}}),null,this)},setActiveBoard:function(t){this.activeBoardId=t,this.$emit("change:title",this.getTitle()),this.$integrationMode&&this.$integrationBus.send("activeBoard",t)},clearActiveBoard:function(){this.activeBoardId=void 0,this.$emit("change:title",this.getTitle()),this.$integrationMode&&this.$integrationBus.send("activeBoard",void 0)},actionHandler:function(t){var e=t.topic,i=t.payload,s=t.settings;s.qos||(s.qos=1),this.publish(e,i,s)},addBoard:function(t){this.isAttachedBoardsMode?this.$set(this.boardsConfigs,t.id,this.packBoard(t,this.widgets)):(this.$set(this.boards,t.id,t),this.resolveBoardVariables(t),this.setModifyTimeBoardHandler(t.id))},deleteBoardHandler:function(t){var e=this;this.resolveBoardVariables(void 0,this.boards[t]);var i=this.boards[t].widgetsIndexes;i.forEach((function(i){var s=e.widgets[i].topics;s.forEach((function(s){var a=e.widgetsBySubscription[s];Rr(a,i),a.length||(e.hasBoardsVariableWithSameSubscription(t,s)||(e.unsubscribe(s),e.$delete(e.subscriptions,s)),e.$delete(e.widgetsBySubscription,s))})),e.$delete(e.widgets,i)})),this.$delete(this.boards,t)},deleteBoardDialogHandler:function(t){var e=this;this.$q.dialog({title:"Delete ".concat(this.boards[t].name||"*No name*"," board?"),message:"You are about to delete the ".concat(this.boards[t].name||"*No name*"," board. The board will be removed from all connections. Continue?"),color:"grey-9",ok:!0,cancel:!0}).onOk((function(){e.deleteBoardHandler(t)}))},deleteUploadedBoard:function(t){var e=this;this.$q.dialog({title:"Delete remote board?",message:"Do you really want to delete remote board?",color:"grey-9",ok:!0,cancel:!0}).onOk((function(){e.publish("".concat(e.clientSettings.syncNamespace,"/").concat(t),"",{qos:1,retain:!0})}))},editBoardHandler:function(t){var e=t.id,i=t.board;this.resolveBoardVariables(i,this.boards[e]),this.$set(this.boards,e,i),e!==i.id&&this.replaceBoardHandler(e),this.setModifyTimeBoardHandler(i.id)},setModifyTimeBoardHandler:function(t){this.$set(this.boards[t].settings,"lastModify",Date.now())},replaceBoardHandler:function(t){var e=this,i=this.boards[t];this.$set(this.boards,i.id,i),this.activeBoardId===t&&(this.clearActiveBoard(),this.$nextTick((function(){e.setActiveBoard(i.id)}))),this.$delete(this.boards,t),i.widgetsIndexes.forEach((function(t,s){var a=Object(T["a"])();e.$set(e.widgets,a,e.widgets[t]),e.$set(i.widgetsIndexes,s,a),e.$set(e.widgets[a],"id",a),e.$delete(e.widgets,t);var n=i.shortcutsIndexes.indexOf(t);-1!==n&&e.$set(i.shortcutsIndexes,n,a),e.widgets[a].topics.forEach((function(i,s){var n=e.widgetsBySubscription[i];e.$set(n,n.indexOf(t),a)})),Object.keys(i.layouts).forEach((function(t){i.layouts[t][s].i=a}))}))},blockBoardHandler:function(){var t=this.boards[this.activeBoardId];this.$set(t.settings,"blocked",!t.settings.blocked)},preventBoardHandler:function(){var t=this.boards[this.activeBoardId];this.$set(t.settings,"preventCollision",!t.settings.preventCollision)},packBoard:function(t,e){return jr(t,e)},unpackBoard:function(t){var e={},i=[];return t.widgetsIndexes=xr(t.widgetsIndexes,t.appVersion,Br["a"]),t.widgetsIndexes.forEach((function(t){return i.push(t.id),e[t.id]=t,e})),t.widgetsIndexes=i,{widgets:e,board:t}},initBoard:function(t){var e=this;t=this.migrateBoard(F()(t),t.appVersion,Br["a"]);var i=this.unpackBoard(t),s=i.board,a=i.widgets;t=s,t.appVersion=Br["a"],this.$set(this.boards,t.id,t),this.resolveBoardVariables(t),Object.keys(a).forEach((function(t){e.addWidget(a[t])}))},initSavedBoards:function(t){var e=this;if(t){var i={};Object.keys(t).forEach((function(s){var a=t[s],n=e.unpackBoard(a),o=n.board,r=n.widgets;i=Hr({},i,{},r),a=o,e.resolveBoardVariables(a),t[s]=e.migrateBoard(a,a.appVersion,Br["a"]),t[s].appVersion=Br["a"]})),this.boards=t,i&&(this.widgets=i,this.runtimeInitWidgets())}},resolveBoardVariables:function(t,e){var i=this;e||(e={settings:{}}),t||(t={settings:{}});var s=e.settings.variables&&e.settings.variables.filter((function(t){return 1===t.type}))||[],a=t.settings.variables&&t.settings.variables.filter((function(t){return 1===t.type}))||[],n=s.map((function(t){return t.topic.topicFilter})),o=a.map((function(t){return t.topic.topicFilter}));e.id&&(this.boardsVariablesValues[e.id]=void 0),t.id&&(this.boardsVariablesValues[t.id]={}),n.forEach((function(t,s){if(o.includes(t))return!1;i.widgetsBySubscription[t]&&i.widgetsBySubscription[t].length||i.hasBoardsVariableWithSameSubscription(e.id,t)||i.unsubscribe(t)})),o.forEach((function(t){var e=!!i.subscriptions[t],s={qos:1},a=i.clientSettings&&i.clientSettings.userProperties;a&&(s.properties={},s.properties.userProperties=a),e?i.unsubscribe(t).then((function(){i.subscribe(t,s)})):(i.setValueByTopic(t,null),i.subscribe(t,s))}))},hasBoardsVariableWithSameSubscription:function(t,e){var i=this;return!!this.boardsIds.filter((function(s){return s!==t&&!(!i.boards[s].settings.variables||!i.boards[s].settings.variables.filter((function(t){return 1===t.type&&t.topic.topicFilter===e})).length)})).length},runtimeInitWidgets:function(){var t=this,e=Object.keys(this.widgets);e.forEach((function(e){var i=t.widgets[e].topics;i.forEach((function(i){t.subscriptions[i]||t.setValueByTopic(i,null),t.widgetsBySubscription[i]||(t.widgetsBySubscription[i]=[]),t.widgetsBySubscription[i].push(e)}))}))},initWidgets:function(){var t=this,e=Object.keys(this.widgets);e.forEach((function(e){t.$set(t.widgets[e],"status",vt["l"])}));var i=Object.keys(this.subscriptions);if(i.length){var s=function(){var e={qos:1},i=t.clientSettings&&t.clientSettings.userProperties;return i&&(e.properties={},e.properties.userProperties=i),e};Promise.all(i.map((function(e){return t.subscribe(e,s())}))).then((function(e){t.clientInited=!0}))}},widgetLayoutSetup:function(t,e,i,s){var a=this.boards[this.activeBoardId],n=this.colsByBreakpoint[s],o=a.layouts[s],r=d(),l=r.x,c=r.y;function d(){var e=o.reduce((function(t,e){return(t.y===e.y&&t.x<=e.x||t.y<e.y)&&(t=e),t}),{y:0,x:0,h:0,w:0});return e.x+e.w+t<=n?{x:e.x+e.w,y:e.y}:{x:0,y:e.y+1}}o.push({h:e,w:t,i:i,x:l,y:c})},widgetLayoutsSetup:function(t,e,i){var s=this;Object.keys(this.colsByBreakpoint).forEach((function(a){s.widgetLayoutSetup(t,e,i,a)}))},layoutUpdateHandler:function(t){var e=t.layout,i=t.breakpoint;this.$set(this.boards[this.activeBoardId].layouts,i,e)},deleteWidgetFromLayout:function(t){var e=this,i=this.boards[this.activeBoardId],s=i.layouts;Object.keys(this.colsByBreakpoint).forEach((function(i){e.$delete(s[i],t)}))},addWidget:function(t){var e=this;t.id||(t.id=Object(T["a"])(),this.widgetLayoutsSetup(t.settings.width,t.settings.height,t.id),this.boards[this.activeBoardId].widgetsIndexes.push(t.id)),t.topics.forEach((function(i){var s=void 0!==e.subscriptions[i],a="multiplier"===t.type,n={qos:1},o=e.clientSettings&&e.clientSettings.userProperties;o&&(n.properties={},n.properties.userProperties=o),e.widgetsBySubscription[i]||(e.widgetsBySubscription[i]=[]),s?a&&e.unsubscribe(i).then((function(){e.subscribe(i,n)})):(e.setValueByTopic(i,null),e.subscribe(i,n)),e.widgetsBySubscription[i].push(t.id)})),this.clientStatus&&(t.status=vt["l"]),this.$set(this.widgets,t.id,t)},editWidget:function(t){var e=this,i=t.widgetId,s=t.settings,a=t.topics;(o()(s.topics,a).length||o()(a,s.topics).length)&&(a.forEach((function(t){if(s.topics.includes(t))return!1;Rr(e.widgetsBySubscription[t],i),e.widgetsBySubscription[t].length||(e.hasBoardsVariableWithSameSubscription(void 0,t)||(e.unsubscribe(t),e.$delete(e.subscriptions,t)),e.$delete(e.widgetsBySubscription,t))})),s.topics.forEach((function(t){if(a.includes(t))return!1;var n=!!e.subscriptions[t],o="multiplier"===s.type,r={qos:1},l=e.clientSettings&&e.clientSettings.userProperties;l&&(r.properties={},r.properties.userProperties=l),e.widgetsBySubscription[t]||(e.widgetsBySubscription[t]=[]),n?o&&e.unsubscribe(t).then((function(){e.subscribe(t,r)})):(e.setValueByTopic(t,null),e.subscribe(t,r)),e.widgetsBySubscription[t].push(i)}))),this.$set(this.widgets,i,s),this.valuesProcessing()},deleteWidget:function(t){var e=this,i=t.widgetId,s=t.settings;this.$q.dialog({title:"Delete widget?",message:"Do you really want to delete ".concat(s.name," widget?"),color:"grey-9",ok:!0,cancel:!0}).onOk((function(){e.removeFromShortcuts(i);var t=e.boards[e.activeBoardId].widgetsIndexes,a=t.indexOf(i);e.$delete(t,a),e.deleteWidgetFromLayout(a),s.topics.forEach((function(t){var s=e.widgetsBySubscription[t];Rr(s,i),s.length||(e.hasBoardsVariableWithSameSubscription(void 0,t)||(e.unsubscribe(t),e.$delete(e.subscriptions,t)),e.$delete(e.widgetsBySubscription,t))})),e.$delete(e.widgets,i)}))},fastBindWidgetHandler:function(t){var e=this.boards[this.activeBoardId].shortcutsIndexes,i=e.indexOf(t);if(-1!==i)this.$delete(e,i);else{if(4===e.length)return this.$q.notify({message:"Shortcuts can contain four widgets maximum",detail:"Delete something to add a new widget.",color:"warning",delay:1e3}),!1;e.push(t)}},removeFromShortcuts:function(t){var e=this;Object.keys(this.boards).forEach((function(i){var s=e.boards[i].shortcutsIndexes,a=s.indexOf(t);-1!==a&&e.$delete(s,a)}))},resizeHandler:function(t){var e=t.index,i=t.height,s=t.width,a=this.widgets[e];this.$set(a.settings,"height",i),this.$set(a.settings,"width",s);var n=this.boards[this.activeBoardId],o=n.layouts;Object.keys(o).forEach((function(t){var a=o[t].filter((function(t){return t.i===e}))[0];a.h=i,a.w=s}))},getSyncedBoards:function(){Object.keys(this.boardsFromConnection).length&&(this.boardsFromConnection={}),this.subscribe("".concat(this.clientSettings.syncNamespace,"/+"))},savedBoardProcess:function(t,e){if(!e.length)return this.$delete(this.boardsFromConnection,t),!1;e=JSON.parse(e),"object"===m()(e)&&(this.$set(this.boardsFromConnection,t,e),t===this.activeBoardId&&this.clientSettings.flespiBoard&&(this.activeBoardId=null,this.deleteBoardHandler(t),this.initBoard(this.boardsFromConnection[t]),this.setActiveBoard(t)))},importBoardHandler:function(t){var e=this,i=t.id;this.exportBoardId=i,this.boards[i]?this.$refs.copyReplaceDialog.open({loadLabel:"Restore"}).then((function(i){i!==e.exportBoardId&&(t.id=e.exportBoardId,t.widgetsIndexes.forEach((function(i,s){var a=Object(T["a"])(),n=t.shortcutsIndexes.indexOf(t.widgetsIndexes[s].id);-1!==n&&e.$set(t.shortcutsIndexes,n,a),t.widgetsIndexes[s].id=a,Object.keys(t.layouts).forEach((function(e){t.layouts[e][s].i=a}))}))),e.isAttachedBoardsMode?e.$set(e.boardsConfigs,t.id,t):e.initBoard(t),e.exportBoardId=""})).catch((function(){})):this.isAttachedBoardsMode?this.$set(this.boardsConfigs,t.id,t):this.initBoard(t)},importBoardFromConnectionHandler:function(t){var e=F()(this.boardsFromConnection[t]);this.importBoardHandler(e)},exportPrepareBoardHandler:function(t){var e=this;return this.exportBoardId=t,this.boardsFromConnection[t]?this.$refs.copyReplaceDialog.open().then((function(t){return e.exportBoardHandler(t,e.exportBoardId)})).catch((function(){})):Promise.resolve(this.exportBoardHandler(t,this.exportBoardId))},exportBoardHandler:function(t,e){var i,s,a=this;t===e?(i=this.boards[t],s=t):(i=this.boards[t],i.id=e,this.replaceBoardHandler(t),s=e);var n="".concat(this.clientSettings.syncNamespace,"/").concat(s);return this.publish(n,JSON.stringify(jr(i,this.widgets)),{qos:1,retain:!0}).then((function(t){return t instanceof Error?t:(a.closeExportHandler(),s)}))},uploadBoardToConnection:function(t,e){this.exportBoardHandler(t,e)},closeExportHandler:function(){this.exportBoardId=""},getShareModel:function(t,e){var i=this,s=e?t.widgetsIndexes:t.widgetsIndexes.map((function(t){return i.widgets[t]})),a=D()(s.reduce((function(t,e){return[].concat(d()(t),d()(e.topics))}),[])),n=D()(sr(s)),o={};a.forEach((function(t){o[t]||(o[t]=["subscribe"])})),n.forEach((function(t){o[t]?o[t].push("publish"):o[t]=["publish"]}));var r=Object.keys(o).reduce((function(t,e){var i={uri:"mqtt"};return i.topic=e,i.actions=o[e],t.push(i),t}),[]);return r},shareHandler:function(t){var e={boardId:t,tokens:[{label:"<Connection token>",credentions:{username:this.clientSettings.username},accessable:this.canShareByClientToken}],hasRemote:!!this.boardsFromConnection[t],currentRemoteBoards:Object.keys(this.boardsFromConnection),host:this.clientSettings.host,syncNamespace:this.clientSettings.syncNamespace,updateBoardMethod:this.exportBoardHandler};if(this.clientSettings.syncCreds){var i=F()(this.clientSettings.syncCreds);e.tokens=[].concat(d()(e.tokens),d()(i))}this.$emit("share:prepare",e)},shareErrorHandler:function(){var t=this;this.clientSettings?this.$q.notify({type:"warning",timeout:0,message:"Attention",caption:'You need to have a Standard or ACL token for sharing set up in the MQTT Client settings. Please read more <a href="https://flespi.com/blog/mqtt-tiles-shareable-and-flexible-iot-dashboards" target="_blank">here</a>.',html:!0,icon:"mdi-alert",position:"bottom-left",actions:[{label:"Update settings",color:"white",handler:function(){t.$emit("update-client-settings")}},{label:"Close",color:"white",handler:function(){}}]}):this.$q.notify({type:"warning",timeout:5e3,message:"Attention",caption:"You need to choose client.",icon:"mdi-alert",position:"bottom-left",closeBtn:!0})},shareUploadedHandler:function(t){var e={boardId:t,tokens:[{label:"<Connection token>",credentions:{username:this.clientSettings.username},accessable:this.canShareByClientToken}],hasRemote:!1,isRemote:!0,host:this.clientSettings.host,syncNamespace:this.clientSettings.syncNamespace,updateBoardMethod:this.exportBoardHandler};if(this.clientSettings.syncCreds){var i=F()(this.clientSettings.syncCreds);e.tokens=[].concat(d()(e.tokens),d()(i))}this.$emit("share:prepare",e)},shareBoard:function(t){var e=t.boardId,i=t.isRemote;this.$emit("share",{boardId:e,share:this.getShareModel(i?this.boardsFromConnection[e]:this.boards[e],i)})},shareSync:function(){var t,e=this,i=this.clientSettings.flespiBoard,s="".concat(this.clientSettings.syncNamespace,"/").concat(i);this.$q.loading.show(),this.subscribe(s).then((function(){t=e.boardsFromConnection[i],t?(e.initBoard(t),e.setActiveBoard(i)):e.$q.notify({color:"negative",message:"Board ".concat(i," not found"),timeout:1e3,position:"bottom-left"})})).catch((function(){})).finally((function(){e.$q.loading.hide()}))},exportBoardAsHandler:function(t){var e=this.boards[t],i=jr(e,this.widgets);this.exportAsHandler(i)},exportWidgetsFromBoard:function(t){if(!t.length)return!1;var e=F()(t).map((function(t){return t.id=void 0,t.status=vt["k"],t}));this.exportAsHandler(e)},exportAsHandler:function(t){this.importExportMode=1,this.importExportData=R["Base64"].encode(JSON.stringify(t)),this.$refs.importExportModal.open()},importExportClose:function(){this.importExportMode=void 0,this.importExportData=void 0},importClickHandler:function(t){this.importExportMode=0,this.importExportEntity=t,this.$refs.importExportModal.open()},importFromUserHandler:function(t){var e,i=this;try{e=JSON.parse(t)}catch(s){e=JSON.parse(R["Base64"].decode(t))}"board"===this.importExportEntity?this.importBoardHandler(e):"widgets"===this.importExportEntity&&e.forEach((function(t){i.addWidget(t)}))},updateBoards:function(t,e){this.$emit("update:boards",Hr({},this.boardsConfigs,{},Pr(t,e)))},changeAttachedBoards:function(t){this.$emit("change:attach",t)},getTitle:function(){var t="".concat(this.activeBoardId&&this.boards[this.activeBoardId].name?"".concat(this.boards[this.activeBoardId].name," - "):"","MQTT Tiles");return t},integrationModeActivate:function(){var t=this;this.$watch("initBoards",(function(t){if(t){var e=Hr({},t);this.clientSettings&&this.clientSettings.attachedBoards?t=this.clientSettings.attachedBoards.reduce((function(i,s){return t[s]&&(i[s]=t[s],delete e[s]),i}),{}):e={},this.boardsConfigs=e,this.initSavedBoards(t)}})),this.$integrationBus.on("CreateBoard",(function(){var e=Object.freeze({name:"New board",id:"",settings:{blocked:!1,variables:[]},activeVariables:{},shortcutsIndexes:[],widgetsIndexes:[],layouts:{lg:[],md:[],sm:[],xs:[],xxs:[]}}),i=z()({},e);i.id=Object(T["a"])(),t.addBoard(i),t.$integrationBus.send("boardCreated",i.id)})),this.$integrationBus.on("SetActiveBoard",(function(e){t.setActiveBoard(e)}))}},created:function(){var t=this;if(this.debouncedBusMessagesProcessing=E()(this.busMessagesProcessing,1e3,{trailing:!0}),this.debouncedUpdateBoards=M()(this.updateBoards,500,{trailing:!0}),this.valuesProcessing(),this.clientSettings)return this.clientSettings.flespiBoard&&this.shareSync(),!0;if(this.initBoards){var e=Hr({},this.initBoards),i=Hr({},this.initBoards);this.clientSettings&&this.clientSettings.attachedBoards?e=this.clientSettings.attachedBoards.reduce((function(t,s){return e[s]&&(t[s]=e[s],delete i[s]),t}),{}):i={},this.boardsConfigs=i,this.initSavedBoards(e)}this.$integrationMode&&this.integrationModeActivate(),window&&window.addEventListener("beforeunload",(function(){t.client&&t.client.end(!0)})),this.$emit("change:title",this.getTitle())},destroyed:function(){this.client&&this.client.end()},watch:{clientSettings:{handler:function(t,e){var i=this,s=!!t&&!e;return!this.isConnectivityIsEqual(t,e)&&(this.client&&this.destroyClient(),Dr(this.widgets),this.boardsFromConnection={},Object.keys(this.subscriptions).forEach((function(t){i.setValueByTopic(t,null)})),e&&this.debouncedBusMessagesProcessing(),this.boardsVariablesValuesClear(),t?void(s?this.createClient():setTimeout((function(){i.createClient()}),500)):(this.client=void 0,!1))},immediate:!0},"clientSettings.attachedBoards":function(t,e){var i=this;t&&!e?e=Object.keys(this.boards):!t&&e?(t=[].concat(d()(Object.keys(this.boardsConfigs)),d()(Object.keys(this.boards))),e=[]):t||e||(e=[],t=[]),e.forEach((function(e){if(i.boards[e]&&!t.includes(e)){var s=i.packBoard(i.boards[e],i.widgets);i.activeBoardId===e&&i.clearActiveBoard(),i.deleteBoardHandler(e),i.$set(i.boardsConfigs,e,s)}})),t.forEach((function(t){!i.boards[t]&&i.boardsConfigs[t]&&(i.initBoard(i.boardsConfigs[t]),i.$delete(i.boardsConfigs,t))}))},boardsConfigs:{deep:!0,handler:function(){this.fullView&&this.debouncedUpdateBoards(this.boards,this.widgets)}},boards:[{deep:!0,handler:function(t){this.fullView&&this.debouncedUpdateBoards(t,this.widgets)}},{handler:"boardsVariablesValuesProcessing"}],widgets:[{deep:!0,handler:function(t){this.fullView&&this.debouncedUpdateBoards(this.boards,t)}},{handler:"valuesProcessing"}]},components:{Board:Uo,Boards:Qo,CopyReplaceDialog:kr,ImportExportModal:Er},mixins:[js,Lr]},Ur=Wr,Gr=(i("4d85"),Object(nt["a"])(Ur,r,l,!1,null,null,null)),Yr=Gr.exports,Jr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{maximized:t.$q.platform.is.mobile},on:{hide:t.closeHandler},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("div",{style:{width:t.$q.platform.is.mobile?"100%":"50vw"}},[i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-toolbar-title",[t._v("Share wizard")])],1),i("div",{staticClass:"scroll bg-white",style:{height:t.$q.platform.is.mobile?"calc(100% - 100px)":"50vh"}},[i("q-stepper",{ref:"stepper",staticClass:"share-stepper",attrs:{flat:"",animated:"","done-color":"green-6","active-color":"amber-9","header-class":1===t.stepsEnum.length?"hidden":"",contracted:""},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[t.config.tokens.length>1?i("q-step",{attrs:{name:"tokens",title:"Tokens",icon:"mdi-fingerprint",done:"replace"===t.currentStep||"link"===t.currentStep}},[i("q-list",{attrs:{separator:"",bordered:""}},t._l(t.config.tokens,(function(e,s){return i("q-item",{key:e.credentions.username,attrs:{active:e.label===t.shareBoardModel.token.label,clickable:"","active-class":"bg-amber-2"},on:{click:function(i){t.setToken(e),t.currentSelectedToken=s}}},[i("q-item-section",[i("q-item-label",{staticClass:"text-grey-9 text-weight-bold"},[t._v(t._s(e.label))]),i("q-item-label",{staticClass:"text-grey-8 ellipsis",staticStyle:{"font-size":".8rem"}},[t._v(t._s(e.credentions.username))])],1),void 0!==e.accessable?i("q-item-section",{attrs:{side:""}},[e.accessable?i("div",[i("span",{staticClass:"text-white bg-green-8 rounded-borders text-weight-bold q-px-sm",staticStyle:{"font-size":".8rem"}},[t._v("valid")]),i("q-tooltip",[t._v("Validation pass")])],1):i("div",[i("span",{staticClass:"text-white bg-red-8 rounded-borders text-weight-bold q-px-xs",staticStyle:{"font-size":".8rem"}},[t._v("invalid")]),i("q-tooltip",[t._v("You can`t share by this token")])],1)]):t._e()],1)})),1)],1):t._e(),t.config.hasRemote?i("q-step",{attrs:{name:"replace",title:"Upload",icon:"mdi-file-replace-outline",done:"link"===t.currentStep}},[i("div",{staticClass:"q-mx-sm q-my-md text-grey-8 text-center",staticStyle:{"font-size":"1.2rem"}},[t._v("Such board exists. Continue?")]),i("q-checkbox",{attrs:{color:"grey-9",label:"Rename to save a copy"},model:{value:t.isNeedCopy,callback:function(e){t.isNeedCopy=e},expression:"isNeedCopy"}}),i("q-input",{attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",dense:"",disable:!t.isNeedCopy,label:"Name",error:t.isNeedCopy&&(t.shareBoardModel.boardId===t.config.boardId||t.config.currentRemoteBoards&&t.config.currentRemoteBoards.includes(t.shareBoardModel.boardId)||!t.config.currentRemoteBoards)},model:{value:t.shareBoardModel.boardId,callback:function(e){t.$set(t.shareBoardModel,"boardId",e)},expression:"shareBoardModel.boardId"}})],1):t._e(),i("q-step",{attrs:{name:"link",title:"Link","active-icon":t.isLinkCopied&&"link"===t.currentStep?"mdi-check":void 0,"active-color":t.isLinkCopied&&"link"===t.currentStep?"green":void 0,icon:"mdi-link",done:t.isLinkCopied&&"link"===t.currentStep}},[t.updatedBoardFlag?[i("q-input",{attrs:{type:"textarea",readonly:"",outlined:"",dense:"","hide-bottom-space":"","input-style":"resize: none;"},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{flat:"",icon:"mdi-content-copy",size:"1.2rem"},on:{click:t.copyLink}},[t._v("Copy")])],1)]:!1===t.updatedBoardFlag?[i("div",{staticClass:"rounded-borders bg-red-1 q-pa-md"},[i("div",{staticClass:"text-h6 text-red-8 q-mb-sm"},[i("q-icon",{attrs:{name:"mdi-alert-outline"}}),t._v("\n                Share error\n              ")],1),i("div",{staticClass:"text-grey-8"},[t._v("Link can`t be generated without updating the board in connection. ("),i("span",{staticClass:"text-grey-7"},[t._v(t._s(t.updateBoardError.message))]),t._v(")")])])]:void 0===t.updatedBoardFlag?[i("div",[t._v("\n              Generating...\n            ")])]:t._e()],2)],1)],1),i("q-toolbar",{staticClass:"bg-grey-9 text-white"},[i("q-btn",{staticClass:"q-mr-sm absolute",attrs:{flat:"",dense:""},on:{click:t.closeHandler}},[t._v("Close")]),i("q-toolbar-title"),t.canBack?i("q-btn",{attrs:{flat:""},on:{click:t.prevStepHandler}},[t._v("Back")]):t._e(),t.updateBoardError?t._e():i("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",disable:!t.isValidStep},on:{click:t.nextStepHandler}},[t._v(t._s("link"===t.currentStep?"Done":"Next"))])],1)],1)])},Kr=[],Zr={name:"ShareWizard",props:["value","config"],data:function(){return{stepsConst:{STEP_TOKEN:"tokens",STEP_REPLACE:"replace",STEP_LINK:"link"},currentStep:0,shareBoardModel:{token:"",boardId:this.config.boardId,isRemote:this.config.isRemote},link:"",isNeedCopy:!1,isLinkCopied:!1,currentConfig:F()(this.config),steps:[],updatedBoardFlag:void 0,updateBoardError:void 0,region:null}},computed:{status:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},isValidStep:function(){switch(this.currentStep){case"tokens":return this.shareBoardModel.token;case"replace":return!this.isNeedCopy||this.isNeedCopy&&this.shareBoardModel.boardId!==this.config.boardId&&this.config.currentRemoteBoards&&!this.config.currentRemoteBoards.includes(this.shareBoardModel.boardId);default:return!0}},stepsEnum:function(){return Object.values(this.steps)},canBack:function(){return!!this.stepsEnum.length&&this.currentStep!==this.steps[0].value&&!this.updateBoardError}},created:function(){var t=this,e={},i=0;this.getRegionByHost(this.config.host).then((function(){t.config.tokens.length>1?(e[i]={label:"Token",value:t.stepsConst.STEP_TOKEN},t.currentStep=t.stepsConst.STEP_TOKEN,i++):t.setToken(t.config.tokens[0]),t.config.hasRemote?(e[i]={label:"Replace",value:t.stepsConst.STEP_REPLACE},t.currentStep||(t.currentStep=t.stepsConst.STEP_REPLACE),i++):t.setboardId(t.config.boardId,t.config.boardId),e[i]={label:"Link",value:t.stepsConst.STEP_LINK},t.currentStep||(t.currentStep=t.stepsConst.STEP_LINK),t.steps=e}))},methods:{getRegionByHost:function(t){var e=this;return fetch("https://flespi.io/auth/regions",{mode:"cors"}).then((function(t){return t.json()})).then((function(i){e.region=i.result.reduce((function(e,i){return 0==="wss://".concat(i["mqtt-ws"]).indexOf(t)&&(e=i),e}),null)}))},closeHandler:function(){this.link="",this.shareBoardModel={},this.currentStep=this.stepsConst.STEP_TOKEN,this.steps=[],this.updatedBoardFlag=void 0,this.updateBoardError=void 0,this.$emit("input",!1),this.$emit("hide")},nextStepHandler:function(){var t=this;this.validateCurrentStep().then((function(e){e&&t.$refs.stepper.next()}))},prevStepHandler:function(){this.isLinkCopied&&(this.isLinkCopied=!1),this.$refs.stepper.previous()},validateCurrentStep:function(){switch(this.currentStep){case"tokens":var t=this.validateToken(this.shareBoardModel.token);return t&&this.shareBoardModel.boardId&&this.generateLink(),t;case"replace":return this.setboardId(this.shareBoardModel.boardId,this.config.boardId);case"link":return Promise.resolve(this.closeHandler())}},validateToken:function(t){var e=this,i=0===t.credentions.username.indexOf("FlespiToken ")?t.credentions.username:"FlespiToken ".concat(t.credentions.username);return fetch("".concat(this.region.rest,"/auth/info"),{mode:"cors",headers:{Authorization:i}}).then((function(t){return t.json()})).then((function(i){var s=j()(i,"result[0].access.type",1),a=!!i.errors,n=1!==s;return n?(e.setToken(t),e.$set(t,"accessable",!0)):!a&&n||e.$set(t,"accessable",!1),n}))},setToken:function(t){this.$set(this.shareBoardModel,"token",t)},setboardId:function(t,e){var i=this;this.$set(this.shareBoardModel,"boardId",t);var s=Promise.resolve(!0);return this.config.isRemote?(this.updatedBoardFlag=!0,this.$emit("share",this.shareBoardModel),this.generateLink()):s=this.config.updateBoardMethod(e,t).then((function(t){return t instanceof Error?(i.updatedBoardFlag=!1,i.updateBoardError=t,!0):(i.updatedBoardFlag=!0,i.$emit("share",i.shareBoardModel),i.generateLink(),!0)})),s},generateLink:function(){var t=j()(this.shareBoardModel,"token.credentions.username","");if(t){var e=this.config.syncNamespace,i=this.config.host,s={token:t,topic:e,boardId:this.shareBoardModel.boardId};0!==i.indexOf("wss://mqtt.flespi.io")&&(s.host=i);var a="".concat(window.location.href).concat(R["Base64"].encode(JSON.stringify(s)));this.link=a}},copyLink:function(){var t=this;Object($r["a"])(this.link).then((function(e){t.$q.notify({color:"positive",icon:"content_copy",message:"Link copied",timeout:1e3,position:"bottom-left"}),t.isLinkCopied=!0}),(function(e){t.$q.notify({color:"negative",icon:"content_copy",message:"Error coping link",timeout:1e3,position:"bottom-left"})}))}}},Qr=Zr,Xr=(i("6231"),Object(nt["a"])(Qr,Jr,Kr,!1,null,null,null)),tl=Xr.exports,el={name:"PageIndex",meta:function(){return{title:this.title}},data:function(){return{title:"",initBoards:this.$integrationMode?void 0:this.$q.localStorage.getItem(vt["b"]),shareWizardOpened:!1,shareWizardConfig:void 0}},methods:{updateBoards:function(t){var e=t?Object.keys(t):[],i=this.initBoards?Object.keys(this.initBoards):[],s=o()(i,e),a=o()(e,i);s.length&&this.$emit("delete:boards",s),a.length&&this.$emit("add:boards",a),this.$integrationMode?this.$integrationBus.send("saveBoards",t):(this.$q.localStorage.set(vt["b"],t),this.initBoards=t)},sharePrepareHandler:function(t){this.shareWizardConfig=t,this.shareWizardOpened=!0},shareBoard:function(t){this.$refs.dash.shareBoard(t)},changeAttachedBoards:function(t){this.$emit("change:attach",t)}},created:function(){var t=this;this.$integrationMode&&this.$integrationBus.on("SetBoards",(function(e){t.initBoards=e}))},props:["client"],components:{Dash:Yr,ShareWizard:tl}},il=el,sl=Object(nt["a"])(il,s,a,!1,null,null,null);e["default"]=sl.exports},9224:function(t){t.exports=JSON.parse('{"a":"1.12.7"}')},9296:function(t,e,i){"use strict";var s=i("234b"),a=i.n(s);a.a},9723:function(t,e,i){"use strict";var s=i("50f8"),a=i.n(s);a.a},"97da":function(t,e,i){"use strict";var s=i("0ab2"),a=i.n(s);a.a},"9d42":function(t,e,i){},"9e66":function(t,e,i){},a22d:function(t,e,i){},a741:function(t,e,i){},a9a2:function(t,e,i){},b006:function(t,e,i){"use strict";var s=i("25d7"),a=i.n(s);a.a},b930:function(t,e,i){},c34b:function(t,e,i){},c3d9:function(t,e,i){"use strict";var s=i("dfe0"),a=i.n(s);a.a},c550:function(t,e,i){},c70a:function(t,e,i){},c831:function(t,e,i){},cc786:function(t,e,i){"use strict";var s=i("ed6e"),a=i.n(s);a.a},d540:function(t,e,i){"use strict";var s=i("5616"),a=i.n(s);a.a},d7fd:function(t,e,i){},d87c:function(t,e,i){"use strict";var s=i("a741"),a=i.n(s);a.a},d9c4:function(t,e,i){"use strict";var s=i("c550"),a=i.n(s);a.a},da3e:function(t,e,i){},db97:function(t){t.exports=JSON.parse('{"devices":{"selectors":[{"name":"devices","getter":{"name":"getDevices","params":[]},"value":{"label":"all","value":"+"}}],"children":{"state":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/${fields}","payloadType":"string"},"selectors":[{"name":"fields","list":[{"label":"ID","value":"id"},{"label":"Name","value":"name"},{"label":"Device type ID","value":"device_type_id"},{"label":"Configuration","value":"configuration"},{"label":"Settings","value":"settings"},{"label":"Messages size","value":"messages_size"},{"label":"Messages TTL","value":"messages_ttl"},{"label":"Messages rotate","value":"messages_rotate"},{"label":"Blocked status","value":"blocked"},{"label":"Connected status","value":"connected"},{"label":"CID","value":"cid"}],"value":{"label":"all","value":"+"}}]},"messages":{"topic":{"topicPattern":"flespi/message/gw/devices/${devices}","payloadType":"JSON"}},"intervals":{"topic":{"topicPattern":"flespi/interval/gw/calcs/${calcs}/devices/${devices}/${events}","payloadType":"JSON"},"selectors":[{"name":"calcs","getter":{"name":"getCalcs","params":["devices"]},"value":{"label":"all","value":"+"}},{"name":"events","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"}],"value":{"label":"all","value":"+"}}]},"logs":{"topic":{"topicPattern":"flespi/log/gw/devices/${devices}/${event type}","payloadType":"JSON"},"selectors":[{"name":"event type","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"},{"label":"Blocked","value":"blocked"},{"label":"Unblocked","value":"unblocked"},{"label":"Connected","value":"connected"},{"label":"Disconnected","value":"disconnected"}],"value":{"label":"all","value":"+"}}]},"telemetry":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/telemetry/${parameters}","payloadType":"string"},"selectors":[{"name":"parameters","getter":{"name":"getDevicesTelemetry","params":["devices"]},"value":{"label":"all","value":"+"}}]},"settings":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/settings/${name}","payloadType":"JSON"},"selectors":[{"name":"name","getter":{"name":"getDevicesSettings","params":["devices"]},"value":{"label":"all","value":"+"}}]}}},"analytics":{"selectors":[{"name":"calcs","getter":{"name":"getCalcs","params":["devices"]},"value":{"label":"all","value":"+"}},{"name":"devices","getter":{"name":"getDevices","params":["calcs"]},"value":{"label":"all","value":"+"}}],"children":{"state":{"topic":{"topicPattern":"flespi/state/gw/calcs/${calcs}/devices/${devices}/${statuses}","payloadType":"JSON"},"selectors":[{"name":"statuses","list":[{"label":"Synchronization state","value":"synced"},{"label":"Last detected interval","value":"last"},{"label":"Currently active interval","value":"active"}],"value":{"label":"all","value":"+"}}]},"intervals":{"topic":{"topicPattern":"flespi/interval/gw/calcs/${calcs}/devices/${devices}/${events}","payloadType":"JSON"},"selectors":[{"name":"events","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"}],"value":{"label":"all","value":"+"}}]}}}}')},de1c:function(t,e,i){"use strict";var s=i("ff3b"),a=i.n(s);a.a},dfe0:function(t,e,i){},e00b:function(t,e,i){},e36e:function(t,e,i){"use strict";var s=i("da3e"),a=i.n(s);a.a},e45f:function(t,e,i){},e7d1:function(t,e,i){"use strict";var s=i("9d42"),a=i.n(s);a.a},e8f0:function(t,e,i){},ea5f:function(t,e,i){"use strict";var s=i("4796"),a=i.n(s);a.a},ed6e:function(t,e,i){},f09b:function(t,e,i){"use strict";var s=i("0fe8"),a=i.n(s);a.a},fc6a:function(t,e,i){"use strict";var s=i("d7fd"),a=i.n(s);a.a},fcc5:function(t,e,i){"use strict";var s=i("06b1"),a=i.n(s);a.a},ff3b:function(t,e,i){}}]);